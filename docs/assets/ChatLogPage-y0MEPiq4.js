import{r as c,j as e,cy as Z,cz as ee}from"./index-lODvT2xf.js";function de(s){return`chat-bookmarks-v1-${s}`}function ne(s){try{const n=localStorage.getItem(de(s));return n?JSON.parse(n):[]}catch{return[]}}function re(s,n){localStorage.setItem(de(s),JSON.stringify(n))}function G(){return{name:"",leftNick:"M",rightNick:"ä½ ",leftAvatarDataUrl:"",rightAvatarDataUrl:""}}function X(s){return s.trim().toLowerCase()}function ye(s){return s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function le(s,n,a){if(!s)return null;const l=X(s);return l?n.some(i=>X(i)===l)?"user":a.some(i=>X(i)===l)?"assistant":null:null}function ve(s){const n=["content","message","text","body"];for(const a of n){const l=s[a];if(typeof l=="string"&&l.trim())return l.trim()}return""}function we(s){const n=["timestamp","time","datetime","date"];for(const a of n){const l=s[a];if(typeof l!="string")continue;const i=l.trim();if(!i)continue;const b=new Date(i);return Number.isNaN(b.getTime())?i.replace("T"," ").slice(0,16):`${b.getFullYear()}-${String(b.getMonth()+1).padStart(2,"0")}-${String(b.getDate()).padStart(2,"0")} ${String(b.getHours()).padStart(2,"0")}:${String(b.getMinutes()).padStart(2,"0")}`}}function oe(s,n){for(const a of n){const l=s.match(new RegExp(`^${ye(a)}\\s*[ï¼š:]\\s*(.*)$`,"i"));if(l)return(l[1]??"").trim()}return null}function ke(s,n){const a=Z(n?.leftNick,"M"),l=Z(n?.rightNick,"ä½ "),i=s.trim();if(i.startsWith("[")||i.startsWith("{"))try{const B=JSON.parse(i),C=Array.isArray(B)?B:[B],v=[];for(const m of C){if(!m||typeof m!="object")continue;const h=m,p=ve(h);if(!p)continue;let j=null;const y=h.role;if(y==="user"||y==="assistant")j=y;else{const R=(typeof h.speaker=="string"?h.speaker:void 0)??(typeof h.name=="string"?h.name:void 0)??(typeof h.author=="string"?h.author:void 0)??(typeof h.from=="string"?h.from:void 0);j=le(R,l,a)}j&&v.push({role:j,content:p,time:we(h)})}if(v.length>0)return v}catch{}const b=s.split(`
`),N=[];let w=null,x="",k;function A(){w&&x.trim()&&N.push({role:w,content:x.trim(),time:k}),x="",k=void 0}for(const B of b){const C=B.trim();if(!C)continue;const v=C.match(/^\[(\d{4}-\d{2}-\d{2}[\sT]\d{2}:\d{2}(?::\d{2})?)\]/);if(v){k=v[1].replace("T"," ").slice(0,16);continue}const m=C.match(/^ã€(user|assistant)ã€‘\s*(?:\[([^\]]+)\])?(.*)$/i);if(m){A(),w=m[1].toLowerCase()==="user"?"user":"assistant",m[2]&&(k=m[2].replace("T"," ").slice(0,16));const y=(m[3]??"").trim();y&&(x=y);continue}const h=oe(C,l);if(h!==null){A(),w="user",x=h;continue}const p=oe(C,a);if(p!==null){A(),w="assistant",x=p;continue}const j=C.match(/^ã€([^ã€‘]+)ã€‘\s*(.*)$/);if(j){const y=le(j[1],l,a);y&&(A(),w=y,x=(j[2]??"").trim());continue}x&&(x+=`
`),x+=C}return A(),N}function ce(s){return s.trim().toLowerCase()}function V(s){return s.replace(/\.(txt|md|docx|json)$/i,"")}function ie(s,n){return Z(s,n)[0]??n}const Ce=["#efeff4","#f6f1e7","#eaf1f6","#f4e9ef","#eef3e6"];function Be(s){const n=s.chatBackgroundImageUrl.trim();if(!n)return{backgroundColor:s.chatBackgroundColor};const a=Math.max(0,Math.min(.9,s.chatBackgroundOverlay/100));return{backgroundColor:s.chatBackgroundColor,backgroundImage:`linear-gradient(rgba(255,255,255,${a}), rgba(255,255,255,${a})), url("${n}")`,backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"}}function Ae(s,n){return s.trim()||n}function De(s){const n=s.trim();return n?n.startsWith("data:image/")||n.startsWith("http://")||n.startsWith("https://")||n.startsWith("/")||n.startsWith("./")||n.startsWith("../")||/\.(png|jpe?g|gif|webp|avif|svg)$/i.test(n):!1}function J({icon:s,fallback:n,imageClassName:a="h-6 w-6",textClassName:l="text-2xl leading-none"}){const i=Ae(s,n);return De(i)?e.jsx("img",{src:i,alt:"",className:`${a} object-contain`}):e.jsx("span",{className:l,children:i})}function K({panelKey:s,openPanel:n,onToggle:a,title:l,subtitle:i,children:b}){const N=n===s;return e.jsxs("section",{className:"overflow-hidden rounded-2xl border border-stone-200 bg-white shadow-sm",children:[e.jsxs("button",{type:"button",onClick:()=>a(s),className:"flex w-full items-center gap-3 px-4 py-3 text-left transition hover:bg-stone-50",children:[e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"text-sm text-stone-800",children:l}),e.jsx("p",{className:"truncate text-xs text-stone-500",children:i})]}),e.jsx("span",{className:`text-xl leading-none text-stone-400 transition-transform ${N?"rotate-90":""}`,"aria-hidden":"true",children:"â€º"})]}),N&&e.jsx("div",{className:"border-t border-stone-200 p-4",children:b})]})}function Le({logs:s,chatProfiles:n,settings:a,onSettingChange:l,onImportChatLogFiles:i,onImportChatLogFolderFiles:b,onClearAllChatLogs:N,onDeleteChatLog:w,onSaveChatProfile:x,onDeleteChatProfile:k,onBindLogProfile:A,onExit:B}){const[C,v]=c.useState(""),[m,h]=c.useState(""),[p,j]=c.useState(a.chatAppDefaultProfileId),[y,R]=c.useState(""),[D,L]=c.useState("messages"),[S,q]=c.useState("data"),[H,P]=c.useState(a.chatBackgroundImageUrl),[Y,W]=c.useState(!1),[U,I]=c.useState(G),[$,E]=c.useState(""),[r,d]=c.useState(null),g=c.useMemo(()=>s.find(t=>t.name===C)??null,[s,C]),F=c.useMemo(()=>{const t=ce(y);return t?s.filter(o=>ce(o.name).includes(t)):s},[s,y]),M=c.useMemo(()=>n.find(t=>t.id===p)??n[0]??null,[n,p]),xe=c.useMemo(()=>n.find(t=>t.id===m)??M,[n,m,M]);c.useEffect(()=>{j(a.chatAppDefaultProfileId)},[a.chatAppDefaultProfileId]),c.useEffect(()=>{P(a.chatBackgroundImageUrl)},[a.chatBackgroundImageUrl]),c.useEffect(()=>{if(g){h(g.profileId??p);return}h("")},[g?.name,g?.profileId,p]),c.useEffect(()=>{!p||n.some(o=>o.id===p)||(j(""),l({chatAppDefaultProfileId:""}))},[n,p,l]),c.useEffect(()=>{if(!$)return;const t=n.find(o=>o.id===$);if(!t){E(""),d(null);return}d({name:t.name,leftNick:t.leftNick,rightNick:t.rightNick,leftAvatarDataUrl:t.leftAvatarDataUrl,rightAvatarDataUrl:t.rightAvatarDataUrl})},[n,$]);const ue=c.useCallback(t=>{v(t)},[]),te=c.useCallback(()=>{if(!s.length)return;const t=s[Math.floor(Math.random()*s.length)];v(t.name)},[s]),z=a.chatAppShowLabels,me=ie(M?.leftNick,"Michael"),he=M?`${ie(M.rightNick,"ä½ ")} â™¡`:"ðŸ¥º â¤ï¸",se=M?.leftAvatarDataUrl||M?.rightAvatarDataUrl,ae=c.useMemo(()=>Be(a),[a.chatBackgroundColor,a.chatBackgroundImageUrl,a.chatBackgroundOverlay]);function be(t){j(t),l({chatAppDefaultProfileId:t})}function Q(t,o){l({[t]:o})}function pe(t,o){if(!o)return;const f=new FileReader;f.onload=()=>{const u=typeof f.result=="string"?f.result:"";u&&Q(t,u)},f.readAsDataURL(o)}function fe(t){if(!t)return;const o=new FileReader;o.onload=()=>{const f=typeof o.result=="string"?o.result:"";f&&(P(f),l({chatBackgroundImageUrl:f}))},o.readAsDataURL(t)}function O(t){q(o=>o===t?null:t)}function _(t,o,f){if(!o)return;const u=new FileReader;u.onload=()=>{const T=typeof u.result=="string"?u.result:"";T&&f(Ne=>({...Ne,[t]:T}))},u.readAsDataURL(o)}async function ge(){!U.name.trim()||!await x({...U,id:`profile-${Date.now()}`})||(W(!1),I(G()),ee({kind:"success",message:"è§’è‰²è¨­å®šå·²å„²å­˜"}))}async function je(){!$||!r||!r.name.trim()||!await x({...r,id:$})||(E(""),d(null),ee({kind:"success",message:"è§’è‰²è¨­å®šå·²å„²å­˜"}))}return g?e.jsx(Te,{log:g,chatProfiles:n,selectedProfileId:m,selectedProfile:xe,onSelectProfile:t=>{h(t),A?.(g.name,t)},backgroundStyle:ae,onBack:()=>v(""),onExit:B}):e.jsxs("div",{className:"mx-auto flex h-full w-full max-w-xl flex-col overflow-hidden",style:ae,children:[e.jsx("header",{className:"shrink-0 border-b border-stone-200/70 bg-white/95 px-4 pb-3 pt-[max(0.75rem,env(safe-area-inset-top))] backdrop-blur",children:e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[B?e.jsx("button",{type:"button",onClick:B,className:"h-9 w-9 rounded-full border border-stone-300 bg-white text-xl leading-none text-stone-700 transition active:scale-95","aria-label":"è¿”å›ž",title:"è¿”å›ž",children:e.jsx("span",{style:{transform:"translateY(-1px)",display:"block"},children:"â€¹"})}):e.jsx("span",{className:"h-9 w-9"}),e.jsx("h1",{className:"font-normal tracking-wide text-stone-900",style:{fontSize:"var(--ui-header-title-size, 17px)"},children:D==="messages"?"æ¶ˆæ¯":D==="discover"?"ç™¼ç¾":"æˆ‘"}),e.jsx("button",{type:"button",onClick:te,disabled:!s.length,className:"h-9 w-9 rounded-full border border-stone-300 bg-white text-xl leading-none text-stone-700 transition active:scale-95 disabled:opacity-40","aria-label":"éš¨æ©Ÿæ‰“é–‹",title:"éš¨æ©Ÿæ‰“é–‹",children:"ï¼‹"})]})}),e.jsxs("main",{className:"min-h-0 flex-1 overflow-y-auto",children:[D==="messages"&&e.jsxs("div",{className:"bg-white",children:[e.jsxs("button",{type:"button",onClick:te,disabled:!s.length,className:"flex w-full items-center gap-3 bg-white px-4 py-3 text-left transition active:bg-stone-50 disabled:opacity-40",children:[se?e.jsx("img",{src:se,alt:"",className:"h-14 w-14 rounded-xl object-cover"}):e.jsx("div",{className:"grid h-14 w-14 place-items-center rounded-xl bg-stone-200 text-2xl text-stone-500",children:"ðŸ’¬"}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"truncate text-stone-900",style:{fontSize:"var(--chat-contact-title-size, 17px)",lineHeight:1.3},children:me}),e.jsx("p",{className:"mt-0.5 truncate text-stone-400",style:{fontSize:"var(--chat-contact-subtitle-size, 14px)",lineHeight:1.3},children:he})]}),e.jsx("span",{className:"text-stone-300 text-lg",children:"â€º"})]}),e.jsx("div",{className:"mx-4 h-px bg-stone-100"}),!s.length&&e.jsx("p",{className:"px-4 py-8 text-center text-sm text-stone-400",children:"è«‹å…ˆåˆ°ã€Œæˆ‘ã€åˆ†é åŒ¯å…¥å°è©±ç´€éŒ„"})]}),D==="discover"&&e.jsxs("div",{className:"space-y-3 px-3 py-3",children:[e.jsx("div",{className:"rounded-2xl border border-stone-200 bg-white p-3 shadow-sm",children:e.jsx("input",{type:"search",value:y,onChange:t=>R(t.target.value),placeholder:"æœå°‹æª”å",className:"w-full rounded-xl border border-stone-300 bg-white px-3 py-2 text-sm text-stone-800 outline-none focus:border-stone-500"})}),e.jsxs("div",{className:"overflow-hidden rounded-2xl border border-stone-200 bg-white shadow-sm",children:[e.jsx("ul",{className:"divide-y divide-stone-100",children:F.map(t=>e.jsx("li",{children:e.jsxs("div",{className:"flex items-center gap-2 px-3 py-2",children:[e.jsxs("button",{type:"button",onClick:()=>ue(t.name),className:"flex min-w-0 flex-1 items-center justify-between gap-3 rounded-xl px-2 py-2 text-left transition active:bg-stone-100",children:[e.jsx("span",{className:"min-w-0 flex-1 truncate text-sm text-stone-800",children:V(t.name)}),e.jsx("span",{className:"text-xs text-stone-400",children:"â€º"})]}),e.jsx("button",{type:"button",onClick:()=>{window.confirm(`è¦åˆªé™¤é€™ä»½å°è©±ç´€éŒ„å—Žï¼Ÿ

${V(t.name)}`)&&w(t.name)},className:"inline-flex h-8 w-8 items-center justify-center rounded-full border border-rose-200 bg-rose-50 text-sm text-rose-600 transition active:scale-95","aria-label":`åˆªé™¤ ${V(t.name)}`,title:"åˆªé™¤",children:"âœ•"})]})},t.name))}),!F.length&&e.jsx("p",{className:"px-4 py-6 text-center text-sm text-stone-400",children:"æ²’æœ‰ç¬¦åˆçš„ç´€éŒ„"})]})]}),D==="me"&&e.jsxs("div",{className:"space-y-3 px-3 py-3",children:[e.jsxs(K,{panelKey:"nav",openPanel:S,onToggle:O,title:"åº•éƒ¨åˆ†é åœ–ç¤º",subtitle:"å¯è¼¸å…¥ç¬¦è™Ÿ / è²¼åœ–ç‰‡ç¶²å€ / ç›´æŽ¥ä¸Šå‚³åœ–ç‰‡",children:[e.jsx("div",{className:"space-y-2",children:[{label:"æ¶ˆæ¯",field:"chatAppMessagesIcon",value:a.chatAppMessagesIcon,fallback:"ðŸ’¬"},{label:"ç™¼ç¾",field:"chatAppDiscoverIcon",value:a.chatAppDiscoverIcon,fallback:"âœ¨"},{label:"æˆ‘",field:"chatAppMeIcon",value:a.chatAppMeIcon,fallback:"ðŸ‘¤"}].map(t=>e.jsxs("div",{className:"space-y-1.5 rounded-xl border border-stone-200 bg-stone-50 p-2.5",children:[e.jsx("p",{className:"text-xs text-stone-600",children:t.label}),e.jsxs("div",{className:"grid grid-cols-[2.5rem_1fr_auto_auto] items-center gap-2",children:[e.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-xl border border-stone-300 bg-white",children:e.jsx(J,{icon:t.value,fallback:t.fallback,imageClassName:"h-6 w-6"})}),e.jsx("input",{type:"text",value:t.value,onChange:o=>Q(t.field,o.target.value),className:"w-full rounded-lg border border-stone-300 bg-white px-2 py-2 text-sm",placeholder:t.fallback}),e.jsxs("label",{className:"inline-flex h-10 w-10 cursor-pointer items-center justify-center rounded-lg border border-stone-300 bg-white text-sm text-stone-700 transition active:scale-95",children:["â¤´",e.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:o=>{pe(t.field,o.target.files?.[0]),o.currentTarget.value=""}})]}),e.jsx("button",{type:"button",onClick:()=>Q(t.field,""),className:"inline-flex h-10 w-10 items-center justify-center rounded-lg border border-stone-300 bg-white text-sm text-stone-700 transition active:scale-95","aria-label":"é‚„åŽŸ",title:"é‚„åŽŸ",children:"â†º"})]})]},t.field))}),e.jsxs("label",{className:"mt-3 flex items-center justify-between rounded-xl border border-stone-200 bg-stone-50 px-3 py-2 text-sm text-stone-700",children:[e.jsx("span",{children:"é¡¯ç¤ºæ–‡å­—"}),e.jsx("input",{type:"checkbox",checked:a.chatAppShowLabels,onChange:t=>l({chatAppShowLabels:t.target.checked}),className:"h-4 w-4 accent-stone-900"})]})]}),e.jsxs(K,{panelKey:"data",openPanel:S,onToggle:O,title:"å°è©±è³‡æ–™",subtitle:`ç›®å‰ ${s.length} ä»½`,children:[e.jsxs("div",{className:"mb-3 flex items-end justify-between gap-3",children:[e.jsx("p",{className:"text-xs text-stone-500",children:"æ”¯æ´ txt / md / json / docx"}),e.jsx("button",{type:"button",onClick:N,disabled:!s.length,className:"rounded-lg border border-rose-200 bg-rose-50 px-2.5 py-1.5 text-xs text-rose-700 disabled:opacity-50",children:"æ¸…ç©º"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("label",{className:"cursor-pointer rounded-xl bg-stone-900 py-2.5 text-center text-sm text-white transition active:opacity-80",children:["åŒ¯å…¥æª”æ¡ˆ",e.jsx("input",{type:"file",multiple:!0,accept:".txt,.md,.json,.docx",className:"hidden",onChange:t=>{const o=t.target.files?Array.from(t.target.files):[];o.length&&i(o),t.currentTarget.value=""}})]}),e.jsxs("label",{className:"cursor-pointer rounded-xl bg-stone-900 py-2.5 text-center text-sm text-white transition active:opacity-80",children:["åŒ¯å…¥è³‡æ–™å¤¾",e.jsx("input",{type:"file",webkitdirectory:"",multiple:!0,accept:".txt,.md,.json,.docx",className:"hidden",onChange:t=>{const o=t.target.files?Array.from(t.target.files):[];o.length&&b(o),t.currentTarget.value=""}})]})]})]}),e.jsx(K,{panelKey:"defaultProfile",openPanel:S,onToggle:O,title:"é è¨­è§’è‰²",subtitle:"æ¶ˆæ¯é é ­åƒ / åç¨±æœƒè·Ÿéš¨é€™çµ„",children:e.jsxs("select",{value:p,onChange:t=>be(t.target.value),className:"w-full rounded-xl border border-stone-300 bg-white px-3 py-2 text-sm text-stone-700",children:[e.jsx("option",{value:"",children:"é è¨­ï¼ˆä½  / Mï¼‰"}),n.map(t=>e.jsxs("option",{value:t.id,children:[t.name,"ï¼ˆ",t.rightNick," / ",t.leftNick,"ï¼‰"]},t.id))]})}),e.jsx(K,{panelKey:"bubble",openPanel:S,onToggle:O,title:"æ³¡æ³¡å¤–è§€",subtitle:"æ¨£å¼ / åœ“è§’ / é¡è‰²",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsx("button",{type:"button",onClick:()=>l({chatBubbleStyle:"jelly"}),className:`rounded-lg border px-3 py-2 text-sm ${a.chatBubbleStyle==="jelly"?"border-stone-900 bg-stone-900 text-white":"border-stone-300 bg-white text-stone-700"}`,children:"QQ æžœå‡"}),e.jsx("button",{type:"button",onClick:()=>l({chatBubbleStyle:"imessage"}),className:`rounded-lg border px-3 py-2 text-sm ${a.chatBubbleStyle==="imessage"?"border-stone-900 bg-stone-900 text-white":"border-stone-300 bg-white text-stone-700"}`,children:"iMessage"}),e.jsx("button",{type:"button",onClick:()=>l({chatBubbleStyle:"imessageClassic"}),className:`rounded-lg border px-3 py-2 text-sm ${a.chatBubbleStyle==="imessageClassic"?"border-stone-900 bg-stone-900 text-white":"border-stone-300 bg-white text-stone-700"}`,children:"iMessage+"})]}),e.jsxs("label",{className:"block space-y-1",children:[e.jsxs("span",{className:"flex items-center justify-between text-xs text-stone-600",children:[e.jsx("span",{children:"æ³¡æ³¡åœ“è§’"}),e.jsxs("span",{children:[a.chatBubbleRadius,"px"]})]}),e.jsx("input",{type:"range",min:10,max:36,step:1,value:a.chatBubbleRadius,onChange:t=>l({chatBubbleRadius:Number(t.target.value)}),className:"w-full accent-stone-800"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("label",{className:"block space-y-1",children:[e.jsx("span",{className:"text-xs text-stone-600",children:"æˆ‘æ–¹åº•è‰²"}),e.jsx("input",{type:"color",value:a.chatUserBubbleColor,onChange:t=>l({chatUserBubbleColor:t.target.value}),className:"h-10 w-full rounded-md border border-stone-300"})]}),e.jsxs("label",{className:"block space-y-1",children:[e.jsx("span",{className:"text-xs text-stone-600",children:"å°æ–¹åº•è‰²"}),e.jsx("input",{type:"color",value:a.chatAiBubbleColor,onChange:t=>l({chatAiBubbleColor:t.target.value}),className:"h-10 w-full rounded-md border border-stone-300"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("label",{className:"block space-y-1",children:[e.jsx("span",{className:"text-xs text-stone-600",children:"æˆ‘æ–¹é‚Šæ¡†"}),e.jsx("input",{type:"color",value:a.chatUserBubbleBorderColor,onChange:t=>l({chatUserBubbleBorderColor:t.target.value}),className:"h-10 w-full rounded-md border border-stone-300"})]}),e.jsxs("label",{className:"block space-y-1",children:[e.jsx("span",{className:"text-xs text-stone-600",children:"å°æ–¹é‚Šæ¡†"}),e.jsx("input",{type:"color",value:a.chatAiBubbleBorderColor,onChange:t=>l({chatAiBubbleBorderColor:t.target.value}),className:"h-10 w-full rounded-md border border-stone-300"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("label",{className:"block space-y-1",children:[e.jsx("span",{className:"text-xs text-stone-600",children:"æˆ‘æ–¹æ–‡å­—"}),e.jsx("input",{type:"color",value:a.chatUserBubbleTextColor,onChange:t=>l({chatUserBubbleTextColor:t.target.value}),className:"h-10 w-full rounded-md border border-stone-300"})]}),e.jsxs("label",{className:"block space-y-1",children:[e.jsx("span",{className:"text-xs text-stone-600",children:"å°æ–¹æ–‡å­—"}),e.jsx("input",{type:"color",value:a.chatAiBubbleTextColor,onChange:t=>l({chatAiBubbleTextColor:t.target.value}),className:"h-10 w-full rounded-md border border-stone-300"})]})]})]})}),e.jsx(K,{panelKey:"background",openPanel:S,onToggle:O,title:"é–±è®€èƒŒæ™¯",subtitle:"è‰²ç¥¨ã€åœ–ç‰‡ã€é€æ˜Žåº¦",children:e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"flex flex-wrap gap-2",children:Ce.map(t=>{const o=a.chatBackgroundColor.toLowerCase()===t.toLowerCase();return e.jsx("button",{type:"button",onClick:()=>l({chatBackgroundColor:t}),className:`h-7 w-7 rounded-full border transition active:scale-95 ${o?"border-stone-900 ring-2 ring-stone-300":"border-stone-300"}`,style:{background:t},"aria-label":`èƒŒæ™¯è‰² ${t}`,title:t},t)})}),e.jsxs("label",{className:"block space-y-1",children:[e.jsx("span",{className:"text-xs text-stone-600",children:"è‡ªè¨‚åº•è‰²"}),e.jsx("input",{type:"color",value:a.chatBackgroundColor,onChange:t=>l({chatBackgroundColor:t.target.value}),className:"h-10 w-full rounded-md border border-stone-300"})]}),e.jsxs("label",{className:"block space-y-1",children:[e.jsx("span",{className:"text-xs text-stone-600",children:"èƒŒæ™¯åœ–ç‰‡ URL"}),e.jsx("input",{type:"url",value:H,onChange:t=>P(t.target.value),placeholder:"https://.../chat-bg.jpg",className:"w-full rounded-xl border border-stone-300 bg-white px-3 py-2 text-sm text-stone-700"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("button",{type:"button",onClick:()=>l({chatBackgroundImageUrl:H.trim()}),className:"rounded-xl border border-stone-300 bg-white py-2 text-sm text-stone-700 transition active:scale-[0.99]",children:"å¥—ç”¨åœ–ç‰‡ URL"}),e.jsxs("label",{className:"cursor-pointer rounded-xl border border-stone-300 bg-white py-2 text-center text-sm text-stone-700 transition active:opacity-80",children:["ä¸Šå‚³åœ–ç‰‡",e.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:t=>{fe(t.target.files?.[0]),t.currentTarget.value=""}})]})]}),e.jsxs("label",{className:"block space-y-1",children:[e.jsxs("span",{className:"flex items-center justify-between text-xs text-stone-600",children:[e.jsx("span",{children:"åœ–ç‰‡é®ç½©"}),e.jsxs("span",{children:[a.chatBackgroundOverlay,"%"]})]}),e.jsx("input",{type:"range",min:0,max:90,step:1,value:a.chatBackgroundOverlay,onChange:t=>l({chatBackgroundOverlay:Number(t.target.value)}),className:"w-full accent-stone-800"})]}),e.jsx("button",{type:"button",onClick:()=>{P(""),l({chatBackgroundImageUrl:"",chatBackgroundOverlay:0})},className:"w-full rounded-xl border border-stone-300 bg-white py-2 text-sm text-stone-700 transition active:scale-[0.99]",children:"ç§»é™¤èƒŒæ™¯åœ–ç‰‡"})]})}),e.jsx(K,{panelKey:"profiles",openPanel:S,onToggle:O,title:"èŠå¤©è§’è‰²è¨­å®šï¼ˆæ´—è§’è‰²åç¨±ï¼‰",subtitle:`å…± ${n.length} çµ„`,children:e.jsxs("div",{className:"space-y-3",children:[n.length===0&&e.jsx("p",{className:"text-xs text-stone-400",children:"å°šæœªå»ºç«‹è§’è‰²è¨­å®šï¼Œé è¨­ç‚ºã€Œä½ ã€/ã€ŒMã€ã€‚"}),e.jsx("div",{className:"space-y-2",children:n.map(t=>{const o=$===t.id&&!!r;return e.jsx("div",{className:"rounded-lg border border-stone-200 bg-stone-50 p-3",children:o?e.jsxs("div",{className:"space-y-2",children:[e.jsx("input",{type:"text",value:r.name,onChange:f=>d(u=>u&&{...u,name:f.target.value}),placeholder:"è¨­å®šåç¨±",className:"w-full rounded-lg border border-stone-300 bg-white px-3 py-2 text-sm"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("input",{type:"text",value:r.rightNick,onChange:f=>d(u=>u&&{...u,rightNick:f.target.value}),placeholder:"å³å´æš±ç¨±ï¼ˆå¯ / åˆ†éš”ï¼‰",className:"rounded-lg border border-stone-300 bg-white px-3 py-2 text-sm"}),e.jsx("input",{type:"text",value:r.leftNick,onChange:f=>d(u=>u&&{...u,leftNick:f.target.value}),placeholder:"å·¦å´æš±ç¨±ï¼ˆå¯ / åˆ†éš”ï¼‰",className:"rounded-lg border border-stone-300 bg-white px-3 py-2 text-sm"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("label",{className:"space-y-1",children:[e.jsx("span",{className:"text-xs text-stone-500",children:"å³å´é ­åƒ"}),e.jsx("input",{type:"file",accept:"image/*",onChange:f=>_("rightAvatarDataUrl",f.target.files?.[0],u=>d(T=>T&&u(T))),className:"w-full rounded-lg border border-stone-300 bg-white px-2 py-1 text-xs"})]}),e.jsxs("label",{className:"space-y-1",children:[e.jsx("span",{className:"text-xs text-stone-500",children:"å·¦å´é ­åƒ"}),e.jsx("input",{type:"file",accept:"image/*",onChange:f=>_("leftAvatarDataUrl",f.target.files?.[0],u=>d(T=>T&&u(T))),className:"w-full rounded-lg border border-stone-300 bg-white px-2 py-1 text-xs"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{type:"button",onClick:()=>{je()},className:"flex-1 rounded-xl bg-stone-900 py-2 text-sm text-white",children:"å„²å­˜"}),e.jsx("button",{type:"button",onClick:()=>{E(""),d(null)},className:"flex-1 rounded-xl border border-stone-300 bg-white py-2 text-sm text-stone-600",children:"å–æ¶ˆ"})]})]}):e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"truncate text-sm text-stone-800",children:t.name}),e.jsxs("p",{className:"text-xs text-stone-400",children:["å³ï¼š",t.rightNick," ï¼ å·¦ï¼š",t.leftNick]})]}),e.jsx("button",{type:"button",onClick:()=>{E(t.id),d({name:t.name,leftNick:t.leftNick,rightNick:t.rightNick,leftAvatarDataUrl:t.leftAvatarDataUrl,rightAvatarDataUrl:t.rightAvatarDataUrl})},className:"rounded-lg border border-stone-300 bg-white px-2 py-1 text-xs text-stone-700",children:"ç·¨è¼¯"}),e.jsx("button",{type:"button",onClick:()=>k(t.id),className:"rounded-lg border border-rose-200 bg-rose-50 px-2 py-1 text-xs text-rose-600",children:"åˆªé™¤"})]})},t.id)})}),Y?e.jsxs("div",{className:"space-y-2 rounded-lg border border-violet-200 bg-violet-50 p-3",children:[e.jsx("input",{type:"text",placeholder:"è¨­å®šåç¨±ï¼Œä¾‹ï¼šå’Œ4oçš„å°è©±",value:U.name,onChange:t=>I(o=>({...o,name:t.target.value})),className:"w-full rounded-lg border border-stone-300 bg-white px-3 py-2 text-sm"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("input",{type:"text",placeholder:"å³å´æš±ç¨±ï¼ˆå¯ / åˆ†éš”ï¼‰",value:U.rightNick,onChange:t=>I(o=>({...o,rightNick:t.target.value})),className:"rounded-lg border border-stone-300 bg-white px-3 py-2 text-sm"}),e.jsx("input",{type:"text",placeholder:"å·¦å´æš±ç¨±ï¼ˆå¯ / åˆ†éš”ï¼‰",value:U.leftNick,onChange:t=>I(o=>({...o,leftNick:t.target.value})),className:"rounded-lg border border-stone-300 bg-white px-3 py-2 text-sm"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("label",{className:"space-y-1",children:[e.jsx("span",{className:"text-xs text-stone-500",children:"å³å´é ­åƒ"}),e.jsx("input",{type:"file",accept:"image/*",onChange:t=>_("rightAvatarDataUrl",t.target.files?.[0],I),className:"w-full rounded-lg border border-stone-300 bg-white px-2 py-1 text-xs"})]}),e.jsxs("label",{className:"space-y-1",children:[e.jsx("span",{className:"text-xs text-stone-500",children:"å·¦å´é ­åƒ"}),e.jsx("input",{type:"file",accept:"image/*",onChange:t=>_("leftAvatarDataUrl",t.target.files?.[0],I),className:"w-full rounded-lg border border-stone-300 bg-white px-2 py-1 text-xs"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{type:"button",onClick:()=>{ge()},className:"flex-1 rounded-xl bg-stone-900 py-2 text-sm text-white",children:"å„²å­˜"}),e.jsx("button",{type:"button",onClick:()=>{W(!1),I(G())},className:"flex-1 rounded-xl border border-stone-300 bg-white py-2 text-sm text-stone-600",children:"å–æ¶ˆ"})]})]}):e.jsx("button",{type:"button",onClick:()=>W(!0),className:"w-full rounded-xl border border-violet-200 bg-violet-50 py-2 text-sm text-violet-700",children:"ï¼‹ æ–°å¢žè§’è‰²è¨­å®š"})]})})]})]}),e.jsx("nav",{className:"shrink-0 border-t border-stone-200 bg-white px-5 pb-[max(1.25rem,env(safe-area-inset-bottom))] pt-2.5",children:e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsxs("button",{type:"button",onClick:()=>L("messages"),className:`flex flex-col items-center rounded-xl px-2 py-1.5 transition ${D==="messages"?"text-black":"text-stone-400"} ${z?"gap-1 text-xs":"gap-0 text-base"}`,"aria-label":"æ¶ˆæ¯",children:[e.jsx(J,{icon:a.chatAppMessagesIcon,fallback:"ðŸ’¬",imageClassName:"h-6 w-6",textClassName:"text-2xl leading-none"}),z&&e.jsx("span",{children:"æ¶ˆæ¯"})]}),e.jsxs("button",{type:"button",onClick:()=>L("discover"),className:`flex flex-col items-center rounded-xl px-2 py-1.5 transition ${D==="discover"?"text-black":"text-stone-400"} ${z?"gap-1 text-xs":"gap-0 text-base"}`,"aria-label":"ç™¼ç¾",children:[e.jsx(J,{icon:a.chatAppDiscoverIcon,fallback:"âœ¨",imageClassName:"h-6 w-6",textClassName:"text-2xl leading-none"}),z&&e.jsx("span",{children:"ç™¼ç¾"})]}),e.jsxs("button",{type:"button",onClick:()=>L("me"),className:`flex flex-col items-center rounded-xl px-2 py-1.5 transition ${D==="me"?"text-black":"text-stone-400"} ${z?"gap-1 text-xs":"gap-0 text-base"}`,"aria-label":"æˆ‘",children:[e.jsx(J,{icon:a.chatAppMeIcon,fallback:"ðŸ‘¤",imageClassName:"h-6 w-6",textClassName:"text-2xl leading-none"}),z&&e.jsx("span",{children:"æˆ‘"})]})]})})]})}function Te({log:s,chatProfiles:n,selectedProfileId:a,selectedProfile:l,onSelectProfile:i,backgroundStyle:b,onBack:N,onExit:w}){const x=c.useRef(null),k=c.useRef(null),[A,B]=c.useState(!1),[C,v]=c.useState(!1),[m,h]=c.useState(()=>ne(s.name)),[p,j]=c.useState(null),[y,R]=c.useState(""),D=V(s.name),L=c.useMemo(()=>ke(s.content,l),[s.content,l]);c.useEffect(()=>{const r=x.current;r&&r.scrollTo({top:r.scrollHeight})},[s.name,a]),c.useEffect(()=>{h(ne(s.name))},[s.name]);function S(){x.current?.scrollTo({top:0,behavior:"smooth"})}function q(){const r=x.current;r&&r.scrollTo({top:r.scrollHeight,behavior:"smooth"})}function H(r){const d=x.current;if(!d)return;const g=d.querySelector(`[data-msg-index="${r}"]`);g&&g.scrollIntoView({behavior:"smooth",block:"center"})}function P(){const r=x.current;if(!r)return 0;const d=r.getBoundingClientRect().top,g=r.querySelectorAll("[data-msg-index]");for(const F of g)if(F.getBoundingClientRect().bottom>d+60)return Number(F.getAttribute("data-msg-index")??"0");return 0}function Y(r,d){j({index:r,preview:d}),R("")}function W(){const r=P(),d=L[r],g=d?d.content.slice(0,50):"";Y(r,g)}function U(){if(!p)return;const r=y.trim()||p.preview.slice(0,20)||`æ›¸ç±¤ ${m.length+1}`,d={id:`bm-${Date.now()}`,messageIndex:p.index,label:r,preview:p.preview,createdAt:new Date().toISOString()},g=[...m,d];h(g),re(s.name,g),j(null),ee({kind:"success",message:"æ›¸ç±¤å·²æ–°å¢ž"})}function I(r){const d=m.filter(g=>g.id!==r);h(d),re(s.name,d)}function $(r,d){k.current=setTimeout(()=>{Y(r,d)},500)}function E(){k.current&&(clearTimeout(k.current),k.current=null)}return e.jsxs("div",{className:"relative mx-auto flex h-full w-full max-w-xl flex-col overflow-hidden",style:b,children:[e.jsx("div",{className:"shrink-0 border-b border-stone-200 bg-white px-3 pb-2 pt-[max(0.75rem,env(safe-area-inset-top))]",children:e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsx("button",{type:"button",onClick:N,className:"h-9 w-9 rounded-full border border-stone-300 bg-white text-xl leading-none text-stone-700 transition active:scale-95","aria-label":"è¿”å›ž",children:e.jsx("span",{style:{transform:"translateY(-1px)",display:"block"},children:"â€¹"})}),e.jsx("p",{className:"min-w-0 flex-1 truncate text-center text-sm font-medium text-stone-800",children:D}),w?e.jsx("button",{type:"button",onClick:w,className:"h-9 w-9 rounded-full border border-stone-300 bg-white text-xl leading-none text-stone-700 transition active:scale-95","aria-label":"é›¢é–‹",children:e.jsx("span",{style:{transform:"translateY(-1px)",display:"block"},children:"Ã—"})}):e.jsx("span",{className:"h-9 w-9"})]})}),e.jsx("div",{ref:x,id:"chat-messages",className:"min-h-0 flex-1 overflow-y-auto px-3 py-3",children:L.length>0?e.jsx($e,{messages:L,profile:l,onPressStart:$,onPressEnd:E}):e.jsxs("p",{className:"rounded-2xl border border-stone-200 bg-white px-3 py-4 text-sm text-stone-500",children:["ç„¡æ³•è§£æžç‚ºèŠå¤©æ ¼å¼ï¼Œä»¥ä¸‹æ˜¯åŽŸæ–‡ï¼š",e.jsx("span",{className:"mt-2 block whitespace-pre-wrap rounded-xl border border-stone-200 bg-white p-3 text-left text-xs text-stone-700",children:s.content})]})}),A&&e.jsxs("div",{className:"pointer-events-none absolute bottom-24 right-4 z-10 flex flex-col gap-2",children:[e.jsx("button",{type:"button",onClick:S,className:"pointer-events-auto flex h-11 w-11 items-center justify-center rounded-full border border-stone-200 bg-white text-stone-600 shadow-md transition active:scale-95","aria-label":"å›žåˆ°é ‚éƒ¨",children:e.jsx(Ie,{})}),e.jsx("button",{type:"button",onClick:q,className:"pointer-events-auto flex h-11 w-11 items-center justify-center rounded-full border border-stone-200 bg-white text-stone-600 shadow-md transition active:scale-95","aria-label":"å›žåˆ°åº•éƒ¨",children:e.jsx(Se,{})})]}),e.jsx("div",{className:"shrink-0 border-t border-stone-200 bg-white px-5 pb-[max(1.25rem,env(safe-area-inset-bottom))] pt-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{type:"button",onClick:W,className:"flex h-10 w-10 shrink-0 items-center justify-center rounded-full border border-stone-300 bg-stone-50 text-xl text-stone-600 transition active:scale-95","aria-label":"æ–°å¢žæ›¸ç±¤",title:"æ–°å¢žæ›¸ç±¤ï¼ˆç•¶å‰ä½ç½®ï¼‰",children:e.jsx("span",{style:{transform:"translateY(-1px)",display:"block"},children:"+"})}),e.jsxs("button",{type:"button",onClick:()=>v(!0),className:"relative flex h-10 w-10 shrink-0 items-center justify-center rounded-full border border-stone-300 bg-stone-50 text-xl transition active:scale-95","aria-label":"æ›¸ç±¤æ¸…å–®",children:["ðŸ”–",m.length>0&&e.jsx("span",{className:"absolute -right-0.5 -top-0.5 flex h-4 w-4 items-center justify-center rounded-full bg-rose-500 text-[10px] font-bold text-white",children:m.length>9?"9+":m.length})]}),e.jsx("div",{className:"relative min-w-0 flex-1",children:n.length>0?e.jsxs(e.Fragment,{children:[e.jsxs("select",{value:a,onChange:r=>i(r.target.value),className:"h-10 w-full appearance-none rounded-full border border-stone-300 bg-stone-50 pl-4 pr-8 text-sm text-stone-700",children:[e.jsx("option",{value:"",children:"è§’è‰²é è¨­"}),n.map(r=>e.jsxs("option",{value:r.id,children:[r.name,"ï¼ˆ",r.rightNick," / ",r.leftNick,"ï¼‰"]},r.id))]}),e.jsx("span",{className:"pointer-events-none absolute right-3 top-1/2 -translate-y-1/2 text-xs text-stone-500",children:"â–¾"})]}):e.jsx("div",{className:"h-10 rounded-full border border-stone-300 bg-stone-50 px-4 text-sm leading-10 text-stone-400",children:"å°šæœªå»ºç«‹è§’è‰²è¨­å®š"})}),e.jsx("button",{type:"button",onClick:()=>B(r=>!r),className:`flex h-10 w-10 shrink-0 items-center justify-center rounded-full text-white shadow-sm transition active:scale-95 ${A?"bg-blue-600":"bg-blue-500"}`,"aria-label":"å¿«é€Ÿå°Žèˆªé–‹é—œ",children:e.jsx(Ue,{})})]})}),C&&e.jsxs("div",{className:"absolute inset-0 z-20 flex flex-col justify-end",children:[e.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>v(!1)}),e.jsxs("div",{className:"relative z-10 flex max-h-[70%] flex-col rounded-t-3xl bg-white shadow-xl",children:[e.jsxs("div",{className:"flex shrink-0 items-center justify-between border-b border-stone-100 px-5 pb-3 pt-4",children:[e.jsx("h2",{className:"text-base font-medium text-stone-800",children:"æ›¸ç±¤"}),e.jsx("button",{type:"button",onClick:()=>v(!1),className:"flex h-7 w-7 items-center justify-center rounded-full bg-stone-100 text-sm text-stone-500",children:e.jsx("span",{style:{transform:"translateY(-1px)",display:"block"},children:"Ã—"})})]}),e.jsx("div",{className:"min-h-0 flex-1 overflow-y-auto pb-[max(1.25rem,env(safe-area-inset-bottom))]",children:m.length===0?e.jsxs("p",{className:"px-5 py-10 text-center text-sm text-stone-400",children:["é‚„æ²’æœ‰æ›¸ç±¤",e.jsx("br",{}),e.jsx("span",{className:"text-xs",children:"é•·æŒ‰è¨Šæ¯æ³¡æ³¡ æˆ– é»ž + å¯æ–°å¢ž"})]}):e.jsx("ul",{className:"divide-y divide-stone-100",children:m.map(r=>e.jsxs("li",{className:"flex items-center gap-3 px-5 py-3",children:[e.jsxs("button",{type:"button",onClick:()=>{H(r.messageIndex),v(!1)},className:"min-w-0 flex-1 text-left",children:[e.jsx("p",{className:"truncate text-sm text-stone-800",children:r.label}),e.jsx("p",{className:"mt-0.5 truncate text-xs text-stone-400",children:r.preview})]}),e.jsx("button",{type:"button",onClick:()=>I(r.id),className:"flex h-7 w-7 shrink-0 items-center justify-center rounded-full border border-rose-200 bg-rose-50 text-xs text-rose-500","aria-label":"åˆªé™¤æ›¸ç±¤",children:"âœ•"})]},r.id))})})]})]}),p&&e.jsxs("div",{className:"absolute inset-0 z-30 flex items-center justify-center px-6",children:[e.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>j(null)}),e.jsxs("div",{className:"relative z-10 w-full max-w-sm rounded-2xl bg-white p-5 shadow-xl",children:[e.jsx("h2",{className:"mb-1 text-base font-medium text-stone-800",children:"æ–°å¢žæ›¸ç±¤"}),e.jsx("p",{className:"mb-3 truncate text-xs text-stone-400",children:p.preview}),e.jsx("input",{type:"text",value:y,onChange:r=>R(r.target.value),onKeyDown:r=>{r.key==="Enter"&&U(),r.key==="Escape"&&j(null)},placeholder:"æ›¸ç±¤åç¨±ï¼ˆå¯ç•™ç©ºï¼‰",className:"mb-3 w-full rounded-xl border border-stone-300 bg-stone-50 px-4 py-2.5 text-sm text-stone-800 outline-none focus:border-stone-500",autoFocus:!0}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{type:"button",onClick:U,className:"flex-1 rounded-xl bg-stone-900 py-2.5 text-sm text-white transition active:opacity-80",children:"æ–°å¢ž"}),e.jsx("button",{type:"button",onClick:()=>j(null),className:"flex-1 rounded-xl border border-stone-300 bg-white py-2.5 text-sm text-stone-600",children:"å–æ¶ˆ"})]})]})]})]})}function Ie(){return e.jsx("svg",{width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",stroke:"currentColor",strokeWidth:"2.2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("polyline",{points:"2.5,10.5 7.5,4.5 12.5,10.5"})})}function Se(){return e.jsx("svg",{width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",stroke:"currentColor",strokeWidth:"2.2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("polyline",{points:"2.5,4.5 7.5,10.5 12.5,4.5"})})}function Ue(){return e.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"})})}function $e({messages:s,profile:n,onPressStart:a,onPressEnd:l}){return e.jsx("div",{className:"flex flex-col gap-1.5",children:s.map((i,b)=>{const N=i.role==="user",w=N?n?.rightAvatarDataUrl:n?.leftAvatarDataUrl,x=i.content.slice(0,50),k=i.time&&(b===0||s[b-1]?.time?.slice(0,10)!==i.time.slice(0,10))?i.time.slice(0,10):null;return e.jsxs("div",{"data-msg-index":b,children:[k&&e.jsx("div",{className:"my-3 text-center text-[11px] text-stone-400",children:k}),e.jsxs("div",{className:`flex items-end gap-2 ${N?"flex-row-reverse":"flex-row"}`,children:[e.jsx("div",{className:"mb-4 shrink-0",children:w?e.jsx("img",{src:w,alt:"",className:"h-8 w-8 rounded-full object-cover"}):e.jsx("div",{className:`grid h-8 w-8 place-items-center rounded-full text-xs font-medium text-white ${N?"bg-emerald-400":"bg-sky-300"}`,children:N?n?.rightNick?.[0]??"ä½ ":n?.leftNick?.[0]??"M"})}),e.jsxs("div",{className:`flex max-w-[75%] flex-col gap-0.5 ${N?"items-end":"items-start"}`,children:[e.jsx("div",{className:`message-bubble ${N?"user":"ai"}`,onMouseDown:()=>a?.(b,x),onMouseUp:()=>l?.(),onMouseLeave:()=>l?.(),onTouchStart:()=>a?.(b,x),onTouchEnd:()=>l?.(),onTouchCancel:()=>l?.(),children:e.jsx("div",{className:"content",style:{whiteSpace:"pre-wrap",wordBreak:"break-word"},children:i.content})}),i.time&&e.jsx("p",{className:"px-1 text-[10px] text-stone-400",children:i.time.slice(11,16)})]})]})]},`${b}-${i.time??""}`)})})}export{Le as ChatLogPage};
