import{r as c,cx as V,j as o}from"./index-GkjWVMOE.js";const q="/Our-love/docs/assets/honeymoon001-DMzB3A1N.webp",oo="/Our-love/docs/assets/honeymoon002-DHhodi5w.webp",eo="/Our-love/docs/assets/honeymoon003-D4GSQ0Ne.webp",so="/Our-love/docs/assets/honeymoon004-gXyAN1jT.webp",to="/Our-love/docs/assets/honeymoon005-pXBh6Dxm.webp",no="/Our-love/docs/assets/honeymoon006-DldcMl5Q.webp",lo="/Our-love/docs/assets/honeymoon007-Bb45_Rzx.webp",co="/Our-love/docs/assets/honeymoon008-BurcFFTq.webp",bo="/Our-love/docs/assets/honeymoon009-X2JOF0n1.webp",ao="/Our-love/docs/assets/honeymoon010-adAj-SBG.webp",ro="/Our-love/docs/assets/honeymoon011-CbiyOkXT.webp",io="/Our-love/docs/assets/honeymoon012-B7w6O2_7.webp",_o="/Our-love/docs/assets/honeymoon013-DeBDLIaJ.webp",uo="/Our-love/docs/assets/honeymoon014-BE-YAEli.webp",po="/Our-love/docs/assets/honeymoon015-Ch-Edjps.webp",ko="/Our-love/docs/assets/honeymoon016-Br4jyWim.webp",ho="/Our-love/docs/assets/honeymoon017-CU7jYbN1.webp",mo="/Our-love/docs/assets/honeymoon018-47h2iHiW.webp",wo="/Our-love/docs/assets/honeymoon019-o70oJnBA.webp",vo="/Our-love/docs/assets/honeymoon020-Cu0FmMtM.webp",fo="/Our-love/docs/assets/honeymoon021-DC1k2Eda.webp",go="/Our-love/docs/assets/honeymoon022-ze3TtJ-C.webp",yo="/Our-love/docs/assets/honeymoon023-UMs6cpMD.webp",Oo="/Our-love/docs/assets/honeymoon024-Cxf4c1dl.webp",Bo="/Our-love/docs/assets/honeymoon025-BlsQImB-.webp",To="/Our-love/docs/assets/honeymoon026-BvGdoOzM.webp",xo="/Our-love/docs/assets/honeymoon027-eEns6aE8.webp",No="/Our-love/docs/assets/honeymoon028-Bv2yXz2y.webp",Co="/Our-love/docs/assets/honeymoon029-Bk2dnlZu.webp",jo="/Our-love/docs/assets/honeymoon030-OlT-Bmk3.webp",So="/Our-love/docs/assets/honeymoon031-l3t--c2L.webp",Eo="/Our-love/docs/assets/honeymoon032-CFwhmWiz.webp",Do="/Our-love/docs/assets/honeymoon033-BWxzUphs.webp",Ao="/Our-love/docs/assets/honeymoon034-DGA8CeeL.webp",Io="/Our-love/docs/assets/honeymoon035-GLD2vAA_.webp",Ro="/Our-love/docs/assets/honeymoon036-D1wZVLd6.webp",Mo="/Our-love/docs/assets/honeymoon037-CoTv_9XC.webp",Ho="/Our-love/docs/assets/honeymoon038-D9MUawWU.webp",Lo="/Our-love/docs/assets/honeymoon039-DlddGPQ1.webp",$o="/Our-love/docs/assets/honeymoon006-DldcMl5Q.webp",Po="/Our-love/docs/assets/honeymoon006-DldcMl5Q.webp",zo="/Our-love/docs/assets/honeymoon042-BxBo63N8.webp",Uo="/Our-love/docs/assets/honeymoon043-D19yvfum.webp",Wo="/Our-love/docs/assets/honeymoon044-CpF1v_4U.webp",Go="/Our-love/docs/assets/honeymoon045-BQCTviUf.webp",Xo="/Our-love/docs/assets/honeymoon046-CUzQmirc.webp",Qo="/Our-love/docs/assets/Book-005-BAos6JE4.webp",Fo="/Our-love/docs/assets/Book-006-BBASGsUQ.webp",Jo="/Our-love/docs/assets/Book-008-DTsn6Zcy.webp",Ko="/Our-love/docs/assets/Book-009-Y7B8nuBp.webp",Yo="/Our-love/docs/assets/Book-010-4TCpGBXH.webp",Zo="/Our-love/docs/assets/Book-011-CVZ58f75.webp",Vo="/Our-love/docs/assets/Book-001-D8Djn6Zr.webp",qo="/Our-love/docs/assets/Book-003-kqudzSfA.webp",oe="/Our-love/docs/assets/Book-005-BayPf2SZ.webp",ee="/Our-love/docs/assets/Book-006-U8iu_elt.webp",se="/Our-love/docs/assets/Book-008-Dhnbbl6f.webp",te="/Our-love/docs/assets/Book-009-P-XX0ImV.webp",ne="/Our-love/docs/assets/Book-010-xm8LBAoI.webp",le="/Our-love/docs/assets/Book-011-B8d8gJka.webp",ce="/Our-love/docs/assets/Book-012-DgjOsvPh.webp",be="/Our-love/docs/assets/Book-013-CAPcz_Vz.webp",ae="/Our-love/docs/assets/Book-014-CqGrH8tJ.webp",re="/Our-love/docs/assets/Book-015-Bs7D9sgp.webp",ie="/Our-love/docs/assets/Book-016-ngngh_OI.webp",_e=[{id:"book-001",title:"Êñ∞Â©öÊó•Ë®ò",subtitle:"ÂæÖÊõøÊèõ",height:"tall",spineColor:"#7c5cbc",textColor:"#f8f0e4",coverImage:"books/book-001/cover.webp"},{id:"book-002",title:"Â©öÁ¶ÆË®ò‰∫ã",subtitle:"ÂæÖÊõøÊèõ",height:"medium",spineColor:"#3d8a78",textColor:"#f8f0e4",coverImage:"books/book-002/cover.webp"},{id:"book-003",title:"‰Ω†Ë™™È°òÊÑè‰ª•Âæå: Â©öÂæåÁîüÊ¥ª",subtitle:"ÂæÖÊõøÊèõ",height:"tall",spineColor:"#c47830",textColor:"#f8f0e4",coverImage:"books/book-003/cover.webp"},{id:"book-004",title:"ÁßÅÂØÜÊôÇÂàª",subtitle:"ÂæÖÊõøÊèõ",height:"medium",spineColor:"#8a3a52",textColor:"#f8f0e4",coverImage:"books/book-004/cover.webp"},{id:"book-005",title:"ÊàëÂÄëÁöÑÊïÖ‰∫ã",subtitle:"ÂæÖÊõøÊèõ",height:"tall",spineColor:"#3a5a8c",textColor:"#f8f0e4",coverImage:"books/book-005/cover.webp"}],P="/Our-love/docs/",ue=`${P}chibi/chibi-00.webp`,R="memorial-bookshelf-live-theme",M="memorial-bookshelf-live-tone-set",de=40,pe=72,ke="ÂæÖÊõøÊèõ",he=Object.assign({"../../public/books/book-001/honeymoon001.webp":q,"../../public/books/book-001/honeymoon002.webp":oo,"../../public/books/book-001/honeymoon003.webp":eo,"../../public/books/book-001/honeymoon004.webp":so,"../../public/books/book-001/honeymoon005.webp":to,"../../public/books/book-001/honeymoon006.webp":no,"../../public/books/book-001/honeymoon007.webp":lo,"../../public/books/book-001/honeymoon008.webp":co,"../../public/books/book-001/honeymoon009.webp":bo,"../../public/books/book-001/honeymoon010.webp":ao,"../../public/books/book-001/honeymoon011.webp":ro,"../../public/books/book-001/honeymoon012.webp":io,"../../public/books/book-001/honeymoon013.webp":_o,"../../public/books/book-001/honeymoon014.webp":uo,"../../public/books/book-001/honeymoon015.webp":po,"../../public/books/book-001/honeymoon016.webp":ko,"../../public/books/book-001/honeymoon017.webp":ho,"../../public/books/book-001/honeymoon018.webp":mo,"../../public/books/book-001/honeymoon019.webp":wo,"../../public/books/book-001/honeymoon020.webp":vo,"../../public/books/book-001/honeymoon021.webp":fo,"../../public/books/book-001/honeymoon022.webp":go,"../../public/books/book-001/honeymoon023.webp":yo,"../../public/books/book-001/honeymoon024.webp":Oo,"../../public/books/book-001/honeymoon025.webp":Bo,"../../public/books/book-001/honeymoon026.webp":To,"../../public/books/book-001/honeymoon027.webp":xo,"../../public/books/book-001/honeymoon028.webp":No,"../../public/books/book-001/honeymoon029.webp":Co,"../../public/books/book-001/honeymoon030.webp":jo,"../../public/books/book-001/honeymoon031.webp":So,"../../public/books/book-001/honeymoon032.webp":Eo,"../../public/books/book-001/honeymoon033.webp":Do,"../../public/books/book-001/honeymoon034.webp":Ao,"../../public/books/book-001/honeymoon035.webp":Io,"../../public/books/book-001/honeymoon036.webp":Ro,"../../public/books/book-001/honeymoon037.webp":Mo,"../../public/books/book-001/honeymoon038.webp":Ho,"../../public/books/book-001/honeymoon039.webp":Lo,"../../public/books/book-001/honeymoon040.webp":$o,"../../public/books/book-001/honeymoon041.webp":Po,"../../public/books/book-001/honeymoon042.webp":zo,"../../public/books/book-001/honeymoon043.webp":Uo,"../../public/books/book-001/honeymoon044.webp":Wo,"../../public/books/book-001/honeymoon045.webp":Go,"../../public/books/book-001/honeymoon046.webp":Xo,"../../public/books/book-002/Book-005.webp":Qo,"../../public/books/book-002/Book-006.webp":Fo,"../../public/books/book-003/Book-008.webp":Jo,"../../public/books/book-003/Book-009.webp":Ko,"../../public/books/book-004/Book-010.webp":Yo,"../../public/books/book-004/Book-011.webp":Zo,"../../public/books/book-005/Book-001.webp":Vo,"../../public/books/book-005/Book-003.webp":qo,"../../public/books/book-005/Book-005.webp":oe,"../../public/books/book-005/Book-006.webp":ee,"../../public/books/book-005/Book-008.webp":se,"../../public/books/book-005/Book-009.webp":te,"../../public/books/book-005/Book-010.webp":ne,"../../public/books/book-005/Book-011.webp":le,"../../public/books/book-005/Book-012.webp":ce,"../../public/books/book-005/Book-013.webp":be,"../../public/books/book-005/Book-014.webp":ae,"../../public/books/book-005/Book-015.webp":re,"../../public/books/book-005/Book-016.webp":ie}),H=[44,60,36,52,40],L=[.85,.77,.91,.82,.87],$=[14,18,15,17,13],x=[[{dark:["#7c5cbc","#5040a0"],warm:["#922828","#6a1414"]},{dark:["#3d8a78","#285a50"],warm:["#2a5a38","#183828"]},{dark:["#c47830","#9a5218"],warm:["#8a6820","#6a4a0c"]},{dark:["#8a3a52","#5c1e38"],warm:["#5a3068","#3a1848"]},{dark:["#3a5a8c","#1e3868"],warm:["#8a3820","#5c1e0e"]}],[{dark:["#355277","#23395a"],warm:["#8f3f34","#6d281e"]},{dark:["#5a4c86","#3c2e63"],warm:["#6a5e2a","#4d4219"]},{dark:["#2f6a60","#1f4b43"],warm:["#2f5a3c","#204129"]},{dark:["#7a3558","#572141"],warm:["#8c4f28","#6b3518"]},{dark:["#586d33","#3e4f23"],warm:["#5a2f5d","#3c1f40"]}],[{dark:["#8a4343","#5f2a2a"],warm:["#8b5a20","#6b4317"]},{dark:["#4d5f87","#33415f"],warm:["#864129","#652b1a"]},{dark:["#3c7a6d","#285447"],warm:["#7a5328","#5b3c1d"]},{dark:["#6e4f8f","#4a3266"],warm:["#406642","#2a482f"]},{dark:["#8b6f34","#5f4c25"],warm:["#6a3d5b","#4b2841"]}],[{dark:["#305e7a","#1e3f56"],warm:["#8a2f38","#662129"]},{dark:["#7d6342","#534228"],warm:["#2e5b37","#1f4027"]},{dark:["#70408c","#4c2a62"],warm:["#875c2e","#65411f"]},{dark:["#48746e","#2d4e4a"],warm:["#7c3560","#5a2342"]},{dark:["#84513b","#5d3728"],warm:["#495e8a","#334368"]}],[{dark:["#6a3f70","#45284b"],warm:["#955736","#6f3d24"]},{dark:["#395c8c","#243d61"],warm:["#7c3a2d","#5a291f"]},{dark:["#5a6f31","#3c4c1f"],warm:["#2f5b43","#20402f"]},{dark:["#8a5642","#603a2d"],warm:["#5d3f86","#432b63"]},{dark:["#35606a","#244248"],warm:["#7f5f2d","#5e451f"]}],[{dark:["#4a6e8d","#304a63"],warm:["#8d3f5a","#692a42"]},{dark:["#7e4f37","#573524"],warm:["#4e6b2a","#34491b"]},{dark:["#5a3f85","#3d2b5e"],warm:["#84582e","#623f20"]},{dark:["#3b7860","#275243"],warm:["#8a3b2e","#65281f"]},{dark:["#8b6f3e","#5f4c2b"],warm:["#43637e","#2f455b"]}]];function me(l){return l.length?l[Math.floor(Math.random()*l.length)]??null:null}function we(l,s){const n=`${l.id}-${s}`;let r=0;for(let b=0;b<n.length;b+=1)r=(r<<5)-r+n.charCodeAt(b),r|=0;const i=["bsl-spine-pattern-linen","bsl-spine-pattern-grain","bsl-spine-pattern-dots"],a=Math.abs(r+s*131);return a%5===0?"":i[Math.floor(a/3)%i.length]}function ve(l){const s=(l??"").trim();return!s||s===ke?"":s}function fe(l,s){const n=Object.entries(he).filter(([b])=>b.includes(`/books/${l.id}/`)),r=n.find(([b])=>(b.split("/").pop()?.toLowerCase()??"").startsWith("cover")),i=n.filter(([b])=>!(b.split("/").pop()?.toLowerCase()??"").startsWith("cover")).sort(([b],[u])=>b.localeCompare(u,void 0,{numeric:!0,sensitivity:"base"})).map(([,b])=>b),a=(l.coverImage??"").trim(),_=a?a.startsWith("http")||a.startsWith("data:")?a:`${P}${a.startsWith("/")?a.slice(1):a}`:r?.[1]??"";return{id:l.id,title:(l.title??"").trim()||`Êõ∏Êú¨ ${s+1}`,subtitle:ve(l.subtitle),icon:(l.icon??"").trim()||"üìñ",coverImageUrl:_,pages:i}}function ge(l,s){const n=Math.max(320,s-70-16-72);return Array.from({length:l},(r,i)=>Math.round(n*L[i%L.length]))}function w(...l){return l.filter(Boolean).join(" ")}function Be({onExit:l}){const s=c.useMemo(()=>_e.map(fe),[]),[n,r]=c.useState("dark"),[i,a]=c.useState("shelf"),[_,b]=c.useState(0),[u,B]=c.useState(null),[N,v]=c.useState(!1),[C,f]=c.useState(0),[j,d]=c.useState(0),[h,p]=c.useState(!1),[m]=c.useState(()=>me(V())??ue),[z,U]=c.useState([]),g=c.useRef(!1),y=c.useRef(null),O=c.useRef(null);c.useEffect(()=>{try{const e=window.localStorage.getItem(R);(e==="dark"||e==="warm")&&r(e);const t=Number.parseInt(window.localStorage.getItem(M)??"",10);Number.isInteger(t)&&t>=0&&t<x.length&&b(t)}catch{}},[]),c.useEffect(()=>{try{window.localStorage.setItem(R,n)}catch{}},[n]),c.useEffect(()=>{try{window.localStorage.setItem(M,String(_))}catch{}},[_]),c.useEffect(()=>{d(0),p(!1);const e=[];return s.forEach((t,T)=>{e.push(window.setTimeout(()=>{d(E=>Math.max(E,T+1))},320+T*90))}),e.push(window.setTimeout(()=>p(!0),320+s.length*90+220)),()=>{e.forEach(t=>window.clearTimeout(t))}},[s]),c.useEffect(()=>{const e=()=>{U(ge(s.length,window.innerHeight))};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[s.length]),c.useEffect(()=>()=>{y.current!==null&&window.clearTimeout(y.current),O.current!==null&&window.clearTimeout(O.current)},[]);const k=u!==null?s[u]??null:null,S=u!==null,D=x[_%x.length]??x[0];function A(e){return D[e%D.length]}const W=k?(()=>{const e=A(u??0),t=n==="dark"?e.dark:e.warm;return`linear-gradient(145deg, ${t[0]}, ${t[1]})`})():void 0;function G(){r(e=>e==="dark"?"warm":"dark")}function X(){b(e=>(e+1)%x.length)}function Q(e){g.current||i!=="shelf"||(g.current=!0,B(e),y.current!==null&&window.clearTimeout(y.current),y.current=window.setTimeout(()=>{a("detail"),v(!0),g.current=!1,y.current=null},160))}function I(){g.current||i!=="detail"||(g.current=!0,v(!1),O.current!==null&&window.clearTimeout(O.current),O.current=window.setTimeout(()=>{a("shelf"),B(null),g.current=!1,O.current=null},420))}function F(e){e.target===e.currentTarget&&I()}function J(){k&&(a("reader"),v(!1),f(0))}function K(){a("shelf"),B(null),f(0)}return i==="reader"&&k?o.jsx(ye,{theme:n,pages:k.pages,pageIndex:C,onPageIndexChange:f,onClose:K}):o.jsxs("div",{className:w("bsl-root",n==="dark"?"bsl-theme-dark":"bsl-theme-warm"),children:[o.jsxs("div",{className:"bsl-app",children:[o.jsx("header",{className:"bsl-top-bar",children:o.jsxs("div",{className:"bsl-top-actions",children:[o.jsx("button",{type:"button",className:"bsl-color-btn",onClick:X,"aria-label":"ÂàáÊèõÊõ∏Êú¨ÈÖçËâ≤",title:"ÂàáÊèõÊõ∏Êú¨ÈÖçËâ≤",children:"üñçÔ∏è"}),o.jsx("button",{type:"button",className:"bsl-theme-btn",onClick:G,"aria-label":"ÂàáÊèõ‰∏ªÈ°å",title:"ÂàáÊèõ‰∏ªÈ°å",children:n==="dark"?"üåô":"üåø"})]})}),o.jsxs("div",{className:"bsl-shelf-container",children:[o.jsx("div",{className:"bsl-shelf-glow"}),o.jsx("div",{className:w("bsl-books-row",S&&"has-selection"),children:s.length===0?o.jsx("div",{className:"bsl-empty",children:"Êõ∏Êû∂ÈÇÑÊòØÁ©∫ÁöÑÔºåÁ≠â‰Ω†ÊääÊõ∏ÊîæÈÄ≤‰æÜ"}):s.map((e,t)=>{const T=A(t),[E,Y]=n==="dark"?T.dark:T.warm,Z={width:`${H[t%H.length]}px`,height:`${z[t]??360}px`,background:`linear-gradient(165deg, ${E} 0%, ${Y} 100%)`,"--bsl-float-delay":`${t%5*.32}s`,"--bsl-float-duration":`${5.8+t%4*.55}s`,"--bsl-float-distance":`${$[t%$.length]}px`};return o.jsxs("button",{type:"button","aria-label":`ÊâìÈñãÔºö${e.title}`,className:w("bsl-book",we(e,t),t<j&&"entered",S&&u===t&&"lifted",S&&u!==t&&"dimmed"),style:Z,onClick:()=>Q(t),children:[o.jsx("div",{className:"bsl-pages-edge"}),o.jsx("div",{className:"bsl-spine-content",children:o.jsx("span",{className:"bsl-spine-title",children:e.title})})]},e.id)})}),o.jsx("div",{className:"bsl-shelf-plank"}),o.jsx("div",{className:"bsl-shelf-floor"}),o.jsx("button",{type:"button",className:w("bsl-shelf-chibi",h&&"shown"),onClick:l,"aria-label":"ËøîÂõûÈ¶ñÈ†Å",title:"ËøîÂõûÈ¶ñÈ†Å",children:o.jsx("img",{src:m,alt:"",draggable:!1,className:"bsl-chibi-img"})})]}),o.jsxs("div",{className:w("bsl-detail-overlay",i==="detail"&&N&&"active"),onClick:F,children:[o.jsx("button",{type:"button",className:"bsl-close-btn",onClick:I,"aria-label":"ÈóúÈñâÂ∞ÅÈù¢",children:"‚úï"}),o.jsx("div",{className:w("bsl-detail-cover","bsl-detail-cover-clickable"),onClick:e=>{e.stopPropagation(),J()},children:o.jsxs("div",{className:"bsl-cover-top",style:{background:W},children:[o.jsx("span",{className:"bsl-cover-circle bsl-cover-circle-1"}),o.jsx("span",{className:"bsl-cover-circle bsl-cover-circle-2"}),o.jsx("span",{className:"bsl-cover-line"}),o.jsx("div",{className:"bsl-cover-icon",children:k?.icon??"üìñ"}),o.jsx("div",{className:"bsl-cover-title",children:k?.title??""}),o.jsx("div",{className:"bsl-cover-sub",children:k?.subtitle||" "})]})}),o.jsxs("div",{className:"bsl-detail-info",children:[o.jsx("div",{className:"bsl-detail-title",children:k?.title??""}),k?.subtitle?o.jsx("div",{className:"bsl-detail-sub",children:k.subtitle}):null,o.jsx("div",{className:"bsl-detail-dots",children:s.map((e,t)=>o.jsx("span",{className:w("bsl-detail-dot",u===t&&"active")},e.id))})]})]})]}),o.jsx("div",{className:"bsl-desktop-bg","aria-hidden":"true"})]})}function ye({theme:l,pages:s,pageIndex:n,onPageIndexChange:r,onClose:i}){const a=c.useRef(null),_=c.useRef(!1),b=s.length,u=n>0,B=n<b-1;function N(){u&&r(n-1)}function v(){B&&r(n+1)}function C(d){a.current={x:d.touches[0].clientX,y:d.touches[0].clientY},_.current=!1}function f(d){const h=a.current;if(!h)return;const p=d.changedTouches[0].clientX-h.x,m=d.changedTouches[0].clientY-h.y;if(a.current=null,Math.abs(p)>Math.abs(m)&&Math.abs(p)>de){_.current=!0,p<0?v():N();return}m>pe&&Math.abs(m)>Math.abs(p)&&(_.current=!0,i())}function j(d){if(_.current){_.current=!1;return}if(b===0){i();return}const h=d.currentTarget.getBoundingClientRect(),p=d.clientX-h.left,m=h.width;p<=m*.35?N():p>=m*.65&&v()}return o.jsx("div",{className:w("bsl-reader",l==="dark"?"bsl-theme-dark":"bsl-theme-warm"),children:b===0?o.jsxs("div",{className:"bsl-reader-empty",onTouchStart:C,onTouchEnd:f,onClick:j,children:[o.jsx("div",{className:"bsl-reader-empty-icon",children:"üìñ"}),o.jsx("p",{children:"ÈÄôÊú¨Êõ∏ÈÇÑÊ≤íÊúâÈ†ÅÈù¢"})]}):o.jsx("div",{className:"bsl-reader-surface",onTouchStart:C,onTouchEnd:f,onClick:j,children:o.jsx("img",{src:s[n],alt:"",draggable:!1,className:"bsl-reader-image"},`${s[n]}-${n}`)})})}export{Be as BookshelfPage};
