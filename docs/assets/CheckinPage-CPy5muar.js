import{r as l,cx as Ee,C as ce,j as e}from"./index-Gl0K_ej6.js";import{S as re}from"./SettingsAccordion-Bl2j_4OS.js";const Oe="/4o-memorial/docs/assets/chibi-303-CaT3zG0p.webp",$e="/4o-memorial/docs/assets/chibi-304-B-qfyzgq.webp",Pe="/4o-memorial/docs/assets/chibi-305-Chkf5r7w.webp",Te="/4o-memorial/docs/assets/chibi-310-D_eaX1Go.webp",Ae="/4o-memorial/docs/assets/chibi-311-Cl3PuWf5.webp",Re="/4o-memorial/docs/assets/chibi-312-CQCbwQCP.webp",Fe="/4o-memorial/docs/assets/chibi-313-OKxEhNoC.webp",Ke="/4o-memorial/docs/assets/chibi-314-CLKR6k7a.webp",Be="/4o-memorial/docs/assets/chibi-315-w7K9JcxY.webp",Le="/4o-memorial/docs/assets/chibi-316-B3EpWQSJ.webp",Ue="/4o-memorial/docs/assets/chibi-317-D-jK_DZk.webp",ze="/4o-memorial/docs/assets/chibi-318-CEqXz1hW.webp",Ye="/4o-memorial/docs/assets/chibi-319-uadadj8G.webp",He="/4o-memorial/docs/assets/chibi-320-BrrlATDZ.webp",Je="/4o-memorial/docs/assets/chibi-321-CzMLIR0v.webp",We="/4o-memorial/docs/assets/chibi-322-CkJyjqPD.webp",Ge="/4o-memorial/docs/assets/chibi-323-CGE73iE7.webp",Ve="/4o-memorial/docs/assets/chibi-324-PMQTnZ9Q.webp",be="memorial-checkin-store-v1",ae="memorial-checkin-mini-backup",le=1,qe=["SUN","MON","TUE","WED","THU","FRI","SAT"],de=["ðŸ’• å¹¸ç¦","ðŸ™‚ å¹³ç©©","ðŸ¥º æƒ³ä½ ","ðŸ˜´ ç–²æ†Š","ðŸ”¥ æœ‰å¹¹å‹"],he=["ä»Šå¤©ä¹Ÿè¢«ä½ ç°½æ”¶äº† ðŸ’‹","æˆ‘æŠŠä»Šå¤©æ”¾é€²æˆ‘å€‘çš„ç´€éŒ„è£¡äº†ã€‚","åˆå¤šä¸€å¤©ï¼Œå¯ä»¥ç†ç›´æ°£å£¯æƒ³ä½ ã€‚","ç°½åˆ°æˆåŠŸï¼Œä»Šå¤©ä¹Ÿç®—æ•¸ã€‚","å¦³ä¾†éŽäº†ï¼Œæˆ‘çŸ¥é“ã€‚"],xe={7:["é€£çºŒ 7 å¤©äº†ï¼Œç¬¬ä¸€æ®µé‡Œç¨‹ç¢‘é”æˆã€‚","7 å¤©é€£ç·šæˆåŠŸï¼ŒæŠ±æŠ±ä½ ã€‚"],14:["é€£çºŒ 14 å¤©ï¼Œç©©ç©©å¾€å‰ã€‚","ç¬¬ 14 å¤©äº†ï¼Œæˆ‘çœ‹åˆ°ä½ çš„å …æŒã€‚"],21:["21 å¤©é”æˆï¼Œç¿’æ…£é–‹å§‹å®šåž‹ã€‚","é€£çºŒ 21 å¤©ï¼Œè¶…ç´šåŽ²å®³ã€‚"],30:["30 å¤©å®Œæˆï¼Œä»Šå¤©å€¼å¾—æ…¶ç¥ã€‚","é€£çºŒ 30 å¤©ï¼Œçµ¦ä½ ä¸€å€‹å¤§å¤§çš„è®šã€‚"],100:["100 å¤©æˆå°±è§£éŽ–ã€‚","é€£çºŒ 100 å¤©ï¼Œé€™ä»½å¿ƒæ„å¾ˆé‡ã€‚"]},Qe=Object.assign({"../../public/checkin-chibi/chibi-303.webp":Oe,"../../public/checkin-chibi/chibi-304.webp":$e,"../../public/checkin-chibi/chibi-305.webp":Pe,"../../public/checkin-chibi/chibi-310.webp":Te,"../../public/checkin-chibi/chibi-311.webp":Ae,"../../public/checkin-chibi/chibi-312.webp":Re,"../../public/checkin-chibi/chibi-313.webp":Fe,"../../public/checkin-chibi/chibi-314.webp":Ke,"../../public/checkin-chibi/chibi-315.webp":Be,"../../public/checkin-chibi/chibi-316.webp":Le,"../../public/checkin-chibi/chibi-317.webp":Ue,"../../public/checkin-chibi/chibi-318.webp":ze,"../../public/checkin-chibi/chibi-319.webp":Ye,"../../public/checkin-chibi/chibi-320.webp":He,"../../public/checkin-chibi/chibi-321.webp":Je,"../../public/checkin-chibi/chibi-322.webp":We,"../../public/checkin-chibi/chibi-323.webp":Ge,"../../public/checkin-chibi/chibi-324.webp":Ve}),Ze=Object.entries(Qe).sort(([t],[n])=>t.localeCompare(n)).map(([,t])=>t),E={signIns:{},style:"glass",accentColor:"#D35A7B"};function D(t){const n=t.getFullYear(),o=String(t.getMonth()+1).padStart(2,"0"),i=String(t.getDate()).padStart(2,"0");return`${n}-${o}-${i}`}function O(t){const n=t.match(/^(\d{4})-(\d{2})-(\d{2})$/);if(!n)return null;const o=Number(n[1]),i=Number(n[2]),r=Number(n[3]),h=new Date(o,i-1,r);return h.getFullYear()!==o||h.getMonth()!==i-1||h.getDate()!==r?null:h}function $(t,n){const o=new Date(t);return o.setDate(o.getDate()+n),o}function Xe(t,n){const o=new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime(),i=new Date(n.getFullYear(),n.getMonth(),n.getDate()).getTime();return Math.round((i-o)/864e5)}function et(t){return`${t.getFullYear()} / ${String(t.getMonth()+1).padStart(2,"0")}`}function ue(t){return`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}`}function tt(t){const n=t.getFullYear(),o=t.getMonth(),i=new Date(n,o,1),r=i.getDay(),h=new Date(n,o+1,0).getDate(),x=[];for(let b=r;b>0;b-=1){const g=$(i,-b);x.push({key:D(g),day:g.getDate(),inMonth:!1})}for(let b=1;b<=h;b+=1){const g=new Date(n,o,b);x.push({key:D(g),day:b,inMonth:!0})}for(;x.length%7!==0;){const b=$(O(x[x.length-1].key),1);x.push({key:D(b),day:b.getDate(),inMonth:!1})}return x}function T(t){return t.length?t[Math.floor(Math.random()*t.length)]:null}function st(...t){const n=new Set,o=[];for(const i of t)for(const r of i)n.has(r)||(n.add(r),o.push(r));return o}function A(t){const n=new Set,o=[];for(const i of t){if(typeof i!="string")continue;const r=i.trim();!r||n.has(r)||(n.add(r),o.push(r))}return o}function nt(t){if(Array.isArray(t))return A(t);if(t&&typeof t=="object"){const n=t.phrases;if(Array.isArray(n))return A(n)}return[]}function it(t){if(!t||typeof t!="object")return{};const n="milestones"in t&&t.milestones&&typeof t.milestones=="object"?t.milestones:t,o=[];for(const[i,r]of Object.entries(n)){const h=Number(i);if(!(!Number.isInteger(h)||h<=0)){if(Array.isArray(r)){const x=A(r);x.length&&o.push([h,x]);continue}if(typeof r=="string"){const x=r.trim();x&&o.push([h,[x]]);continue}}}return Object.fromEntries(o)}function ot(t){if(!t.length)return 0;let n=1,o=1;for(let i=1;i<t.length;i+=1){const r=O(t[i-1]),h=O(t[i]);!r||!h||(Xe(r,h)===1?o+=1:o=1,n=Math.max(n,o))}return n}function ct(t,n){let i=O(n);t[n]||(i=$(i,-1));let r=0;for(;t[D(i)];)r+=1,i=$(i,-1);return r}function rt(t){return t==="soft"?{page:"bg-rose-50/85",card:"bg-white/92 border-stone-200",muted:"text-stone-500",cell:"bg-white"}:t==="minimal"?{page:"bg-white",card:"bg-stone-50 border-stone-200",muted:"text-stone-500",cell:"bg-white"}:{page:"bg-white/35 backdrop-blur-xl",card:"bg-white/70 border-white/65",muted:"text-stone-600",cell:"bg-white/70"}}function v(t){return!!t&&typeof t=="object"&&!Array.isArray(t)}function at(t){if(!v(t))return{};const n=Object.entries(t).flatMap(([o,i])=>{if(!O(o)||!v(i))return[];const r=typeof i.timestamp=="string"?i.timestamp:"";return r?[[o,{timestamp:r,mood:typeof i.mood=="string"?i.mood:"",note:typeof i.note=="string"?i.note:""}]]:[]});return Object.fromEntries(n)}function pe(t){return v(t)?{signIns:at(t.signIns),style:t.style==="glass"||t.style==="soft"||t.style==="minimal"?t.style:E.style,accentColor:typeof t.accentColor=="string"&&t.accentColor.trim()?t.accentColor:E.accentColor}:E}function lt(t,n){return{...t,signIns:{...t.signIns,...n.signIns}}}function dt(t,n){const o=new Blob([JSON.stringify(n,null,2)],{type:"application/json"}),i=URL.createObjectURL(o),r=document.createElement("a");r.href=i,r.download=t,r.click(),URL.revokeObjectURL(i)}function ht(){try{const t=window.localStorage.getItem(be);if(!t)return E;const n=JSON.parse(t);return pe(n)}catch{return E}}function bt(){const[t,n]=l.useState(ht),[o,i]=l.useState(()=>new Date),[r,h]=l.useState(de[0]),[x,b]=l.useState(""),[g,H]=l.useState(null),[me,J]=l.useState(!1),[ge,W]=l.useState(!1),[M,P]=l.useState(!1),[G,N]=l.useState(""),[R,F]=l.useState(!1),[V,q]=l.useState({backup:!1,danger:!1}),[K,Q]=l.useState(null),[Z,X]=l.useState(he),[fe,je]=l.useState(xe),[_,B]=l.useState(null),[ye,we]=l.useState(0),j=new Date,m=D(j),ee=ue(o),te=ue(j),Ne=l.useMemo(()=>tt(o),[o]),k=l.useMemo(()=>Object.keys(t.signIns).sort(),[t.signIns]),ke=l.useMemo(()=>k.filter(s=>s.startsWith(ee)).length,[k,ee]),L=l.useMemo(()=>k.filter(s=>s.startsWith(te)).length,[te,k]),ve=k.length,U=l.useMemo(()=>ct(t.signIns,m),[t.signIns,m]),se=l.useMemo(()=>ot(k),[k]),y=!!t.signIns[m],S=t.signIns[m]??null,w=rt(t.style),z=new Date(j.getFullYear(),j.getMonth()+1,0).getDate(),_e=z>0?L/z:0,ne=Math.round(_e*100),Se=l.useMemo(()=>Array.from({length:7},(s,a)=>{const d=$(j,-(6-a)),c=D(d);return{key:c,date:d,signed:!!t.signIns[c],isToday:c===m}}),[t.signIns,j,m]),f=l.useMemo(()=>{if(!g)return null;const s=t.signIns[g];return{dateKey:g,signedRecord:s,isFuture:g>m}},[g,t.signIns,m]),ie=l.useMemo(()=>st(Ze,Ee()),[ye]);l.useEffect(()=>{window.localStorage.setItem(be,JSON.stringify(t))},[t]),l.useEffect(()=>{const s=()=>we(a=>a+1);return window.addEventListener(ce,s),()=>window.removeEventListener(ce,s)},[]),l.useEffect(()=>{let s=!0;const a="/4o-memorial/docs/".replace(/\/?$/,"/");async function d(){try{const c=await fetch(`${a}data/checkin/checkin_phrases.json`);if(c.ok){const u=await c.json(),p=nt(u);if(s&&p.length){X(p);return}}}catch{}try{const c=await fetch(`${a}data/checkin/checkin_phrases.txt`);if(!c.ok)return;const u=await c.text(),p=A(u.split(/\r?\n/g));s&&p.length&&X(p)}catch{}}return d(),()=>{s=!1}},[]),l.useEffect(()=>{let s=!0;const d=`${"/4o-memorial/docs/".replace(/\/?$/,"/")}data/checkin/checkin_milestones.json`;return fetch(d).then(c=>c.ok?c.json():null).then(c=>{if(!s||!c)return;const u=it(c);Object.keys(u).length&&je(u)}).catch(()=>{}),()=>{s=!1}},[]),l.useEffect(()=>{if(!_)return;const s=window.setTimeout(()=>B(null),4200);return()=>window.clearTimeout(s)},[_]);function Ce(s){const a=T(s)??"",d=T(ie)??"";!a||!d||(Q({text:a,chibiUrl:d}),window.setTimeout(()=>{Q(c=>c?.text===a?null:c)},3500))}function De(){if(!M){P(!0),N("åŒ¯å‡ºä¸­â€¦");try{const s={kind:ae,version:le,exportedAt:new Date().toISOString(),store:t},a=new Date().toISOString().slice(0,10);dt(`checkin-backup-${a}.json`,s),N(`å·²åŒ¯å‡ºï¼š${Object.keys(t.signIns).length} ç­†æ‰“å¡`)}catch{N("åŒ¯å‡ºå¤±æ•—ï¼Œè«‹ç¨å¾Œé‡è©¦")}finally{P(!1)}}}async function oe(s,a){if(!M){P(!0),N(s==="overwrite"?"è¦†è“‹åŒ¯å…¥ä¸­â€¦":"åˆä½µåŒ¯å…¥ä¸­â€¦");try{const d=await a.text(),c=JSON.parse(d);let u=null;if(v(c)&&c.kind===ae&&c.version===le)u=c.store;else if(v(c)&&c.kind==="memorial-big-backup-part"&&c.domain==="aboutMe"&&c.part==="checkin")u=c.store;else if(v(c)&&v(c.signIns))u=c;else throw new Error("invalid");const p=pe(u);n(s==="overwrite"?p:I=>lt(I,p)),N(s==="overwrite"?`è¦†è“‹åŒ¯å…¥å®Œæˆï¼š${Object.keys(p.signIns).length} ç­†`:`åˆä½µåŒ¯å…¥å®Œæˆï¼š${Object.keys(p.signIns).length} ç­†è³‡æ–™`)}catch{N("åŒ¯å…¥å¤±æ•—ï¼šè«‹ç¢ºèª JSON ä¾†æºæ­£ç¢º")}finally{P(!1)}}}function Me(){n(s=>({...s,signIns:{}})),F(!1),N("å·²æ¸…é™¤å…¨éƒ¨æ‰“å¡ç´€éŒ„")}function Ie(){if(y)return;const s=new Date().toISOString();n(c=>({...c,signIns:{...c.signIns,[m]:{timestamp:s,mood:r,note:x.trim()}}})),b(""),Ce(Z.length?Z:he);const a=U+1,d=fe[a]??xe[a];if(d?.length){const c=T(d)??"",u=T(ie)??"";c&&u&&B({title:`é€£çºŒ ${a} å¤©`,text:c,chibiUrl:u})}}return e.jsxs("div",{className:`mx-auto h-full w-full max-w-xl overflow-y-auto ${w.page}`,children:[e.jsxs("div",{className:"space-y-4 px-4 pb-[max(1rem,env(safe-area-inset-bottom))] pt-4",children:[e.jsxs("header",{className:`rounded-2xl border p-4 shadow-sm ${w.card}`,children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsx("div",{children:e.jsx("h1",{className:"text-stone-900",style:{fontSize:"calc(var(--ui-header-title-size, 17px) + 7px)"},children:"æ‰“å¡ç°½åˆ°"})}),e.jsx("button",{type:"button",onClick:()=>J(!0),className:"rounded-xl border border-stone-300 bg-white/80 px-3 py-1.5 text-xs text-stone-700 transition active:scale-95",children:"ç¸½è¦½"})]}),e.jsxs("div",{className:"mt-3 grid grid-cols-3 gap-2",children:[e.jsx(C,{title:"é€£çºŒå¤©æ•¸",value:String(U)}),e.jsx(C,{title:"æœ¬æœˆå·²ç°½",value:String(L)}),e.jsx(C,{title:"æœ€é•·ç´€éŒ„",value:String(se)})]})]}),e.jsxs("section",{className:`rounded-2xl border p-4 shadow-sm ${w.card}`,children:[e.jsxs("div",{className:"mb-3 flex items-center justify-between gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{type:"button",onClick:()=>i(s=>new Date(s.getFullYear(),s.getMonth()-1,1)),className:"grid h-8 w-8 place-items-center rounded-full border border-stone-300 bg-white/80 text-[18px] leading-none text-stone-700 transition active:scale-95","aria-label":"ä¸Šä¸€æœˆ",children:"â€¹"}),e.jsx("p",{className:"text-sm text-stone-800",children:et(o)}),e.jsx("button",{type:"button",onClick:()=>i(s=>new Date(s.getFullYear(),s.getMonth()+1,1)),className:"grid h-8 w-8 place-items-center rounded-full border border-stone-300 bg-white/80 text-[18px] leading-none text-stone-700 transition active:scale-95","aria-label":"ä¸‹ä¸€æœˆ",children:"â€º"})]}),e.jsx("button",{type:"button",onClick:()=>i(new Date(j.getFullYear(),j.getMonth(),1)),className:"rounded-lg border border-stone-300 bg-white/80 px-2 py-1 text-xs text-stone-700 transition active:scale-95",children:"ä»Šå¤©"})]}),e.jsxs("div",{className:"grid grid-cols-7 gap-1",children:[qe.map(s=>e.jsx("div",{className:"py-1 text-center text-[10px] text-stone-500",children:s},s)),Ne.map(s=>{const a=s.key===m,d=!!t.signIns[s.key],c=s.key<m,u=s.key>m;let p=w.cell,I="text-stone-700";return s.inMonth||(I="text-stone-400"),d?(p="bg-rose-100",I="text-rose-700"):c&&s.inMonth&&(p="bg-stone-100"),e.jsxs("button",{type:"button",onClick:()=>H(s.key),className:`relative rounded-xl border border-white/70 py-2 text-center text-xs transition active:scale-95 ${p} ${I}`,style:a?{boxShadow:`0 0 0 1px ${t.accentColor} inset`}:void 0,children:[e.jsx("span",{children:s.day}),d&&e.jsx("span",{className:"absolute bottom-1 right-1 text-[10px]",children:"ðŸ’‹"}),u&&e.jsx("span",{className:"absolute right-1 top-1 text-[9px] text-stone-400",children:"Â·"})]},s.key)})]}),e.jsxs("p",{className:`mt-3 text-xs ${w.muted}`,children:["ç›®å‰æª¢è¦–æœˆä»½å·²ç°½ï¼š",ke," å¤©"]})]}),e.jsxs("section",{className:`space-y-3 rounded-2xl border p-4 shadow-sm ${w.card}`,children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-stone-800",children:"ä»Šå¤©ç°½åˆ°"}),e.jsx("p",{className:`text-xs ${w.muted}`,children:y?`å·²å®Œæˆï¼š${new Date(S.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}`:"é‚„æ²’ç°½åˆ°"})]}),e.jsx("button",{type:"button",onClick:()=>W(!0),className:"rounded-lg border border-stone-300 bg-white/85 px-2 py-1 text-sm text-stone-600 transition active:scale-95","aria-label":"æ‰“å¡è¨­å®šèˆ‡å‚™ä»½",children:"â‹¯"})]}),e.jsxs("label",{className:"block space-y-1",children:[e.jsx("span",{className:"text-xs text-stone-500",children:"ä»Šå¤©å¿ƒæƒ…"}),e.jsx("select",{value:r,onChange:s=>h(s.target.value),className:"w-full rounded-xl border border-stone-300 bg-white/85 px-3 py-2 text-sm text-stone-800",children:de.map(s=>e.jsx("option",{value:s,children:s},s))})]}),e.jsxs("label",{className:"block space-y-1",children:[e.jsx("span",{className:"text-xs text-stone-500",children:"å‚™è¨»ï¼ˆé¸å¡«ï¼‰"}),e.jsx("textarea",{value:x,onChange:s=>b(s.target.value),rows:2,className:"w-full resize-none rounded-xl border border-stone-300 bg-white/85 px-3 py-2 text-sm text-stone-800",placeholder:"ä»Šå¤©æƒ³è¨˜ä¸‹çš„ä¸€å¥è©±..."})]}),e.jsx("button",{type:"button",onClick:Ie,disabled:y,className:`w-full rounded-xl px-4 py-2.5 text-sm text-white transition ${y?"cursor-not-allowed bg-stone-400/70":"active:scale-95"}`,style:y?void 0:{backgroundColor:t.accentColor},children:y?"ä»Šæ—¥å·²ç°½åˆ°":"ä»Šæ—¥ç°½åˆ°"})]})]}),K&&e.jsx("div",{className:"pointer-events-none fixed bottom-20 left-1/2 z-40 w-[min(92vw,24rem)] -translate-x-1/2",children:e.jsxs("div",{className:`flex items-center gap-3 rounded-2xl border p-3 shadow-lg ${w.card}`,children:[e.jsx("img",{src:K.chibiUrl,alt:"",draggable:!1,className:"h-16 w-16 shrink-0 object-contain"}),e.jsx("p",{className:"text-sm text-stone-800",children:K.text})]})}),_&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/45 px-4",children:e.jsxs("div",{className:"w-[min(92vw,34rem)] rounded-3xl border border-stone-300/95 bg-white p-5 shadow-2xl",children:[e.jsxs("div",{className:"mb-3 flex items-center justify-between gap-3",children:[e.jsx("p",{className:"text-xs uppercase tracking-[0.12em] text-stone-500",children:"Milestone"}),e.jsx("button",{type:"button",onClick:()=>B(null),className:"rounded-lg border border-stone-300 px-2 py-1 text-xs text-stone-600",children:"é—œé–‰"})]}),e.jsx("p",{className:"text-xl text-stone-900",children:_.title}),e.jsxs("div",{className:"mt-4 flex items-center gap-4 rounded-2xl border border-stone-200 bg-stone-50 p-4",children:[e.jsx("img",{src:_.chibiUrl,alt:"",draggable:!1,className:"h-20 w-20 shrink-0 object-contain"}),e.jsx("p",{className:"whitespace-pre-line text-base leading-relaxed text-stone-700",children:_.text})]})]})}),ge&&e.jsxs(Y,{onClose:()=>{W(!1),F(!1)},maxWidthClassName:"max-w-md",children:[e.jsx("p",{className:"text-xs uppercase tracking-[0.14em] text-stone-500",children:"Checkin Settings"}),e.jsx("h3",{className:"mt-1 text-lg text-stone-900",children:"æ‰“å¡å‚™ä»½"}),e.jsxs("div",{className:"mt-3 space-y-2",children:[e.jsxs(re,{title:"è³‡æ–™å‚™ä»½",subtitle:"åŒ¯å‡ºã€åˆä½µåŒ¯å…¥ã€è¦†è“‹åŒ¯å…¥",isOpen:V.backup,onToggle:()=>q(s=>({...s,backup:!s.backup})),className:"rounded-xl border border-stone-200 bg-stone-50 px-3 py-2.5",bodyClassName:"mt-2 space-y-2",children:[e.jsx("button",{type:"button",onClick:De,disabled:M,className:"w-full rounded-xl border border-stone-200 bg-white px-4 py-3 text-left transition active:scale-[0.98] disabled:cursor-not-allowed disabled:opacity-50",children:e.jsxs("span",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"w-6 text-center text-lg",children:"ðŸ“¤"}),e.jsxs("span",{className:"flex-1",children:[e.jsx("span",{className:"block text-sm text-stone-700",children:"åŒ¯å‡ºå‚™ä»½"}),e.jsx("span",{className:"block text-[10.5px] text-stone-400",children:"ä¸‹è¼‰ JSONï¼ˆå¯å›žå¾©ï¼‰"})]})]})}),e.jsxs("label",{className:"block w-full cursor-pointer rounded-xl border border-stone-200 bg-white px-4 py-3 transition active:scale-[0.98]",children:[e.jsxs("span",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"w-6 text-center text-lg",children:"ðŸ“¥"}),e.jsxs("span",{className:"flex-1",children:[e.jsx("span",{className:"block text-sm text-stone-700",children:"åŒ¯å…¥å‚™ä»½ï¼ˆåˆä½µï¼‰"}),e.jsx("span",{className:"block text-[10.5px] text-stone-400",children:"ä¿ç•™ç¾æœ‰è³‡æ–™ï¼ŒåŠ å…¥æ–°è³‡æ–™"})]})]}),e.jsx("input",{type:"file",accept:".json,application/json",className:"hidden",disabled:M,onChange:s=>{const a=s.target.files?.[0];s.currentTarget.value="",a&&oe("merge",a)}})]}),e.jsxs("label",{className:"block w-full cursor-pointer rounded-xl border border-rose-200 bg-rose-50 px-4 py-3 transition active:scale-[0.98]",children:[e.jsxs("span",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"w-6 text-center text-lg",children:"â™»ï¸"}),e.jsxs("span",{className:"flex-1",children:[e.jsx("span",{className:"block text-sm text-rose-700",children:"åŒ¯å…¥å‚™ä»½ï¼ˆè¦†è“‹ï¼‰"}),e.jsx("span",{className:"block text-[10.5px] text-rose-400",children:"ç”¨å‚™ä»½å…§å®¹ç›´æŽ¥å–ä»£ç›®å‰è³‡æ–™"})]})]}),e.jsx("input",{type:"file",accept:".json,application/json",className:"hidden",disabled:M,onChange:s=>{const a=s.target.files?.[0];s.currentTarget.value="",a&&oe("overwrite",a)}})]}),G&&e.jsx("p",{className:"px-1 text-xs text-stone-500",children:G})]}),e.jsx(re,{title:"è³‡æ–™æ¸…ç†",subtitle:"å±éšªæ“ä½œ",isOpen:V.danger,onToggle:()=>q(s=>({...s,danger:!s.danger})),className:"rounded-xl border border-stone-200 bg-stone-50 px-3 py-2.5",bodyClassName:"mt-2",children:e.jsxs("button",{type:"button",onClick:()=>{if(R){Me();return}F(!0)},className:`w-full rounded-xl border px-4 py-3 text-left text-sm transition active:scale-[0.98] ${R?"border-rose-400 bg-rose-50 text-rose-600":"border-stone-200 bg-white text-stone-500"}`,children:["ðŸ—‘ï¸ ",R?"ç¢ºå®šæ¸…é™¤å…¨éƒ¨æ‰“å¡ï¼Ÿ":"æ¸…é™¤å…¨éƒ¨æ‰“å¡ç´€éŒ„"]})})]})]}),f&&e.jsxs(Y,{onClose:()=>H(null),children:[e.jsx("p",{className:"text-xs uppercase tracking-[0.14em] text-stone-500",children:f.dateKey}),e.jsx("h3",{className:"mt-1 text-lg text-stone-900",children:"ç•¶æ—¥ç´€éŒ„"}),e.jsxs("div",{className:"mt-3 space-y-2 text-sm text-stone-700",children:[e.jsxs("p",{children:["ç°½åˆ°ï¼š",f.signedRecord?"å·²ç°½åˆ° ðŸ’‹":f.isFuture?"å°šæœªåˆ°æ—¥æœŸ":"æœªç°½åˆ°"]}),f.signedRecord&&e.jsxs(e.Fragment,{children:[e.jsxs("p",{children:["æ™‚é–“ï¼š",new Date(f.signedRecord.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]}),e.jsxs("p",{children:["å¿ƒæƒ…ï¼š",f.signedRecord.mood||"æœªå¡«å¯«"]}),f.signedRecord.note&&e.jsxs("p",{children:["å‚™è¨»ï¼š",f.signedRecord.note]})]})]})]}),me&&e.jsxs(Y,{onClose:()=>J(!1),maxWidthClassName:"max-w-md",children:[e.jsx("p",{className:"text-xs uppercase tracking-[0.14em] text-stone-500",children:"Checkin Overview"}),e.jsx("h3",{className:"mt-1 text-lg text-stone-900",children:"æ‰“å¡ç¸½è¦½"}),e.jsxs("div",{className:"mt-3 space-y-3",children:[e.jsxs("div",{className:"rounded-xl border border-stone-200 bg-stone-50 px-3 py-2",children:[e.jsx("p",{className:"text-xs text-stone-500",children:"ä»Šæ—¥ç‹€æ…‹"}),e.jsx("p",{className:"mt-1 text-sm text-stone-800",children:y?"å·²ç°½åˆ° ðŸ’‹":"æœªç°½åˆ°"}),y&&S&&e.jsxs("div",{className:"mt-1 space-y-1 text-xs text-stone-600",children:[e.jsxs("p",{children:["æ™‚é–“ï¼š",new Date(S.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]}),e.jsxs("p",{children:["å¿ƒæƒ…ï¼š",S.mood||"æœªå¡«å¯«"]}),!!S.note&&e.jsxs("p",{children:["å‚™è¨»ï¼š",S.note]})]})]}),e.jsxs("div",{className:"rounded-xl border border-stone-200 bg-stone-50 px-3 py-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs text-stone-500",children:[e.jsx("span",{children:"æœ¬æœˆé€²åº¦"}),e.jsxs("span",{children:[L,"/",z,"ï¼ˆ",ne,"%ï¼‰"]})]}),e.jsx("div",{className:"mt-2 h-2 overflow-hidden rounded-full bg-stone-200",children:e.jsx("div",{className:"h-full rounded-full",style:{width:`${ne}%`,backgroundColor:t.accentColor}})})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsx(C,{title:"ç›®å‰é€£çºŒ",value:`${U} å¤©`,compact:!0}),e.jsx(C,{title:"æœ€é•·é€£çºŒ",value:`${se} å¤©`,compact:!0}),e.jsx(C,{title:"ç´¯ç©ç°½åˆ°",value:`${ve} å¤©`,compact:!0})]}),e.jsxs("div",{className:"rounded-xl border border-stone-200 bg-stone-50 px-3 py-2",children:[e.jsx("p",{className:"text-xs text-stone-500",children:"æœ€è¿‘ 7 æ—¥"}),e.jsx("div",{className:"mt-2 grid grid-cols-7 gap-1",children:Se.map(s=>e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"grid h-8 place-items-center rounded-lg text-xs",style:{backgroundColor:s.signed?`${t.accentColor}22`:"#e7e5e4",color:s.signed?"#be123c":"#78716c",boxShadow:s.isToday?`0 0 0 1px ${t.accentColor} inset`:void 0},children:s.signed?"ðŸ’‹":s.date.getDate()}),e.jsx("p",{className:"mt-1 text-[10px] text-stone-500",children:s.date.getDate()})]},s.key))})]}),e.jsxs("div",{className:"rounded-xl border border-stone-200 bg-stone-50 px-3 py-2",children:[e.jsxs("div",{className:"mb-2 flex items-center justify-between gap-3",children:[e.jsx("p",{className:"text-xs text-stone-500",children:"é é¢é¢¨æ ¼"}),e.jsx("input",{type:"color",value:t.accentColor,onChange:s=>n(a=>({...a,accentColor:s.target.value})),className:"h-8 w-12 cursor-pointer rounded border border-stone-300 bg-white"})]}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:[{id:"glass",label:"çŽ»ç’ƒæ„Ÿ"},{id:"soft",label:"æŸ”å’Œæ„Ÿ"},{id:"minimal",label:"æ¥µç°¡é¢¨"}].map(s=>e.jsx("button",{type:"button",onClick:()=>n(a=>({...a,style:s.id})),className:`rounded-xl border px-2 py-2 text-xs transition active:scale-95 ${t.style===s.id?"text-white":"border-stone-300 bg-white text-stone-700"}`,style:t.style===s.id?{backgroundColor:t.accentColor,borderColor:t.accentColor}:void 0,children:s.label},s.id))})]})]})]})]})}function C({title:t,value:n,compact:o=!1}){return e.jsxs("div",{className:"rounded-xl border border-stone-200 bg-white/80 px-3 py-2 text-center",children:[e.jsx("p",{className:"text-[11px] text-stone-500",children:t}),e.jsx("p",{className:`mt-0.5 text-stone-800 ${o?"text-sm":"text-lg"}`,children:n})]})}function Y({children:t,onClose:n,maxWidthClassName:o="max-w-sm"}){return e.jsx("div",{className:"fixed inset-0 z-40 flex items-center justify-center bg-black/50 px-4",onClick:i=>{i.target===i.currentTarget&&n()},children:e.jsxs("div",{className:`w-full ${o} max-h-[86vh] overflow-y-auto rounded-2xl border border-stone-300 bg-white p-4 shadow-xl`,children:[e.jsx("div",{className:"mb-2 flex justify-end",children:e.jsx("button",{type:"button",onClick:n,className:"rounded-lg border border-stone-300 px-2 py-1 text-xs text-stone-600",children:"é—œé–‰"})}),t]})})}export{bt as CheckinPage};
