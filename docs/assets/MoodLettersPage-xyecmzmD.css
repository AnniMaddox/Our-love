.mood-letters-page{position:relative;height:100%;width:100%;overflow:hidden;background:radial-gradient(circle at 20% 14%,rgba(92,105,168,.6) 0%,rgba(38,46,88,.34) 34%,transparent 62%),radial-gradient(circle at 76% 20%,rgba(72,90,160,.38) 0%,transparent 42%),linear-gradient(180deg,#2d3b7b,#1a2a68 52%,#0b163f);color:#f7f4ff}.ml-loading{background:transparent}.ml-stars-layer,.ml-shooting-layer{pointer-events:none;position:absolute;inset:0;overflow:hidden;z-index:0}.ml-star{position:absolute;border-radius:999px;background:#fffffff0;box-shadow:0 0 8px #ffffffc7;animation:ml-twinkle ease-in-out infinite}.ml-shooting{position:absolute;width:130px;height:1.4px;border-radius:999px;background:linear-gradient(90deg,#fff0,#fffffff0,#fff0);box-shadow:0 0 12px #ffffffa6;animation:ml-shoot linear infinite}@keyframes ml-twinkle{0%,to{opacity:.25;transform:scale(.86)}48%{opacity:1;transform:scale(1.22)}}@keyframes ml-shoot{0%{transform:translate(-16vw,-10vh) rotate(18deg);opacity:0}9%{opacity:1}58%{opacity:1}to{transform:translate(96vw,82vh) rotate(18deg);opacity:0}}.ml-content{position:relative;z-index:2;display:flex;height:100%;flex-direction:column;padding:max(1rem,env(safe-area-inset-top,0px)) .92rem max(1.05rem,env(safe-area-inset-bottom,0px))}.ml-topbar{flex-shrink:0;display:grid;grid-template-columns:1fr auto 1fr;align-items:center;gap:.4rem;padding-top:.18rem}.ml-nav-btn,.ml-icon-btn{border:1px solid rgba(255,255,255,.24);background:#ffffff14;color:#f4f0ffeb;transition:transform .16s ease,background .16s ease,border-color .16s ease}.ml-nav-btn{display:grid;height:2.2rem;width:2.2rem;place-items:center;border-radius:999px;font-size:1.35rem;line-height:1;justify-self:start}.ml-nav-btn:active,.ml-icon-btn:active{transform:scale(.94)}.ml-title{margin:0;text-align:center;color:#f6f2ff;letter-spacing:.04em;font-weight:700;font-family:var(--app-heading-family, "Noto Serif TC", serif);font-size:var(--ui-header-title-size, 1.95rem);line-height:1.2}.ml-top-actions{display:flex;align-items:center;justify-content:flex-end;gap:.35rem;justify-self:end}.ml-icon-btn{display:grid;height:2.05rem;min-width:2.05rem;place-items:center;border-radius:999px;padding:0 .55rem;font-size:1rem;line-height:1}.ml-moods{margin-top:.72rem;display:flex;gap:.42rem;overflow-x:auto;padding:0 .2rem .2rem;scrollbar-width:thin}.ml-moods::-webkit-scrollbar{height:0}.ml-mood-pill{flex-shrink:0;border:1px solid rgba(255,255,255,.4);background:#ffffff17;color:#f8f4ffeb;border-radius:999px;padding:.44rem .82rem;font-size:.72rem;letter-spacing:.04em;transition:transform .16s ease,background .16s ease,border-color .16s ease;white-space:nowrap}.ml-mood-pill.active{background:#ffffff47;border-color:#ffffffb8;color:#fff}.ml-mood-pill:active{transform:scale(.96)}.ml-status{margin-top:.26rem;min-height:1rem;text-align:center;font-size:.7rem;color:#fad6e4f2}.ml-jar-panel{position:relative;flex:1;min-height:0;display:flex;justify-content:center;align-items:flex-start;padding-top:2.55rem}.ml-jar-container{position:relative;width:min(80vw,322px);height:min(59vh,470px);margin-top:2.35rem}.ml-jar-lid{position:absolute;top:0;left:17%;width:66%;height:6%;border-radius:8px;background:linear-gradient(180deg,#e8bb86,#d8a671);box-shadow:0 6px 14px #10152d59;z-index:4}.ml-jar-neck{position:absolute;top:5.4%;left:20%;width:60%;height:10.2%;border-radius:15px 15px 0 0;border:4px solid rgba(248,251,255,.64);border-bottom:none;background:linear-gradient(180deg,#b8c9f073,#94a8dc47);-webkit-backdrop-filter:blur(2px);backdrop-filter:blur(2px)}.ml-jar{position:absolute;left:0;bottom:0;width:100%;height:85%;overflow:hidden;border-radius:52px 52px 72px 72px;border:4px solid rgba(245,250,255,.64);border-top:none;background:linear-gradient(160deg,#becdf45c,#899ad247 55%,#7b8dc44d);box-shadow:inset 0 0 0 1px #ffffff24,inset 0 16px 28px #ffffff2e,inset 0 -16px 28px #313f7038,0 14px 34px #0a0e1f52}.ml-jar:before{content:"";position:absolute;left:9%;top:12%;width:26%;height:58%;border-radius:999px;background:linear-gradient(180deg,#ffffff3d,#ffffff08);filter:blur(.4px)}.ml-jar:after{content:"";position:absolute;right:13%;top:18%;width:18%;height:48%;border-radius:999px;background:linear-gradient(180deg,#ffffff14,#fff0)}.ml-orb-zone{position:absolute;inset:0}.ml-orb{position:absolute;left:0;top:0;display:grid;place-items:center;border:0;background:transparent;cursor:pointer;touch-action:manipulation;transition:opacity .22s ease;z-index:5}.ml-orb.hidden{opacity:0;pointer-events:none}.ml-orb-core{width:100%;height:100%;border-radius:999px;background:radial-gradient(circle at 30% 24%,#ffffff70,#ffffff38 13%,#fff0 24%),rgb(var(--orb-rgb, 255, 205, 178));box-shadow:inset 0 0 0 1px #ffffff3d,0 5px 12px #10193a38;filter:saturate(1.1);transition:transform .16s ease}.ml-orb:disabled{animation-play-state:paused}.ml-orb:active .ml-orb-core{transform:scale(.92)}.ml-orb-zone.mode-bounce .ml-orb,.ml-orb-zone.mode-rise .ml-orb{animation:none}.ml-orb-zone.mode-pulse .ml-orb{animation:ml-orb-pulse-float var(--pulse-dur, 2.1s) ease-in-out var(--pulse-delay, 0s) infinite}.ml-orb-zone.mode-pulse .ml-orb-core{animation:ml-orb-core-breathe var(--pulse-dur, 2.1s) ease-in-out var(--pulse-delay, 0s) infinite}@keyframes ml-orb-pulse-float{0%{transform:translateZ(0)}to{transform:translate3d(0,-7px,0)}}@keyframes ml-orb-core-breathe{0%,to{transform:scale(1);filter:saturate(1.1)}50%{transform:scale(1.1);filter:saturate(1.25)}}.ml-chibi-btn{position:absolute;right:max(1rem,calc(env(safe-area-inset-right,0px) + 1rem));bottom:max(1rem,calc(env(safe-area-inset-bottom,0px) + 1rem));z-index:7;border:0;background:transparent;padding:0;transition:transform .16s ease}.ml-chibi-btn.pressing,.ml-chibi-btn:active{transform:scale(.92)}.ml-chibi-btn img{width:min(44vw,182px);height:auto;object-fit:contain;filter:drop-shadow(0 10px 20px rgba(0,0,0,.32))}.ml-overlay{position:absolute;inset:0;z-index:18;display:flex;align-items:center;justify-content:center;background:#0c102499;-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px);opacity:0;pointer-events:none;transition:opacity .34s ease;padding:.95rem}.ml-overlay.open{opacity:1;pointer-events:auto}.ml-paper{--ml-paper-bg: #fffdf5;--ml-paper-title: #5f4b37;--ml-paper-body: #514335;--ml-paper-accent: #8a6f52;--ml-pill-bg: rgba(132, 106, 84, .08);--ml-pill-border: rgba(132, 106, 84, .26);--ml-pill-text: #755d45;--ml-content-size: 15px;--ml-content-line: 2.02;--ml-letter-font: "Ma Shan Zheng", "STKaiti", serif;position:relative;width:min(88vw,530px);max-height:min(83vh,760px);display:flex;flex-direction:column;border-radius:16px;border:1px solid rgba(126,102,80,.26);background:var(--ml-paper-bg);box-shadow:0 24px 56px #00000042;transform:scale(.84) translateY(24px);transition:transform .34s ease}.ml-overlay.open .ml-paper{transform:scale(1) translateY(0)}.ml-paper-head{display:flex;align-items:center;gap:.45rem;padding:.85rem .95rem .25rem}.ml-pill{border-radius:999px;border:1px solid var(--ml-pill-border);background:var(--ml-pill-bg);color:var(--ml-pill-text);font-size:.68rem;letter-spacing:.04em;padding:.25rem .56rem}.ml-drawn-time{margin-left:auto;color:var(--ml-paper-accent);font-size:.66rem}.ml-paper-icon,.ml-close{--icon-offset: 0px;border:0;background:transparent;color:var(--ml-paper-accent);transform:translateY(var(--icon-offset));transition:transform .16s ease,color .16s ease}.ml-paper-icon{font-size:1rem;line-height:1;width:1.45rem;height:1.45rem;display:grid;place-items:center}.ml-close{font-size:1.42rem;line-height:1;width:1.45rem;height:1.45rem;display:grid;place-items:center}.ml-paper-icon:active,.ml-close:active{transform:translateY(var(--icon-offset)) scale(.9)}.ml-paper-favorite{--icon-offset: 2px;margin-left:auto}.ml-paper-list{--icon-offset: 1px}.ml-paper-aa{--icon-offset: 0px;width:auto;min-width:0;padding:0 .14rem;border:none;border-radius:0;background:transparent;box-shadow:none;font-size:.9rem;letter-spacing:.01em}.ml-paper-close{--icon-offset: -2px;font-size:1.5rem}.ml-font-panel{margin:.3rem 1rem .75rem;border:1px solid var(--ml-pill-border);background:#fff6;border-radius:10px;padding:.56rem .58rem}.ml-font-title{margin:0 0 .4rem;font-size:.67rem;letter-spacing:.05em;color:var(--ml-paper-accent)}.ml-font-row{display:flex;gap:.42rem;margin-bottom:.5rem}.ml-font-mode{border:1px solid var(--ml-pill-border);background:#ffffff80;color:var(--ml-pill-text);border-radius:999px;padding:.34rem .58rem;font-size:.72rem;line-height:1}.ml-font-mode.active{border-color:var(--ml-paper-accent);background:#ffffffbf;color:var(--ml-paper-title)}.ml-font-control+.ml-font-control{margin-top:.44rem}.ml-font-control-head{display:flex;align-items:center;justify-content:space-between;gap:.5rem}.ml-font-value{margin:0;font-size:.66rem;letter-spacing:.03em;color:var(--ml-paper-accent)}.ml-font-slider{width:100%;margin-top:.3rem;accent-color:var(--ml-paper-accent)}.ml-paper-title{padding:.22rem 1rem .85rem;border-bottom:1px dashed rgba(132,108,86,.38);font-size:1.06rem;line-height:1.45;letter-spacing:.04em;color:var(--ml-paper-title);font-family:var(--ml-letter-font)}.ml-paper-body{overflow-y:auto;padding:1rem 1rem 1.25rem;color:var(--ml-paper-body);white-space:pre-wrap;line-height:var(--ml-content-line);letter-spacing:.015em;font-size:var(--ml-content-size);font-family:var(--ml-letter-font)}.ml-paper-foot{position:relative;display:flex;align-items:center;justify-content:space-between;gap:.6rem;border-top:1px dashed rgba(132,108,86,.28);padding:.52rem .95rem 1.2rem}.ml-pool-hint{font-size:.68rem;color:var(--ml-paper-accent);flex-shrink:0}.ml-drawn-time-foot{margin-left:auto;font-size:.64rem;color:var(--ml-paper-accent);opacity:.88;white-space:nowrap}.ml-redraw-chibi{position:absolute;left:50%;bottom:-4rem;border:0;background:transparent;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:.24rem;color:var(--ml-paper-accent);font-size:.69rem;letter-spacing:.05em;transform:translate(-50%) translateY(0);transition:transform .16s ease,opacity .16s ease;animation:ml-redraw-float 2.8s ease-in-out infinite}.ml-redraw-chibi img{width:105px;height:105px;object-fit:contain;filter:drop-shadow(0 7px 12px rgba(0,0,0,.24))}.ml-redraw-chibi:disabled{opacity:.45}.ml-redraw-chibi:active{transform:translate(-50%) translateY(0) scale(.95)}@keyframes ml-redraw-float{0%,to{transform:translate(-50%) translateY(0)}50%{transform:translate(-50%) translateY(-8px)}}.ml-list-overlay,.ml-settings-overlay{position:absolute;inset:0;z-index:19;display:flex;justify-content:center;padding:max(.85rem,env(safe-area-inset-top,0px) + .35rem) .9rem max(.85rem,env(safe-area-inset-bottom,0px) + .35rem);background:#090d1e80;-webkit-backdrop-filter:blur(7px);backdrop-filter:blur(7px);opacity:0;pointer-events:none;transition:opacity .26s ease}.ml-list-overlay{align-items:center}.ml-settings-overlay{align-items:flex-end}.ml-list-overlay.open,.ml-settings-overlay.open{opacity:1;pointer-events:auto}.ml-list-sheet,.ml-settings-sheet{width:min(92vw,560px);border-radius:18px;border:1px solid rgba(255,255,255,.18);background:linear-gradient(180deg,#1f2b5ff2,#141e49f2);color:#f6f2ff;box-shadow:0 20px 46px #05091873;display:flex;flex-direction:column;transform:translateY(22px);transition:transform .25s ease}.ml-list-sheet{max-height:min(86vh,820px)}.ml-settings-sheet{max-height:min(79vh,820px)}.ml-settings-sheet{overflow-y:auto}.ml-settings-close{--icon-offset: -3px}.ml-list-overlay.open .ml-list-sheet,.ml-settings-overlay.open .ml-settings-sheet{transform:translateY(0)}.ml-list-head,.ml-settings-head{display:flex;align-items:center;justify-content:space-between;gap:.45rem;padding:.78rem .95rem .46rem}.ml-list-head h3,.ml-settings-head h3{margin:0;font-size:1rem;letter-spacing:.05em}.ml-list-head-main{min-width:0;display:flex;align-items:center;gap:.42rem}.ml-list-tabs-inline{display:flex;gap:.24rem}.ml-list-tabs-inline button{border-radius:999px;border:1px solid rgba(255,255,255,.24);background:#ffffff0f;color:#f5f0ffe0;font-size:.69rem;letter-spacing:.04em;padding:.34rem .62rem}.ml-list-tabs-inline button.active{border-color:#ffffff9e;background:#ffffff3d;color:#fff}.ml-list-moods{position:relative;z-index:2;flex-shrink:0;display:flex;align-items:center;gap:.36rem;min-height:2.56rem;overflow-x:auto;padding:0 .95rem .92rem;margin-bottom:.26rem;scrollbar-width:thin}.ml-list-moods::-webkit-scrollbar{height:0}.ml-list-moods button{flex-shrink:0;border-radius:999px;border:1px solid rgba(255,255,255,.22);background:#ffffff0d;color:#f5f0ffdb;font-size:.69rem;letter-spacing:.03em;padding:.34rem .62rem}.ml-list-moods button.active{border-color:#ffffff9e;background:#ffffff38;color:#fff}.ml-list-search-wrap{position:relative;z-index:2;flex-shrink:0;padding:0 .95rem .64rem}.ml-list-search{width:100%;border:1px solid rgba(255,255,255,.22);background:#ffffff12;color:#fff;border-radius:11px;font-size:.77rem;letter-spacing:.03em;padding:.5rem .64rem;outline:none}.ml-list-search::placeholder{color:#e3d9f9bf}.ml-list-search:focus{border-color:#ffffff85;background:#ffffff1f}.ml-list-body{position:relative;z-index:1;overflow-y:auto;flex:1;min-height:0;padding:1.04rem .95rem .95rem;display:grid;gap:.5rem}.ml-list-item{border:1px solid rgba(255,255,255,.2);background:#ffffff0f;border-radius:13px;padding:.58rem .66rem;display:flex;align-items:center;gap:.55rem;text-align:left;cursor:pointer;transition:transform .16s ease,border-color .16s ease,background .16s ease}.ml-list-item:hover,.ml-list-item:focus-visible{border-color:#ffffff75;background:#ffffff1f}.ml-list-item:active{transform:scale(.985)}.ml-list-item-main{min-width:0;flex:1;display:flex;flex-direction:column;gap:.18rem}.ml-list-title{font-size:.84rem;letter-spacing:.03em;color:#fff;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.ml-list-mood{font-size:.68rem;color:#dfd7f6e0}.ml-list-star{border:0;background:transparent;color:#f4e094;font-size:1.02rem;line-height:1;width:1.5rem;height:1.5rem;display:grid;place-items:center}.ml-list-star:active{transform:scale(.9)}.ml-list-empty{margin:0;text-align:center;color:#e4dbf6cc;font-size:.76rem;padding:1.2rem .2rem 1.5rem}.ml-setting-block{padding:.78rem .95rem;border-top:1px solid rgba(255,255,255,.12);display:grid;gap:.62rem}.ml-setting-row{display:flex;align-items:center;justify-content:space-between;gap:.6rem}.ml-setting-row span{font-size:.82rem;color:#f8f3fff2}.ml-setting-label{display:grid;gap:.32rem;font-size:.75rem;color:#f0eaffe6}.ml-setting-label input[type=range]{width:100%;accent-color:#c9d7ff}.ml-setting-caption{margin:0;font-size:.77rem;color:#f1ebffeb}.ml-switch{border:1px solid rgba(255,255,255,.36);width:2.55rem;height:1.45rem;border-radius:999px;background:#ffffff2e;position:relative;padding:.12rem}.ml-switch span{position:absolute;top:.14rem;left:.16rem;width:1rem;height:1rem;border-radius:999px;background:#fff;transition:transform .2s ease}.ml-switch.on{background:#bedaffa8;border-color:#d6e8ffdb}.ml-switch.on span{transform:translate(1.02rem)}.ml-paper-themes{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:.44rem}.ml-paper-chip{border-radius:11px;border:1px solid rgba(122,94,70,.3);background:var(--chip-bg, #fffdf5);color:var(--chip-text, #5f4b37);font-size:.72rem;letter-spacing:.04em;padding:.46rem .56rem;transition:transform .16s ease,border-color .16s ease}.ml-paper-chip.active{border-color:var(--chip-accent, #9d7b60);box-shadow:0 0 0 3px #9d7b60a8 inset,0 10px 16px #00000029;transform:translateY(-2px);font-weight:600;filter:saturate(1.15)}.ml-paper-chip:active{transform:scale(.97)}.ml-orb-mode-options{display:flex;gap:.4rem;flex-wrap:wrap}.ml-orb-mode-btn{border:1px solid rgba(255,255,255,.28);border-radius:999px;background:#ffffff0f;color:#f5f0ffe6;font-size:.69rem;letter-spacing:.03em;padding:.34rem .62rem;transition:transform .16s ease,background .16s ease,border-color .16s ease}.ml-orb-mode-btn.active{border-color:#cee2ffd9;background:#a9ceff57;color:#fff}.ml-orb-mode-btn:active{transform:scale(.96)}.ml-flying-orb{position:fixed;z-index:9999;border-radius:999px;pointer-events:none;background:radial-gradient(circle at 35% 28%,#ffffffd1,#ffffff3d 24%,rgba(var(--orb-rgb, 255, 205, 178),.95),rgba(var(--orb-rgb, 255, 205, 178),.84));box-shadow:0 0 30px #ffffffa8;transition:transform 1.05s cubic-bezier(.25,1,.5,1),opacity 1.05s ease}.ml-flying-orb.go{transform:translate(-50%,-50%) scale(20);opacity:0}@media(max-width:420px){.ml-jar-container{width:min(81vw,316px);height:min(58vh,454px);margin-top:2.5rem}.ml-paper{width:min(90vw,460px)}.ml-redraw-chibi img{width:96px;height:96px}}@media(prefers-reduced-motion:reduce){.ml-star,.ml-shooting,.ml-orb,.ml-orb-core,.ml-flying-orb{animation:none!important;transition:none!important}}
