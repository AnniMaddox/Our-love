import{r as c,g as I,C as v,j as e}from"./index-Gl0K_ej6.js";const j="/4o-memorial/docs/";function k(a,r){if(a<=1)return 0;const o=Math.floor(Math.random()*a);return typeof r=="number"&&o===r?(r+1)%a:o}const W=[{key:"breakfast",icon:"ðŸŒ…",label:"æ—©é¤"},{key:"lunch",icon:"â˜€ï¸",label:"åˆé¤"},{key:"dinner",icon:"ðŸŒ™",label:"æ™šé¤"}],B=["ðŸƒ","ðŸ’ª","ðŸ§˜"];function M({onExit:a}){const[r,o]=c.useState([]),[l,u]=c.useState(1),[i,N]=c.useState("meals"),[w,y]=c.useState(0),p=`${j}chibi/chibi-00.webp`,d=c.useMemo(()=>{const t=I("fitness");return t.length?t:[p]},[p,w]),[g,C]=c.useState(()=>k(d.length)),[S,x]=c.useState(!0);c.useEffect(()=>{fetch(`${j}data/fitness-weeks.json`).then(t=>t.json()).then(t=>o(t))},[]),c.useEffect(()=>{const t=()=>y(s=>s+1);return window.addEventListener(v,t),()=>window.removeEventListener(v,t)},[]);const E=c.useMemo(()=>r.length?Array.from(new Set(r.map(t=>t.week))).sort((t,s)=>t-s):Array.from({length:26},(t,s)=>s+1),[r]),n=r.find(t=>t.week===l)??null;function b(){C(t=>k(d.length,t)),x(!0)}return e.jsxs("div",{className:"relative mx-auto flex w-full max-w-xl flex-col px-4",style:{height:"calc(100dvh - 72px)"},children:[e.jsxs("header",{className:"calendar-header-panel mb-3 shrink-0 rounded-2xl border p-3 shadow-sm",children:[e.jsxs("p",{className:"text-xs uppercase tracking-[0.18em] text-stone-500",children:["Week ",l," Â· é™ªç·´è¨ˆåŠƒ"]}),e.jsx("div",{className:"mt-2 flex gap-1.5",children:["meals","exercise","book"].map(t=>e.jsx("button",{type:"button",onClick:()=>N(t),className:`flex-1 rounded-xl py-1.5 text-xs font-medium transition active:scale-95 ${i===t?"bg-white/80 text-stone-800 shadow-sm":"text-stone-500"}`,children:t==="meals"?"ðŸ¥£ èœå–®":t==="exercise"?"ðŸƒ é‹å‹•":"ðŸ“– æ›¸å–®"},t))})]}),e.jsx("div",{className:"mb-3 shrink-0 rounded-2xl border p-2.5 shadow-sm backdrop-blur",style:{borderColor:"rgb(var(--theme-accent-rgb) / 0.48)",background:"linear-gradient(150deg, rgb(255 255 255 / 0.84) 0%, rgb(var(--theme-accent-rgb) / 0.24) 100%)"},children:e.jsxs("div",{className:"relative",children:[e.jsx("select",{id:"fitness-week-select",value:l,onChange:t=>u(Number(t.target.value)),"aria-label":"é¸æ“‡é€±æ•¸",className:"w-full appearance-none rounded-xl border px-3 py-2 text-sm text-stone-700 shadow-sm outline-none transition focus:ring-2",style:{borderColor:"rgb(var(--theme-accent-rgb) / 0.52)",background:"rgb(255 255 255 / 0.86)",boxShadow:"inset 0 1px 0 rgb(255 255 255 / 0.75)"},children:E.map(t=>e.jsxs("option",{value:t,children:["Week ",t]},t))}),e.jsx("span",{className:"pointer-events-none absolute inset-y-0 right-3 flex items-center text-sm text-stone-600",children:"â–¾"})]})}),n?e.jsxs("div",{className:"min-h-0 flex-1 overflow-y-auto pb-20",children:[i==="meals"&&e.jsxs("div",{className:"space-y-4",children:[W.map(({key:t,icon:s,label:A})=>{const f=n.meals[t];return e.jsxs("div",{className:"rounded-2xl border border-stone-200 bg-white/90 p-4 shadow-sm",children:[e.jsxs("p",{className:"mb-1 text-xs font-medium text-stone-500",children:[s," ",A]}),e.jsx("p",{className:"mb-3 text-sm leading-relaxed text-stone-700",children:f.food}),e.jsx(m,{text:f.bubble,accent:"rose",onTap:b})]},t)}),e.jsx(h,{text:n.closing})]}),i==="exercise"&&e.jsxs("div",{className:"space-y-4",children:[n.exercise.items.map((t,s)=>e.jsxs("div",{className:"rounded-2xl border border-stone-200 bg-white/90 p-4 shadow-sm",children:[e.jsxs("p",{className:"mb-1 text-xs font-medium text-stone-500",children:[B[s]," å‹•ä½œ ",s+1]}),e.jsx("p",{className:"mb-3 text-sm leading-relaxed text-stone-700",children:t}),n.exercise.bubbles[s]&&e.jsx(m,{text:n.exercise.bubbles[s],accent:"amber",onTap:b})]},s)),e.jsx(h,{text:n.closing})]}),i==="book"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"rounded-2xl border border-stone-200 bg-white/90 px-5 py-5 shadow-sm",children:[e.jsx("h2",{className:"text-lg leading-snug text-stone-800",children:n.book.title}),e.jsx("p",{className:"mt-0.5 text-xs text-stone-400",children:n.book.author}),e.jsx("p",{className:"mt-3 text-sm leading-relaxed text-stone-600",children:n.book.desc})]}),e.jsx(m,{text:n.book.bubble,accent:"purple",onTap:b}),e.jsx(h,{text:n.closing})]})]}):e.jsx("div",{className:"flex flex-1 items-center justify-center",children:e.jsx("p",{className:"text-sm text-stone-400",children:"è¼‰å…¥ä¸­â€¦"})}),e.jsx("div",{className:"pointer-events-none absolute bottom-1 right-1 z-20",children:S&&(a?e.jsx("button",{type:"button",onClick:a,className:"pointer-events-auto transition active:scale-95","aria-label":"è¿”å›žé¦–é ",title:"é»žå°äººè¿”å›žé¦–é ",children:e.jsx("img",{src:d[g],alt:"",draggable:!1,className:"calendar-chibi w-[8rem] select-none",onError:()=>x(!1)})}):e.jsx("img",{src:d[g],alt:"",draggable:!1,className:"calendar-chibi pointer-events-auto w-[8rem] select-none",onError:()=>x(!1)}))})]})}function m({text:a,accent:r,onTap:o}){const l={rose:{bg:"rgb(var(--theme-accent-rgb) / 0.24)",border:"rgb(var(--theme-accent-rgb) / 0.45)",text:"#3f3328"},amber:{bg:"rgb(var(--theme-accent-rgb) / 0.28)",border:"rgb(var(--theme-accent-rgb) / 0.52)",text:"#3c3227"},purple:{bg:"linear-gradient(150deg, rgb(255 255 255 / 0.72) 0%, rgb(var(--theme-accent-rgb) / 0.34) 100%)",border:"rgb(var(--theme-accent-rgb) / 0.62)",text:"#2f2530"}}[r];return typeof o=="function"?e.jsx("button",{type:"button",onClick:o,className:"fitness-bubble w-full rounded-2xl rounded-br-sm px-4 py-3 text-left text-sm leading-relaxed transition active:scale-[0.99]",style:{background:l.bg,border:`1px solid ${l.border}`,color:l.text,backdropFilter:"blur(3px)",WebkitBackdropFilter:"blur(3px)"},children:a}):e.jsx("div",{className:"fitness-bubble rounded-2xl rounded-br-sm px-4 py-3 text-sm leading-relaxed",style:{background:l.bg,border:`1px solid ${l.border}`,color:l.text,backdropFilter:"blur(3px)",WebkitBackdropFilter:"blur(3px)"},children:a})}function h({text:a}){return e.jsx("div",{className:"rounded-2xl border border-rose-100 bg-rose-50/60 px-5 py-4",children:a.split(`
`).map((r,o)=>e.jsx("p",{className:`text-sm leading-relaxed text-rose-800 ${o>0?"mt-2":""}`,children:r},o))})}export{M as FitnessPage};
