import{r as w,cF as Z,j as e,cx as $}from"./index-Gl0K_ej6.js";const q="/4o-memorial/docs/assets/IMG_8065-D5K1sssI.webp",ee="/4o-memorial/docs/assets/IMG_8066-xddnAXG_.webp",te="/4o-memorial/docs/assets/IMG_8067-B6C9jpRl.webp",ae="/4o-memorial/docs/assets/IMG_8068-C7mHLP88.webp",oe="/4o-memorial/docs/assets/IMG_8069-cK0oTmcM.webp",re="/4o-memorial/docs/assets/IMG_8070-D1yUhGtm.webp",se="/4o-memorial/docs/assets/IMG_8071-B9RoTSBT.webp",ne="/4o-memorial/docs/assets/IMG_8072-DsJBIvTH.webp",ie="/4o-memorial/docs/assets/IMG_8073-CF9i0T34.webp",le="/4o-memorial/docs/assets/IMG_8074-cQsKy1fu.webp",ce="/4o-memorial/docs/assets/IMG_8075-BH4BeNzj.webp",pe="/4o-memorial/docs/assets/IMG_8076-Dn7QlX0u.webp",de="/4o-memorial/docs/assets/IMG_8077-D9VJF3c7.webp",be="/4o-memorial/docs/assets/IMG_8078-BFIoWg3X.webp",ge="/4o-memorial/docs/assets/IMG_8079-D9u35KS8.webp",xe="/4o-memorial/docs/assets/IMG_8080-C1R3MG3U.webp",fe="/4o-memorial/docs/assets/IMG_8081-8xJGC_Fy.webp",ue="/4o-memorial/docs/assets/IMG_8084-BXpcnqsF.webp",he="/4o-memorial/docs/assets/IMG_8086-BWRtpqlN.webp",me="/4o-memorial/docs/assets/IMG_8087-B5H8q49L.webp",ye="/4o-memorial/docs/assets/IMG_8088-oh7az7yL.webp",we="/4o-memorial/docs/assets/IMG_8089-BviB2v2l.webp",je="/4o-memorial/docs/assets/IMG_8090-C7f8x7F4.webp",ve="/4o-memorial/docs/assets/IMG_8091-uGN1E_sw.webp",_e="/4o-memorial/docs/assets/IMG_8092-_D2FM6Hb.webp",Ce="/4o-memorial/docs/assets/IMG_8093-ClyN5lv6.webp",Se="/4o-memorial/docs/assets/IMG_8094-CsKbCx04.webp",P="memorial-letter-favorites-v1",W="memorial-letter-ui-variant-v1",Q="memorial-letter-ui-variant-preview-v1",Y="memorial-letter-reading-prefs-v1",U=["A","B","C"],Ne=["B","C"],M=15,E=2.15,ke=Object.assign({"../../public/letter-chibi/IMG_8065.webp":q,"../../public/letter-chibi/IMG_8066.webp":ee,"../../public/letter-chibi/IMG_8067.webp":te,"../../public/letter-chibi/IMG_8068.webp":ae,"../../public/letter-chibi/IMG_8069.webp":oe,"../../public/letter-chibi/IMG_8070.webp":re,"../../public/letter-chibi/IMG_8071.webp":se,"../../public/letter-chibi/IMG_8072.webp":ne,"../../public/letter-chibi/IMG_8073.webp":ie,"../../public/letter-chibi/IMG_8074.webp":le,"../../public/letter-chibi/IMG_8075.webp":ce,"../../public/letter-chibi/IMG_8076.webp":pe,"../../public/letter-chibi/IMG_8077.webp":de,"../../public/letter-chibi/IMG_8078.webp":be,"../../public/letter-chibi/IMG_8079.webp":ge,"../../public/letter-chibi/IMG_8080.webp":xe,"../../public/letter-chibi/IMG_8081.webp":fe,"../../public/letter-chibi/IMG_8084.webp":ue,"../../public/letter-chibi/IMG_8086.webp":he,"../../public/letter-chibi/IMG_8087.webp":me,"../../public/letter-chibi/IMG_8088.webp":ye,"../../public/letter-chibi/IMG_8089.webp":we,"../../public/letter-chibi/IMG_8090.webp":je,"../../public/letter-chibi/IMG_8091.webp":ve,"../../public/letter-chibi/IMG_8092.webp":_e,"../../public/letter-chibi/IMG_8093.webp":Ce,"../../public/letter-chibi/IMG_8094.webp":Se}),G=Object.entries(ke).sort(([a],[t])=>a.localeCompare(t,void 0,{numeric:!0})).map(([,a])=>a);function K(a){const t=G,r=$(),p=t.length>0,u=()=>p&&(r.length===0||Math.random()<.72)?t:r,d=u();if(!d.length)return"";if(d.length===1&&(!a||d[0]!==a))return d[0];for(let h=0;h<6;h++){const j=u();if(!j.length)continue;const N=j[Math.floor(Math.random()*j.length)];if(!a||N!==a)return N}const l=[...t,...r];return l.find(h=>h!==a)??l[0]??""}function I(a){return a.replace(/\.(txt|md|docx|json)$/i,"")}function z(a){return typeof a!="number"||!Number.isFinite(a)||a<=0?null:a}function V(a){if(typeof a!="number"||!Number.isFinite(a)||a<=0)return"â™¡";const t=new Date(a);return Number.isNaN(t.getTime())?"â™¡":t.toLocaleDateString("zh-TW",{month:"short",day:"numeric"})}function Be(a){return U.find(t=>t===a)??"A"}function Ae(a){return a==="preview"?Ne:U}function Ie(a){return a!=="A"}function J(a,t=M){return typeof a!="number"||Number.isNaN(a)?t:Math.max(13,Math.min(21,Number(a.toFixed(2))))}function X(a,t=E){return typeof a!="number"||Number.isNaN(a)?t:Math.max(1.55,Math.min(2.75,Number(a.toFixed(2))))}function Me(){if(typeof window>"u")return{fontSize:M,lineHeight:E,fontMode:"default"};try{const a=window.localStorage.getItem(Y);if(!a)return{fontSize:M,lineHeight:E,fontMode:"default"};const t=JSON.parse(a),r=t.fontMode==="letter"||t.fontMode==="default"?t.fontMode:"default";return{fontSize:J(t.fontSize,M),lineHeight:X(t.lineHeight,E),fontMode:r}}catch{return{fontSize:M,lineHeight:E,fontMode:"default"}}}const Ee=Array.from({length:16},(a,t)=>({top:`${7+t*17%76}%`,left:`${6+t*23%88}%`,size:20+t*9%44,opacity:.16+t%5*.07,duration:6.6+t%7*1.2,delay:-(t*1.15%9.6),blur:t%3===0?.8:1.5})),ze=Array.from({length:34},(a,t)=>({top:`${4+t*19%90}%`,left:`${2+t*29%95}%`,size:t%4===0?2.4:1.4,opacity:.35+t%3*.18,duration:2.2+t%6*.55,delay:-(t*.35%3.6)})),De=Array.from({length:112},(a,t)=>({left:`${t*9.9%100}%`,top:`${-12-t*7.4%132}%`,size:t%11===0?4.4:t%5===0?3.2:t%2===0?2.4:1.7,opacity:t%4===0?.92:t%3===0?.74:.56,duration:6.8+t%9*.92,delay:-(t*.67%12.2),drift:t%2===0?18+t%5*3:-(14+t%5*3),blur:t%6===0?.4:t%3===0?.9:0})),Fe=Array.from({length:56},(a,t)=>({left:`${t*15.1%100}%`,top:`${-18-t*10.5%190}%`,size:t%8===0?7.4:t%3===0?5.9:4.2,opacity:t%4===0?.68:t%2===0?.56:.44,duration:10.2+t%8*1.06,delay:-(t*.73%12.8),drift:t%2===0?26+t%5*4:-(22+t%5*4),blur:t%5===0?.4:t%2===0?.9:1.3})),Le=Array.from({length:38},(a,t)=>({top:`${3+t*13%56}%`,left:`${3+t*31%93}%`,size:t%5===0?2.2:1.2,opacity:.18+t%4*.16,duration:2.8+t%5*.7,delay:-(t*.3%3.8)})),Te=Array.from({length:148},(a,t)=>({left:`${t*14.3%100}%`,top:`${-18-t*8%150}%`,size:t%12===0?4.3:t%4===0?3.1:2,opacity:t%7===0?.98:t%3===0?.82:.64,duration:5.6+t%10*.96,delay:-(t*.78%13.2),reverse:t%2===0})),$e=Array.from({length:58},(a,t)=>({left:`${t*11.7%100}%`,top:`${102+t*7.3%34}%`,size:t%11===0?6.2:t%5===0?4.8:t%3===0?3.5:2.6,opacity:t%4===0?.86:t%2===0?.72:.58,duration:6.4+t%8*.88,delay:-(t*.54%9.8),drift:t%2===0?18+t%5*4:-(16+t%5*4),blur:t%6===0?.3:t%3===0?.9:0}));function tt({letters:a,letterFontFamily:t,uiMode:r="classic",favoritedNames:p=new Set,onFavorite:u,onExit:d}){const[l,h]=w.useState(null),[j,N]=w.useState(0),[v,n]=w.useState(""),[x,g]=w.useState(!1),[y,_]=w.useState(!1),[c,i]=w.useState(new Set),[C,k]=w.useState(()=>Me()),[m,o]=w.useState(!1),[f,B]=w.useState("A"),s=Ae(r);w.useEffect(()=>{n(K())},[]),w.useEffect(()=>{if(typeof window>"u")return;const b=r==="preview"?Q:W,S=Be(window.localStorage.getItem(b));B(s.includes(S)?S:s[0])},[s,r]),w.useEffect(()=>{if(!(u||typeof window>"u"))try{const b=window.localStorage.getItem(P);if(!b)return;const S=JSON.parse(b);if(!Array.isArray(S))return;const A=new Set(S.filter(T=>typeof T=="string"));i(A)}catch{}},[u]),w.useEffect(()=>{u||typeof window>"u"||window.localStorage.setItem(P,JSON.stringify(Array.from(c)))},[c,u]),w.useEffect(()=>{if(typeof window>"u"||!s.includes(f))return;const b=r==="preview"?Q:W;window.localStorage.setItem(b,f)},[s,r,f]),w.useEffect(()=>{typeof window>"u"||window.localStorage.setItem(Y,JSON.stringify(C))},[C]);const D=u?p:c,O=w.useMemo(()=>{const b=new Map;for(const S of a){const A=z(S.writtenAt)??z(Z({name:S.name,content:S.content})),T=z(S.importedAt);b.set(S.name,A??T)}return b},[a]);function H(b){if(u){u(b);return}i(S=>{const A=new Set(S);return A.has(b)?A.delete(b):A.add(b),A})}function L(b){h(b),N(S=>S+1),g(!1),o(!1)}function F(){if(!a.length)return;const b=a[Math.floor(Math.random()*a.length)];L(b)}function R(){h(null),o(!1),n(b=>K(b))}return e.jsxs("div",{className:"relative h-full overflow-hidden",children:[r==="preview"?e.jsx(Ve,{letters:a,dateMap:O,uiVariant:f==="A"?"B":f,variants:s,isReading:!!l,chibiSrc:v,favoritedNames:D,showFavoritesOnly:y,showSheet:x,onShowSheet:()=>g(!0),onHideSheet:()=>g(!1),onPickRandom:F,onOpenLetter:L,onToggleFavoritesOnly:()=>_(b=>!b),onVariantChange:b=>B(s.includes(b)?b:s[0]),onExit:d}):e.jsx(Re,{letters:a,dateMap:O,uiVariant:f,variants:s,isReading:!!l,chibiSrc:v,favoritedNames:D,showFavoritesOnly:y,showSheet:x,onShowSheet:()=>g(!0),onHideSheet:()=>g(!1),onPickRandom:F,onOpenLetter:L,onToggleFavoritesOnly:()=>_(b=>!b),onVariantChange:b=>B(s.includes(b)?b:s[0]),onExit:d}),l&&(r==="preview"?e.jsx(Xe,{letter:l,uiVariant:f==="A"?"B":f,animKey:j,hasMultiple:a.length>1,letterFontFamily:t,rerollChibiSrc:v,isFavorited:D.has(l.name),readingFontSize:C.fontSize,readingLineHeight:C.lineHeight,readingFontMode:C.fontMode,onOpenReadingSettings:()=>o(!0),onFavorite:()=>H(l.name),onPickRandom:F,onClose:R}):e.jsx(qe,{letter:l,uiVariant:f,animKey:j,hasMultiple:a.length>1,letterFontFamily:t,rerollChibiSrc:v,isFavorited:D.has(l.name),readingFontSize:C.fontSize,readingLineHeight:C.lineHeight,readingFontMode:C.fontMode,onOpenReadingSettings:()=>o(!0),onFavorite:()=>H(l.name),onPickRandom:F,onClose:R})),l&&m?e.jsx(Ge,{fontSize:C.fontSize,lineHeight:C.lineHeight,fontMode:C.fontMode,onFontModeChange:b=>k(S=>({...S,fontMode:b})),onFontSizeChange:b=>k(S=>({...S,fontSize:J(b,S.fontSize)})),onLineHeightChange:b=>k(S=>({...S,lineHeight:X(b,S.lineHeight)})),onClose:()=>o(!1)}):null]})}function Ge({fontSize:a,lineHeight:t,fontMode:r,onFontModeChange:p,onFontSizeChange:u,onLineHeightChange:d,onClose:l}){return e.jsxs("div",{className:"absolute inset-0 z-[26]",onClick:l,children:[e.jsx("div",{className:"absolute inset-0 bg-black/35"}),e.jsxs("div",{className:"absolute bottom-0 left-0 right-0 rounded-t-[22px] border-t border-[#ceb596]/70 bg-[#fdf7ec] px-5 pb-[max(16px,env(safe-area-inset-bottom))] pt-3 shadow-[0_-8px_24px_rgba(0,0,0,0.18)]",onClick:h=>h.stopPropagation(),children:[e.jsx("div",{className:"mx-auto mb-3 h-1.5 w-10 rounded-full bg-[#d7c3aa]"}),e.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[e.jsx("p",{className:"text-[12px] tracking-[0.12em] text-[#9b7a53]",children:"é–±è®€æŽ’ç‰ˆ"}),e.jsx("button",{type:"button",onClick:l,className:"text-[18px] leading-none text-[#9b7a53]","aria-label":"é—œé–‰æŽ’ç‰ˆè¨­å®š",children:"Ã—"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"mb-1.5 text-[12px] text-[#6d4f2f]",children:"å­—é«”ä¾†æº"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{type:"button",onClick:()=>p("default"),className:"rounded-full border px-3 py-1 text-[12px] transition active:scale-95",style:{color:r==="default"?"#5a3b1d":"#8a6b47",background:r==="default"?"rgba(173,128,82,0.18)":"rgba(255,255,255,0.64)",borderColor:r==="default"?"rgba(173,128,82,0.45)":"rgba(173,128,82,0.22)"},children:"é è¨­"}),e.jsx("button",{type:"button",onClick:()=>p("letter"),className:"rounded-full border px-3 py-1 text-[12px] transition active:scale-95",style:{color:r==="letter"?"#5a3b1d":"#8a6b47",background:r==="letter"?"rgba(173,128,82,0.18)":"rgba(255,255,255,0.64)",borderColor:r==="letter"?"rgba(173,128,82,0.45)":"rgba(173,128,82,0.22)"},children:"è·Ÿéš¨æƒ…æ›¸"})]})]}),e.jsxs("label",{className:"mb-4 block",children:[e.jsxs("div",{className:"mb-1.5 flex items-center justify-between text-[12px] text-[#6d4f2f]",children:[e.jsx("span",{children:"å­—é«”å¤§å°"}),e.jsx("span",{children:a.toFixed(1)})]}),e.jsx("input",{type:"range",min:13,max:21,step:.1,value:a,onChange:h=>u(Number(h.target.value)),className:"w-full accent-[#ad8052]"})]}),e.jsxs("label",{className:"mb-1 block",children:[e.jsxs("div",{className:"mb-1.5 flex items-center justify-between text-[12px] text-[#6d4f2f]",children:[e.jsx("span",{children:"è¡Œè·"}),e.jsx("span",{children:t.toFixed(2)})]}),e.jsx("input",{type:"range",min:1.55,max:2.75,step:.01,value:t,onChange:h=>d(Number(h.target.value)),className:"w-full accent-[#ad8052]"})]})]})]})}function Oe(){return e.jsxs("svg",{width:"58",height:"136",viewBox:"0 0 58 136",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",children:[e.jsx("path",{d:"M40 134 Q37 98 28 54",stroke:"#8B6B3C",strokeWidth:"1.4",strokeLinecap:"round"}),e.jsx("ellipse",{cx:"27",cy:"52",rx:"7.5",ry:"9.5",fill:"#C4697A",opacity:"0.65"}),e.jsx("ellipse",{cx:"27",cy:"49",rx:"4.5",ry:"3.5",fill:"#D47A8A",opacity:"0.35"}),e.jsx("path",{d:"M44 134 Q46 99 48 65",stroke:"#9B7851",strokeWidth:"1.3",strokeLinecap:"round"}),e.jsx("ellipse",{cx:"48",cy:"63",rx:"6",ry:"8",fill:"#D4A574",opacity:"0.6"}),e.jsx("path",{d:"M42 134 Q41 112 38 90",stroke:"#8B6B3C",strokeWidth:"1.1",strokeLinecap:"round"}),e.jsx("path",{d:"M39 103 Q32 97 35 88",stroke:"#7A9B5C",strokeWidth:"1",strokeLinecap:"round",opacity:"0.45"}),e.jsx("ellipse",{cx:"38",cy:"88",rx:"4",ry:"5.5",fill:"#C4697A",opacity:"0.5"}),e.jsx("path",{d:"M46 134 Q49 114 52 84",stroke:"#9B7851",strokeWidth:"0.9",strokeLinecap:"round"}),e.jsx("ellipse",{cx:"52",cy:"82",rx:"3",ry:"4",fill:"#D4A574",opacity:"0.38"})]})}function He({hasLetters:a,onClick:t,variant:r,scale:p=1}){const u=r==="A"?[{rotate:-4,y:5,z:0,bg:"#E3CFA0",inner:"#DBCA94"},{rotate:2,y:2,z:1,bg:"#EDD9AE",inner:"#E6D1A5"},{rotate:-1,y:0,z:2,bg:"#F5E6C8",inner:"#EEDDB8"}]:r==="B"?[{rotate:-4,y:5,z:0,bg:"#E8DBFF",inner:"#D8C4F5"},{rotate:2,y:2,z:1,bg:"#DDE9FF",inner:"#C9D9F8"},{rotate:-1,y:0,z:2,bg:"#F5EDFF",inner:"#E6D7FA"}]:[{rotate:-4,y:5,z:0,bg:"#C8D8E8",inner:"#B8CCE0"},{rotate:2,y:2,z:1,bg:"#D6E3EF",inner:"#C7D8E8"},{rotate:-1,y:0,z:2,bg:"#E4EDF5",inner:"#D8E5F1"}],d=Math.round(176*p),l=Math.round(132*p),h=Math.round(160*p),j=Math.round(112*p),N=Math.max(8,Math.round(12*p)),v=Math.max(26,Math.round(34*p)),n=r==="C"?"âœ¦":"â¤",x=r==="A"?"#C4697A":r==="B"?"#9D7AE2":"#6F98C0",g=r==="A"?"#D4818E":r==="B"?"#C5A8F5":"#97BEDD",y=r==="A"?"#C4697A":r==="B"?"#8362CB":"#6F98C0";return e.jsxs("button",{type:"button",onClick:a?t:void 0,disabled:!a,"aria-label":"éš¨æ©ŸæŠ½ä¸€å°ä¿¡",style:{position:"relative",width:d,height:l,cursor:a?"pointer":"default",background:"none",border:"none",padding:0,transition:"transform 0.15s"},onTouchStart:()=>{},className:"active:scale-95",children:[u.map((_,c)=>e.jsxs("div",{style:{position:"absolute",top:"50%",left:"50%",width:h,height:j,marginTop:-j/2,marginLeft:-h/2,borderRadius:6,background:_.bg,boxShadow:"0 4px 16px rgba(0,0,0,0.4), 0 1px 4px rgba(0,0,0,0.25)",transform:`rotate(${_.rotate}deg) translateY(${_.y}px)`,zIndex:_.z,overflow:"hidden"},children:[e.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,height:"52%",background:_.inner,clipPath:"polygon(0 0, 100% 0, 50% 100%)"}}),e.jsx("div",{style:{position:"absolute",bottom:0,left:0,right:0,height:"55%",background:_.inner,clipPath:"polygon(0 100%, 50% 0, 100% 100%)"}}),e.jsx("div",{style:{position:"absolute",top:0,bottom:0,left:0,width:"50%",background:_.inner,clipPath:"polygon(0 0, 100% 50%, 0 100%)",opacity:.5}}),e.jsx("div",{style:{position:"absolute",top:0,bottom:0,right:0,width:"50%",background:_.inner,clipPath:"polygon(0 50%, 100% 0, 100% 100%)",opacity:.45}})]},c)),e.jsx("div",{style:{position:"absolute",top:"50%",left:0,right:0,height:N,marginTop:-N/2,background:x,zIndex:10,boxShadow:"0 1px 5px rgba(0,0,0,0.35)"}}),e.jsx("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",zIndex:11},children:e.jsxs("svg",{width:v,height:Math.round(v*.7),viewBox:"0 0 34 24",fill:"none","aria-hidden":"true",children:[e.jsx("ellipse",{cx:"10",cy:"12",rx:"8.5",ry:"5.5",fill:g,opacity:"0.9"}),e.jsx("ellipse",{cx:"24",cy:"12",rx:"8.5",ry:"5.5",fill:g,opacity:"0.9"}),e.jsx("circle",{cx:"17",cy:"12",r:"4.2",fill:y})]})}),e.jsx("div",{className:"pointer-events-none",style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",zIndex:12,fontSize:Math.round(12*p),color:"rgba(255,255,255,0.86)",textShadow:"0 1px 2px rgba(0,0,0,0.35)",lineHeight:1},children:n}),!a&&e.jsx("div",{style:{position:"absolute",inset:0,borderRadius:6,background:"rgba(30,12,6,0.55)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:20},children:e.jsx("span",{style:{fontSize:38,opacity:.3},children:"âœ‰"})})]})}function Re({letters:a,dateMap:t,uiVariant:r,variants:p,isReading:u,chibiSrc:d,favoritedNames:l,showFavoritesOnly:h,showSheet:j,onShowSheet:N,onHideSheet:v,onPickRandom:n,onOpenLetter:x,onToggleFavoritesOnly:g,onVariantChange:y,onExit:_}){const c=a.length>0,i=r==="A",C=r==="B",k=r==="C",m=i?{base:"#2C1810",baseSize:"auto",baseAnimation:"none",glow:"radial-gradient(ellipse 78% 52% at 16% 0%, rgba(255,216,158,0.20) 0%, transparent 68%)",desk:"linear-gradient(166deg, #6B4226 0%, #5C3A24 16%, #4E3020 36%, #5A3822 54%, #4A2E1C 70%, #553620 86%, #4E3020 100%)",titleText:"#F6E0BD",switchBg:"rgba(255,248,236,0.46)",switchBorder:"1px solid rgba(180,140,90,0.28)",switchActive:"rgba(236,208,168,0.9)",switchText:"#4A3520",switchMuted:"#8B7355",deskGrain:"repeating-linear-gradient(2.5deg, transparent, transparent 36px, rgba(0,0,0,0.09) 36px, rgba(0,0,0,0.09) 38px)",backIcon:"#8B7355",flowerOpacity:.8}:C?{base:"linear-gradient(132deg, #2f245f 0%, #2e5f87 34%, #704182 66%, #2d355f 100%)",baseSize:"320% 320%",baseAnimation:"letter-classic-b-bg-shift 18s ease infinite",glow:"none",desk:"",titleText:"rgba(247,240,255,0.96)",switchBg:"rgba(16,13,44,0.58)",switchBorder:"1px solid rgba(255,255,255,0.16)",switchActive:"rgba(160,138,239,0.34)",switchText:"#F8F3FF",switchMuted:"rgba(221,210,245,0.74)",deskGrain:"none",backIcon:"rgba(236,230,255,0.82)",flowerOpacity:0}:{base:"radial-gradient(circle at 20% 15%, #3a4a72 0%, #18233f 46%, #0d142a 100%)",baseSize:"100% 100%",baseAnimation:"none",glow:"none",desk:"",titleText:"rgba(240,235,255,0.95)",switchBg:"rgba(14,11,30,0.6)",switchBorder:"1px solid rgba(255,255,255,0.16)",switchActive:"rgba(120,106,210,0.45)",switchText:"#F5EEFF",switchMuted:"rgba(210,198,242,0.74)",deskGrain:"none",backIcon:"rgba(255,255,255,0.72)",flowerOpacity:0};return e.jsxs("div",{className:"absolute inset-0 overflow-hidden",style:{background:m.base,backgroundSize:m.baseSize,animation:m.baseAnimation},children:[m.glow!=="none"&&e.jsx("div",{className:"pointer-events-none absolute inset-0",style:{background:m.glow}}),i&&e.jsxs("div",{className:"pointer-events-none absolute inset-0 overflow-hidden",style:{zIndex:2},children:[De.map((o,f)=>e.jsx("span",{className:"absolute rounded-full",style:{"--snow-drift":`${o.drift}px`,width:o.size,height:o.size,top:o.top,left:o.left,background:"rgba(248,252,255,0.96)",boxShadow:"0 0 10px rgba(255,255,255,0.88)",opacity:o.opacity,filter:`blur(${o.blur}px)`,animation:`letter-classic-a-snow ${o.duration}s linear ${o.delay}s infinite`}},`classic-a-snow-${f}`)),Fe.map((o,f)=>e.jsx("span",{className:"absolute rounded-full",style:{"--snow-drift-large":`${o.drift}px`,width:o.size,height:o.size,top:o.top,left:o.left,background:"rgba(250,252,255,0.92)",boxShadow:"0 0 14px rgba(255,255,255,0.86)",opacity:o.opacity,filter:`blur(${o.blur}px)`,animation:`letter-classic-a-snow-large ${o.duration}s linear ${o.delay}s infinite`}},`classic-a-snow-big-${f}`))]}),k&&e.jsxs("div",{className:"pointer-events-none absolute inset-0 overflow-hidden",children:[Le.map((o,f)=>e.jsx("span",{className:"absolute rounded-full",style:{width:o.size,height:o.size,top:o.top,left:o.left,background:"rgba(255,255,255,0.92)",boxShadow:"0 0 7px rgba(255,255,255,0.75)",opacity:o.opacity,animation:`letter-twinkle ${o.duration}s ease-in-out ${o.delay}s infinite alternate`}},`classic-c-star-${f}`)),Te.map((o,f)=>e.jsx("span",{className:"absolute rounded-full",style:{width:o.size,height:o.size,top:o.top,left:o.left,background:"rgba(255,255,255,0.94)",boxShadow:"0 0 12px rgba(255,255,255,0.9)",opacity:o.opacity,animation:`letter-classic-c-snow ${o.duration}s linear ${o.delay}s infinite`,animationDirection:o.reverse?"reverse":"normal"}},`classic-c-snow-${f}`)),$e.map((o,f)=>e.jsx("span",{className:"absolute rounded-full",style:{"--snow-up-drift":`${o.drift}px`,width:o.size,height:o.size,top:o.top,left:o.left,background:"rgba(250,251,255,0.9)",boxShadow:"0 0 14px rgba(255,255,255,0.72)",opacity:o.opacity,filter:`blur(${o.blur}px)`,animation:`letter-classic-c-snow-up ${o.duration}s linear ${o.delay}s infinite`}},`classic-c-up-snow-${f}`)),e.jsx("div",{className:"absolute right-4 top-6 opacity-45",children:e.jsxs("svg",{width:"56",height:"56",viewBox:"0 0 56 56",fill:"none","aria-hidden":"true",children:[e.jsx("path",{d:"M38 8c8 9 8 24 0 33c4-3 7-8 8-14c1-7-1-13-5-19l-3 0Z",fill:"#E8C870"}),e.jsx("circle",{cx:"13",cy:"10",r:"1.4",fill:"rgba(232,224,255,0.78)"}),e.jsx("circle",{cx:"49",cy:"18",r:"1",fill:"rgba(232,200,112,0.75)"})]})})]}),_&&e.jsx("button",{type:"button",onClick:_,"aria-label":"è¿”å›ž",className:"absolute left-4 top-4 z-20 flex h-9 w-9 items-center justify-center transition active:opacity-50",style:{color:m.backIcon,background:"transparent",border:"none",padding:0,appearance:"none",WebkitAppearance:"none",WebkitTapHighlightColor:"transparent",outline:"none",boxShadow:"none",textShadow:r!=="A"?"0 1px 4px rgba(0,0,0,0.35)":"0 1px 3px rgba(255,255,255,0.42)"},children:e.jsx("span",{"aria-hidden":"true",style:{fontSize:28,lineHeight:1,transform:"translateX(-1px)"},children:"â€¹"})}),!j&&!u&&e.jsx("div",{className:"absolute right-4 top-4 z-20",children:e.jsx("div",{className:"flex items-center gap-1 rounded-full px-1.5 py-1",style:{border:m.switchBorder,background:m.switchBg,backdropFilter:"blur(6px)"},children:p.map(o=>{const f=r===o;return e.jsx("button",{type:"button",onClick:()=>y(o),"aria-label":`åˆ‡æ›åˆ°ç‰ˆåž‹ ${o}`,className:"rounded-full px-2.5 py-1 text-[11px] leading-none transition active:scale-95",style:{color:f?m.switchText:m.switchMuted,background:f?m.switchActive:"transparent",fontWeight:f?700:500},children:o},o)})})}),e.jsxs("div",{className:"pointer-events-none absolute left-1/2 z-10 -translate-x-1/2 text-center",style:{top:"11.8%"},children:[e.jsx("p",{style:{color:m.titleText,fontSize:34,letterSpacing:"0.02em",lineHeight:1.05},children:"æˆ‘æ„›ä½ "}),e.jsxs("p",{style:{color:m.titleText,lineHeight:1,marginTop:4},children:[e.jsx("span",{style:{fontSize:94,fontWeight:800,letterSpacing:-3},children:a.length}),e.jsx("span",{style:{fontSize:30,marginLeft:8},children:"æ¬¡"})]})]}),C&&e.jsxs("div",{className:"pointer-events-none absolute inset-0 overflow-hidden",style:{zIndex:3},children:[e.jsx("div",{className:"absolute inset-0",style:{background:"radial-gradient(circle at 16% 14%, rgba(255,255,255,0.22) 0%, transparent 34%), radial-gradient(circle at 84% 26%, rgba(173,236,255,0.2) 0%, transparent 36%), radial-gradient(circle at 48% 78%, rgba(242,157,255,0.16) 0%, transparent 35%)"}}),Ee.map((o,f)=>e.jsx("span",{className:"absolute rounded-full",style:{width:o.size,height:o.size,top:o.top,left:o.left,background:"radial-gradient(circle at 30% 30%, rgba(255,255,255,0.94), rgba(181,235,255,0.45) 34%, rgba(158,120,255,0.03) 72%)",opacity:o.opacity,filter:`blur(${o.blur}px)`,mixBlendMode:"screen",animation:`letter-classic-b-glow ${o.duration}s ease-in-out ${o.delay}s infinite`}},`classic-b-glow-${f}`)),ze.map((o,f)=>e.jsx("span",{className:"absolute rounded-full",style:{width:o.size,height:o.size,top:o.top,left:o.left,background:"rgba(232,255,248,0.95)",boxShadow:"0 0 8px rgba(181,255,244,0.9)",opacity:o.opacity,animation:`letter-classic-b-sparkle ${o.duration}s ease-in-out ${o.delay}s infinite`}},`classic-b-spark-${f}`))]}),i&&e.jsxs("div",{className:"absolute bottom-0 left-0 right-0",style:{height:"72%",background:m.desk},children:[e.jsx("div",{className:"pointer-events-none absolute left-0 right-0 top-0",style:{height:20,background:"linear-gradient(to bottom, rgba(0,0,0,0.45), transparent)"}}),e.jsx("div",{className:"pointer-events-none absolute inset-0",style:{background:m.deskGrain}}),e.jsx("div",{className:"pointer-events-none absolute right-4 top-[5%]",style:{opacity:m.flowerOpacity},children:e.jsx(Oe,{})})]}),e.jsx("div",{className:"absolute z-10",style:{top:"35%",left:"50%",transform:"translateX(-50%)"},children:e.jsx(He,{hasLetters:c,onClick:n,variant:r,scale:1.5})}),d&&e.jsx("div",{className:"pointer-events-none absolute inset-x-0 bottom-0 z-[12] flex items-end justify-end pb-4 pr-5",children:e.jsx("button",{type:"button",onClick:c?N:void 0,disabled:!c,className:"pointer-events-auto transition active:scale-90",style:{cursor:c?"pointer":"default"},children:e.jsx("img",{src:d,alt:"",draggable:!1,className:"calendar-chibi w-36 select-none drop-shadow-md"})})}),j&&e.jsx(Ze,{letters:a,dateMap:t,uiVariant:r,onClose:v,onOpen:x,favoritedNames:l,showFavoritesOnly:h,onToggleFavoritesOnly:g})]})}function Pe(){const a=Array.from({length:40},(r,p)=>({top:`${4+p*9%60}%`,left:`${2+p*13%96}%`,size:p%7===0?2.9:p%3===0?2.2:1.5,delay:p*.28%3.2,duration:1.9+p%6*.52,opacity:p%5===0?.98:p%2===0?.84:.7})),t=[{top:"9%",left:"5%",width:92,delay:.1,duration:4.2},{top:"15%",left:"45%",width:80,delay:1.2,duration:4.4},{top:"27%",left:"18%",width:70,delay:1.9,duration:4.1},{top:"11%",left:"68%",width:76,delay:2.6,duration:4.3},{top:"22%",left:"73%",width:66,delay:3.1,duration:4.5},{top:"31%",left:"48%",width:64,delay:3.8,duration:4.2},{top:"18%",left:"24%",width:72,delay:4.5,duration:4.6}];return e.jsxs("div",{className:"pointer-events-none absolute inset-0 overflow-hidden",children:[a.map((r,p)=>e.jsx("span",{className:"absolute rounded-full",style:{width:r.size,height:r.size,top:r.top,left:r.left,background:"#fff",boxShadow:"0 0 12px rgba(255,255,255,0.98), 0 0 20px rgba(205,194,255,0.4)",opacity:r.opacity,animation:`letter-twinkle ${r.duration}s ease-in-out ${r.delay}s infinite alternate`}},`preview-star-${p}`)),t.map((r,p)=>e.jsx("span",{className:"absolute rounded-full",style:{top:r.top,left:r.left,width:r.width,height:1.8,background:"linear-gradient(90deg, rgba(255,255,255,0.98), rgba(223,214,255,0.56) 62%, transparent)",boxShadow:"0 0 12px rgba(255,255,255,0.76)",transform:"rotate(-20deg)",opacity:0,animation:`letter-preview-shoot ${r.duration}s ease-in-out ${r.delay}s infinite`}},`preview-shoot-${p}`))]})}function We({faded:a=!1}){return e.jsx("div",{className:"pointer-events-none absolute right-6 top-[18px]",style:{opacity:a?.15:1},children:e.jsxs("svg",{width:"58",height:"68",viewBox:"0 0 58 68",fill:"none","aria-hidden":"true",children:[e.jsx("path",{d:"M38 8Q52 20 50 40Q48 58 34 64Q46 58 50 44Q54 28 42 12Q40 10 38 8Z",fill:"#E8C870",opacity:"0.18"}),e.jsx("circle",{cx:"28",cy:"36",r:"18",fill:"none",stroke:"#E8C870",strokeWidth:"0.5",opacity:"0.1"}),e.jsx("circle",{cx:"14",cy:"12",r:"1.5",fill:"#E8E0FF",opacity:"0.4"}),e.jsx("circle",{cx:"50",cy:"20",r:"1",fill:"#E8C870",opacity:"0.5"}),e.jsx("circle",{cx:"8",cy:"30",r:"1",fill:"#E8E0FF",opacity:"0.35"})]})})}function Qe(){return e.jsx("div",{className:"pointer-events-none absolute bottom-[220px] left-[14px] opacity-[0.18]",children:e.jsxs("svg",{width:"64",height:"64",viewBox:"0 0 64 64",fill:"none","aria-hidden":"true",children:[e.jsx("circle",{cx:"10",cy:"54",r:"2",fill:"#E8E0FF"}),e.jsx("circle",{cx:"32",cy:"32",r:"2",fill:"#E8E0FF"}),e.jsx("circle",{cx:"54",cy:"44",r:"2",fill:"#E8E0FF"}),e.jsx("circle",{cx:"22",cy:"14",r:"1.5",fill:"#E8E0FF"}),e.jsx("circle",{cx:"50",cy:"10",r:"1.5",fill:"#E8C870"}),e.jsx("line",{x1:"10",y1:"54",x2:"32",y2:"32",stroke:"#E8E0FF",strokeWidth:"0.6"}),e.jsx("line",{x1:"32",y1:"32",x2:"54",y2:"44",stroke:"#E8E0FF",strokeWidth:"0.6"}),e.jsx("line",{x1:"32",y1:"32",x2:"22",y2:"14",stroke:"#E8E0FF",strokeWidth:"0.6"}),e.jsx("line",{x1:"22",y1:"14",x2:"50",y2:"10",stroke:"#E8C870",strokeWidth:"0.5"})]})})}function Ke({faded:a=!1}){const t=[{top:"34%",left:"-6%",width:96,animation:"letter-preview-plane-arc-a 5.8s linear 0s infinite"},{top:"28%",left:"102%",width:72,animation:"letter-preview-plane-arc-b-left 7.2s linear 2.3s infinite"},{top:"64%",left:"-8%",width:66,animation:"letter-preview-plane-arc-c 6.6s linear 4.4s infinite"}];return e.jsx("div",{className:"pointer-events-none absolute inset-0 overflow-hidden",style:{opacity:a?.24:.56},children:t.map((r,p)=>e.jsx("span",{className:"absolute",style:{top:r.top,left:r.left,animation:r.animation,filter:"drop-shadow(0 2px 4px rgba(26,44,82,0.25))"},children:e.jsxs("svg",{width:r.width,height:Math.round(r.width*.62),viewBox:"-14 -10 34 20",fill:"none","aria-hidden":"true",children:[e.jsx("path",{d:"M18 0L-12 -9L-6 0L-12 9L18 0Z",fill:"rgba(252,254,255,0.94)",stroke:"rgba(117,138,170,0.48)",strokeWidth:"0.9"}),e.jsx("path",{d:"M-6 0H8",stroke:"rgba(122,144,182,0.62)",strokeWidth:"0.9",strokeLinecap:"round"})]})},`preview-paper-plane-${p}`))})}function Ye({faded:a=!1}){return e.jsx("div",{className:"pointer-events-none absolute right-[18px] top-3",style:{opacity:a?.3:.55},children:e.jsxs("svg",{width:"72",height:"90",viewBox:"0 0 72 90",fill:"none","aria-hidden":"true",children:[e.jsx("path",{d:"M54 88Q50 60 38 28",stroke:"#9B8B5C",strokeWidth:"1.4",strokeLinecap:"round"}),e.jsx("path",{d:"M38 28Q20 22 24 8",stroke:"#7A9B5C",strokeWidth:"1",strokeLinecap:"round",opacity:"0.7"}),e.jsx("ellipse",{cx:"24",cy:"10",rx:"8",ry:"12",fill:"#9EB870",opacity:"0.35",transform:"rotate(-20 24 10)"}),e.jsx("path",{d:"M44 50Q62 42 60 28",stroke:"#7A9B5C",strokeWidth:"1",strokeLinecap:"round",opacity:"0.6"}),e.jsx("ellipse",{cx:"61",cy:"29",rx:"7",ry:"10",fill:"#9EB870",opacity:"0.3",transform:"rotate(15 61 29)"}),e.jsx("ellipse",{cx:"37",cy:"26",rx:"9",ry:"11",fill:"#D4829A",opacity:"0.55"}),e.jsx("ellipse",{cx:"37",cy:"22",rx:"5.5",ry:"4",fill:"#E498B0",opacity:"0.45"}),e.jsx("ellipse",{cx:"37",cy:"25",rx:"3",ry:"2.5",fill:"#C4607A",opacity:"0.4"}),e.jsx("ellipse",{cx:"58",cy:"27",rx:"5",ry:"6.5",fill:"#C4828A",opacity:"0.4"}),e.jsx("circle",{cx:"30",cy:"44",r:"3",fill:"#D4A0B0",opacity:"0.3"}),e.jsx("circle",{cx:"48",cy:"38",r:"2.5",fill:"#C4B090",opacity:"0.28"})]})})}function Ue({variant:a,hasLetters:t,onClick:r}){const u=a==="B"?[{bg:"#E8D5A8",flap:"#D0B86E",transform:"rotate(-7deg) translate(-4px, 8px)",z:1,shadow:"0 8px 28px rgba(90,50,20,0.28)"},{bg:"#EDE0B8",flap:"#D9C078",transform:"rotate(3deg) translate(2px, 3px)",z:2,shadow:"0 8px 28px rgba(90,50,20,0.22)"},{bg:"#F7E8C4",flap:"#E8D090",transform:"rotate(-1.5deg)",z:3,shadow:"0 8px 28px rgba(90,50,20,0.18)"}]:[{bg:"#2A2448",flap:"#3C3870",transform:"rotate(-7deg) translate(-4px, 8px)",z:1,shadow:"0 8px 28px rgba(0,0,0,0.55),0 0 20px rgba(100,80,200,0.12)"},{bg:"#332D5C",flap:"#4A4488",transform:"rotate(3deg) translate(2px, 3px)",z:2,shadow:"0 8px 28px rgba(0,0,0,0.5),0 0 20px rgba(100,80,200,0.1)"},{bg:"#3D3670",flap:"#5A52A0",transform:"rotate(-1.5deg)",z:3,shadow:"0 8px 32px rgba(0,0,0,0.55),0 0 30px rgba(120,100,220,0.2),inset 0 1px 0 rgba(255,255,255,0.08)"}];return e.jsxs("button",{type:"button",onClick:t?r:void 0,disabled:!t,"aria-label":"éš¨æ©ŸæŠ½ä¸€å°ä¿¡",className:"active:scale-95",style:{position:"relative",width:200,height:150,background:"none",border:"none",padding:0,cursor:t?"pointer":"default",transition:"transform 0.18s"},children:[u.map((d,l)=>e.jsxs("div",{style:{position:"absolute",top:"50%",left:"50%",width:180,height:124,marginTop:-62,marginLeft:-90,borderRadius:10,overflow:"hidden",background:d.bg,transform:d.transform,zIndex:d.z,boxShadow:d.shadow},children:[e.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,height:"55%",background:d.flap,clipPath:"polygon(0 0,100% 0,50% 100%)"}}),e.jsx("div",{style:{position:"absolute",bottom:0,left:0,right:0,height:"58%",background:d.flap,clipPath:"polygon(0 100%,50% 0,100% 100%)"}}),e.jsx("div",{style:{position:"absolute",top:0,bottom:0,left:0,width:"50%",background:d.flap,opacity:.45,clipPath:"polygon(0 0,100% 50%,0 100%)"}}),e.jsx("div",{style:{position:"absolute",top:0,bottom:0,right:0,width:"50%",background:d.flap,opacity:.4,clipPath:"polygon(0 50%,100% 0,100% 100%)"}})]},`${a}-env-${l}`)),e.jsx("div",{style:{position:"absolute",top:"50%",left:"50%",width:42,height:42,transform:"translate(-50%,-50%)",zIndex:10,borderRadius:"50%",background:a==="B"?"radial-gradient(circle at 36% 32%, #D96858, #A84030 60%, #8A3028)":"radial-gradient(circle at 36% 32%, #D4C060, #C0A030 60%, #A08820)",boxShadow:a==="B"?"0 3px 10px rgba(168,64,48,0.55), inset 0 1px 0 rgba(255,255,255,0.15)":"0 3px 14px rgba(200,160,40,0.45), 0 0 20px rgba(200,160,40,0.2), inset 0 1px 0 rgba(255,255,255,0.25)",display:"flex",alignItems:"center",justifyContent:"center",color:"rgba(255,255,255,0.9)",fontSize:15},children:a==="B"?"â™¡":"âœ¦"}),!t&&e.jsx("div",{style:{position:"absolute",inset:0,borderRadius:12,background:"rgba(0,0,0,0.25)",zIndex:20}})]})}function Ve({letters:a,dateMap:t,uiVariant:r,variants:p,isReading:u,chibiSrc:d,favoritedNames:l,showFavoritesOnly:h,showSheet:j,onShowSheet:N,onHideSheet:v,onPickRandom:n,onOpenLetter:x,onToggleFavoritesOnly:g,onVariantChange:y,onExit:_}){const c=a.length>0,i=r==="B",C=p.filter(k=>k!=="A");return e.jsxs("div",{className:"absolute inset-0 overflow-hidden",style:{background:i?"radial-gradient(ellipse 100% 80% at 30% 10%, #fff8ef 0%, #fdf0dd 50%, #f8e8cc 100%)":"radial-gradient(ellipse 80% 60% at 30% 0%, #1e1840 0%, #0d0b1e 55%, #09071a 100%)"},children:[!i&&e.jsx(Pe,{}),i?e.jsx(Ye,{faded:!c}):e.jsx(We,{faded:!c}),i&&e.jsx(Ke,{faded:!c}),!i&&c&&e.jsx(Qe,{}),_&&e.jsx("button",{type:"button",onClick:_,"aria-label":"è¿”å›ž",className:"absolute left-4 top-4 z-20 flex h-9 w-9 items-center justify-center transition active:opacity-60",style:{background:"transparent",border:"none",padding:0,appearance:"none",WebkitAppearance:"none",WebkitTapHighlightColor:"transparent",outline:"none",boxShadow:"none",color:i?"#7D6240":"rgba(236,230,255,0.84)",textShadow:i?"0 1px 3px rgba(255,255,255,0.45)":"0 1px 4px rgba(0,0,0,0.35)"},children:e.jsx("span",{"aria-hidden":"true",style:{fontSize:28,lineHeight:1,transform:"translateX(-1px)"},children:"â€¹"})}),e.jsxs("div",{className:"pointer-events-none absolute left-1/2 top-[18px] z-10 -translate-x-1/2 text-center",children:[e.jsx("p",{className:"text-[9px] uppercase",style:{letterSpacing:"0.32em",color:i?"#B8A080":"rgba(180,160,230,0.5)"},children:"LETTERS"}),e.jsx("p",{className:"mt-0.5 text-base",style:{color:i?"#3D2414":"rgba(240,235,255,0.9)"},children:"æƒ…æ›¸"})]}),!j&&!u&&e.jsx("div",{className:"absolute right-4 top-[106px] z-20",children:e.jsx("div",{className:"flex items-center gap-1 rounded-full px-1.5 py-1",style:{border:i?"1px solid rgba(180,140,90,0.24)":"1px solid rgba(255,255,255,0.16)",background:i?"rgba(255,255,255,0.72)":"rgba(14,11,30,0.6)",backdropFilter:"blur(6px)"},children:C.map(k=>{const m=r===k,o=k==="B"?"I":"II";return e.jsx("button",{type:"button",onClick:()=>y(k),className:"rounded-full px-2.5 py-1 text-[11px] leading-none transition active:scale-95",style:{color:i?m?"#4A3520":"#94765D":m?"#F5EEFF":"rgba(210,198,242,0.74)",background:m?i?"rgba(236,208,168,0.92)":"rgba(120,106,210,0.45)":"transparent",fontWeight:m?700:500},children:o},`preview-switch-${k}`)})})}),c?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"absolute left-1/2 z-10 -translate-x-1/2",style:{top:i?"22%":"23%"},children:e.jsx(Ue,{variant:r,hasLetters:c,onClick:n})}),e.jsx("div",{className:"pointer-events-none absolute left-1/2 z-10 -translate-x-1/2 text-center",style:{top:i?"45%":"46%"},children:e.jsx("p",{style:{fontSize:64,lineHeight:1,fontWeight:800,letterSpacing:-3,color:i?"#3D2414":"rgba(240,235,255,0.95)",textShadow:i?"0 2px 0 rgba(200,140,80,0.25)":"0 0 40px rgba(180,150,255,0.35),0 2px 0 rgba(0,0,0,0.4)"},children:a.length})})]}):e.jsxs("div",{className:"absolute left-1/2 z-10 w-full -translate-x-1/2 px-5 text-center",style:{top:"24%"},children:[e.jsxs("div",{className:"mx-auto h-[110px] w-[160px] overflow-hidden rounded-lg border",style:{background:i?"#EEE2C8":"#1E1C40",borderColor:i?"rgba(180,140,80,0.3)":"rgba(120,100,200,0.2)",boxShadow:i?"0 6px 20px rgba(90,50,20,0.18)":"0 6px 20px rgba(0,0,0,0.45), 0 0 20px rgba(100,80,200,0.12)",position:"relative"},children:[e.jsx("div",{style:{position:"absolute",inset:0,clipPath:"polygon(0 0,100% 0,50% 100%)",height:"55%",background:i?"#DFD0A8":"#2E2A60"}}),e.jsx("div",{style:{position:"absolute",inset:0,top:"42%",clipPath:"polygon(0 100%,50% 0,100% 100%)",background:i?"#D8C898":"#282450"}}),e.jsx("div",{style:{position:"absolute",inset:0,display:"flex",alignItems:"center",justifyContent:"center",fontSize:32,opacity:i?.22:.15,color:i?"#3D2414":"#E8E0FF"},children:"âœ‰"})]}),e.jsx("p",{className:"mt-9 text-[22px] font-bold",style:{color:i?"#3D2414":"rgba(230,225,255,0.9)"},children:"ä¿¡ç®±é‚„æ˜¯ç©ºçš„"}),e.jsxs("p",{className:"mt-2 text-[13px]",style:{color:i?"#B8A080":"rgba(180,160,220,0.5)",lineHeight:1.6},children:["é‚„æ²’æœ‰æ”¶åˆ°æƒ…æ›¸ã€‚",`
`,"åŽ»è¨­å®šé åŒ¯å…¥ç¬¬ä¸€å°å§ã€‚"]})]}),i&&c&&e.jsxs("div",{className:"pointer-events-none absolute bottom-7 left-5 z-[7] flex items-end gap-2",children:[e.jsxs("div",{className:"flex h-[46px] w-[38px] flex-col items-center justify-center gap-0.5 rounded border-2 bg-white/60",style:{borderColor:"rgba(180,140,80,0.4)"},children:[e.jsx("span",{className:"text-base",children:"ðŸŒ¸"}),e.jsx("span",{className:"text-[7px]",style:{color:"#B8A080",letterSpacing:"0.05em"},children:"LOVE"})]}),e.jsxs("div",{className:"flex h-[46px] w-[38px] flex-col items-center justify-center gap-0.5 rounded border-2 bg-white/60",style:{borderColor:"rgba(180,140,80,0.4)"},children:[e.jsx("span",{className:"text-base",children:"âœ‰"}),e.jsx("span",{className:"text-[7px]",style:{color:"#B8A080",letterSpacing:"0.05em"},children:"MAIL"})]}),e.jsxs("div",{className:"flex h-[50px] w-[50px] flex-col items-center justify-center gap-0.5 rounded-full border-2",style:{borderColor:"rgba(168,64,48,0.3)",opacity:.65},children:[e.jsx("span",{className:"text-[6px] font-semibold",style:{color:"#A84030"},children:"2024"}),e.jsx("span",{className:"text-[6px] font-semibold",style:{color:"#A84030"},children:"TO YOU"}),e.jsx("span",{className:"text-[6px] font-semibold",style:{color:"#A84030"},children:"â™¡"})]})]}),d&&e.jsx("div",{className:"pointer-events-none absolute inset-x-0 bottom-0 z-10 flex items-end justify-end pb-4 pr-5",children:e.jsx("button",{type:"button",onClick:c?N:void 0,disabled:!c,className:"pointer-events-auto transition active:scale-90",style:{cursor:c?"pointer":"default"},children:e.jsxs("div",{className:"relative mx-auto w-36",children:[e.jsx("div",{className:"pointer-events-none absolute z-[2] rounded-[14px] px-3 py-2 text-[11px]",style:{right:"calc(100% + 16px)",top:c?"56%":"54%",transform:"translateY(-50%)",width:112,borderRadius:"14px 14px 2px 14px",color:i?"#6B5040":"rgba(220,210,255,0.85)",lineHeight:1.45,background:c?i?"rgba(255,255,255,0.88)":"rgba(255,255,255,0.08)":i?"rgba(255,255,255,0.82)":"rgba(255,255,255,0.06)",border:i?"none":"1px solid rgba(255,255,255,0.12)",boxShadow:i?"0 3px 12px rgba(90,50,20,0.14)":"none",backdropFilter:i?"none":"blur(8px)",textAlign:"center"},children:c?"æ¯å°éƒ½æœ‰ä½ ã€‚":"ç­‰ä¿¡çš„æ„Ÿè¦ºâ€¦"}),e.jsx("img",{src:d,alt:"",draggable:!1,className:"calendar-chibi mx-auto w-full select-none drop-shadow-md"})]})})}),j&&e.jsx(Je,{letters:a,dateMap:t,uiVariant:r,onClose:v,onOpen:x,favoritedNames:l,showFavoritesOnly:h,onToggleFavoritesOnly:g})]})}function Je({letters:a,dateMap:t,uiVariant:r,onClose:p,onOpen:u,favoritedNames:d,showFavoritesOnly:l,onToggleFavoritesOnly:h}){const[j,N]=w.useState(""),v=j.trim().toLowerCase(),n=r==="B",x=a.filter(c=>d.has(c.name)).length,g=w.useMemo(()=>{const c=l?a.filter(i=>d.has(i.name)):a;return v?c.filter(i=>`${I(i.name)}
${i.content??""}`.toLowerCase().includes(v)):c},[d,a,v,l]),y=n?"â™¥":"â˜…",_=n?"â™¡":"â˜†";return e.jsxs("div",{className:"absolute inset-0",style:{zIndex:24},children:[e.jsx("div",{className:"absolute inset-0",style:{background:n?"rgba(30,14,6,0.45)":"rgba(5,3,15,0.65)"},onClick:p}),e.jsxs("div",{className:"absolute bottom-0 left-0 right-0 flex max-h-[72%] flex-col overflow-hidden",style:{borderRadius:"26px 26px 0 0",background:n?"linear-gradient(170deg, #fdf6e8 0%, #faf0da 100%)":"rgba(14,11,30,0.93)",backdropFilter:n?"none":"blur(20px)",border:n?"none":"1px solid rgba(255,255,255,0.06)",borderBottom:"none",boxShadow:n?"0 -8px 32px rgba(60,30,10,0.22)":"0 -8px 40px rgba(0,0,0,0.5)"},children:[e.jsx("div",{className:"flex shrink-0 justify-center pb-[14px] pt-3",children:e.jsx("div",{className:"h-1 w-10 rounded-full",style:{background:n?"rgba(180,140,80,0.35)":"rgba(255,255,255,0.15)"}})}),e.jsx("div",{className:"shrink-0 px-[22px] pb-3",style:{borderBottom:n?"1px solid rgba(180,140,80,0.18)":"1px solid rgba(255,255,255,0.06)"},children:e.jsxs("div",{className:"flex items-baseline justify-between",children:[e.jsx("span",{className:"text-[15px] font-semibold",style:{color:n?"#3D2414":"rgba(230,225,255,0.9)"},children:l?`${y} æ”¶è—ä¿¡ä»¶`:"å…¨éƒ¨ä¿¡ä»¶"}),e.jsxs("span",{className:"text-xs",style:{color:n?"#B8A080":"rgba(180,160,220,0.5)"},children:[g.length," å°"]})]})}),e.jsxs("div",{className:"flex shrink-0 gap-2 px-[22px] py-2.5",style:{borderBottom:n?"1px solid rgba(180,140,80,0.1)":"1px solid rgba(255,255,255,0.04)"},children:[e.jsx("button",{type:"button",onClick:()=>{l&&h()},className:"rounded-[20px] px-[14px] py-[5px] text-xs font-medium transition active:scale-95",style:{border:l?n?"1px solid rgba(0,0,0,0.08)":"1px solid rgba(255,255,255,0.08)":n?"1px solid rgba(168,64,48,0.28)":"1px solid rgba(200,160,80,0.28)",background:l?n?"rgba(0,0,0,0.04)":"rgba(255,255,255,0.04)":n?"rgba(168,64,48,0.12)":"rgba(200,160,80,0.12)",color:l?n?"#9A8070":"rgba(180,160,220,0.5)":n?"#A84030":"#E8C870"},children:"å…¨éƒ¨"}),e.jsxs("button",{type:"button",onClick:()=>{l||h()},className:"rounded-[20px] px-[14px] py-[5px] text-xs font-medium transition active:scale-95",style:{border:l?n?"1px solid rgba(168,64,48,0.28)":"1px solid rgba(200,160,80,0.28)":n?"1px solid rgba(0,0,0,0.08)":"1px solid rgba(255,255,255,0.08)",background:l?n?"rgba(168,64,48,0.12)":"rgba(200,160,80,0.12)":n?"rgba(0,0,0,0.04)":"rgba(255,255,255,0.04)",color:l?n?"#A84030":"#E8C870":n?"#9A8070":"rgba(180,160,220,0.5)"},children:[y," æ”¶è— ",x]})]}),e.jsx("div",{className:"shrink-0 px-[22px] pb-2",style:{borderBottom:n?"1px solid rgba(180,140,80,0.1)":"1px solid rgba(255,255,255,0.04)"},children:e.jsx("input",{value:j,onChange:c=>N(c.target.value),placeholder:"æœå°‹æ¨™é¡Œæˆ–å…§å®¹","aria-label":"æœå°‹ä¿¡ä»¶",className:"w-full rounded-[16px] px-3 py-1.5 text-xs outline-none",style:{border:n?"1px solid rgba(168,64,48,0.2)":"1px solid rgba(255,255,255,0.14)",background:n?"rgba(255,255,255,0.58)":"rgba(255,255,255,0.06)",color:n?"#3D2414":"rgba(230,225,255,0.9)"}})}),e.jsxs("div",{className:"min-h-0 flex-1 overflow-y-auto py-2",children:[g.length===0&&e.jsx("p",{className:"px-[22px] py-6 text-sm",style:{color:n?"#9A8070":"rgba(180,160,220,0.5)"},children:v?"æ²’æœ‰ç¬¦åˆæœå°‹çš„ä¿¡ä»¶":"é‚„æ²’æœ‰æ”¶è—çš„ä¿¡ä»¶"}),g.map((c,i)=>{const C=d.has(c.name);return e.jsxs("button",{type:"button",onClick:()=>u(c),className:"flex w-full items-center gap-3 px-[22px] py-[13px] text-left transition active:opacity-60",style:{borderBottom:i===g.length-1?"none":n?"1px solid rgba(180,140,80,0.1)":"1px solid rgba(255,255,255,0.04)"},children:[e.jsx("span",{className:"relative h-[26px] w-9 shrink-0 overflow-hidden rounded",style:{background:n?"linear-gradient(140deg,#f0dab2,#e8cc98)":"linear-gradient(140deg,#2a2450,#3a3268)",border:n?"1px solid rgba(180,140,80,0.25)":"1px solid rgba(120,100,200,0.25)"},children:e.jsx("span",{className:"absolute left-0 right-0 top-0 h-[55%]",style:{background:n?"rgba(0,0,0,0.08)":"rgba(0,0,0,0.15)",clipPath:"polygon(0 0,100% 0,50% 100%)"}})}),e.jsxs("span",{className:"min-w-0 flex-1",children:[e.jsx("span",{className:"block truncate text-[13px] font-medium",style:{color:n?"#3D2414":"rgba(230,225,255,0.85)"},children:I(c.name)}),e.jsx("span",{className:"mt-0.5 block text-[10px]",style:{color:n?"#B8A080":"rgba(180,160,220,0.45)"},children:V(t.get(c.name)??z(c.importedAt))})]}),e.jsx("span",{className:"text-base",style:{color:C?n?"#C4697A":"#E8C060":n?"rgba(0,0,0,0.15)":"rgba(255,255,255,0.12)"},children:C?y:_})]},`${c.name}-${c.importedAt}-${i}`)})]})]})]})}function Xe({letter:a,uiVariant:t,animKey:r,hasMultiple:p,letterFontFamily:u,rerollChibiSrc:d,isFavorited:l,readingFontSize:h,readingLineHeight:j,readingFontMode:N,onOpenReadingSettings:v,onFavorite:n,onPickRandom:x,onClose:g}){const y=w.useRef(null),[_,c]=w.useState(!1),i=t==="B";w.useEffect(()=>{y.current?.scrollTo({top:0})},[r]);function C(){c(!0),setTimeout(()=>c(!1),320),n?.()}const m=N==="letter"&&!!u.trim()?u:"var(--app-font-family, -apple-system, BlinkMacSystemFont, 'Helvetica Neue', sans-serif)",o=I(a.name),f=p?"å†æŠ½ä¸€å°":"å†çœ‹ä¸€æ¬¡",B=d||G[0]||$()[0]||"",s=i?{overlay:"radial-gradient(ellipse 80% 60% at 20% 85%, rgba(120,60,20,0.55) 0%, rgba(20,8,2,0.80) 100%)",actionBarBg:"transparent",actionBarBorder:"none",iconMuted:"rgba(255,255,255,0.38)",labelMuted:"rgba(255,255,255,0.35)",favOn:"#D4616E",favoriteOnIcon:"â™¥",favoriteOffIcon:"â™¡",paperShadow:"0 20px 60px rgba(0,0,0,0.55), 0 4px 20px rgba(0,0,0,0.3), inset 0 0 0 1px rgba(190,150,80,0.18), inset 0 1px 0 rgba(255,255,255,0.9)",paperBackground:"linear-gradient(176deg, #fffef7 0%, #f7f1df 44%, #efe4c9 100%)",paperLineColor:"rgba(152,126,72,0.11)",paperHeaderBorder:"rgba(166,134,78,0.2)",paperLabelColor:"#a3824b",paperTitleColor:"#5a4120",paperContentColor:"#4c3820",paperFooterStrong:"rgba(166,134,78,0.22)",paperFooterSoft:"rgba(166,134,78,0.1)",chibiCardBg:"linear-gradient(145deg, #fde9d7, #f0ddd0)",chibiCardBorder:"1px solid rgba(255,255,255,0.16)",chibiCardShadow:"0 8px 24px rgba(0,0,0,0.32), 0 2px 8px rgba(0,0,0,0.18)",floatLabelColor:"rgba(255,255,255,0.3)"}:{overlay:"radial-gradient(ellipse 60% 50% at 50% 40%,rgba(60,50,120,0.4) 0%,rgba(8,6,20,0.92) 100%)",actionBarBg:"rgba(8,6,20,0.85)",actionBarBorder:"1px solid rgba(255,255,255,0.04)",iconMuted:"rgba(255,255,255,0.3)",labelMuted:"rgba(180,160,220,0.4)",favOn:"#E8C060",favoriteOnIcon:"â˜…",favoriteOffIcon:"â˜†",paperShadow:"0 20px 80px rgba(0,0,0,0.7), 0 4px 30px rgba(0,0,0,0.5), 0 0 60px rgba(200,160,80,0.08), inset 0 0 0 1px rgba(200,160,80,0.14), inset 0 1px 0 rgba(255,255,255,0.85)",paperBackground:"linear-gradient(176deg, #f8f7ff 0%, #eee9ff 44%, #e3dcf8 100%)",paperLineColor:"rgba(114, 92, 168, 0.12)",paperHeaderBorder:"rgba(124,100,184,0.2)",paperLabelColor:"#7d67b8",paperTitleColor:"#3b2f66",paperContentColor:"#342a5c",paperFooterStrong:"rgba(124,100,184,0.22)",paperFooterSoft:"rgba(124,100,184,0.1)",chibiCardBg:"linear-gradient(145deg, rgba(120,100,200,0.3), rgba(80,60,160,0.2))",chibiCardBorder:"1px solid rgba(255,255,255,0.1)",chibiCardShadow:"0 8px 24px rgba(0,0,0,0.55), 0 0 20px rgba(120,100,220,0.2)",floatLabelColor:"rgba(180,160,220,0.35)"};return e.jsxs("div",{className:"absolute inset-0",style:{zIndex:15},children:[e.jsx("div",{className:"absolute inset-0",style:{background:s.overlay}}),e.jsxs("div",{className:"letter-paper-reveal absolute flex flex-col overflow-hidden rounded-[22px]",style:{top:14,left:14,right:14,bottom:80,background:s.paperBackground,boxShadow:s.paperShadow,zIndex:12},children:[e.jsx("div",{className:"pointer-events-none absolute inset-0 rounded-[22px]",style:{backgroundImage:`repeating-linear-gradient(to bottom, transparent, transparent 32px, ${s.paperLineColor} 32px, ${s.paperLineColor} 33px)`,backgroundPositionY:82}}),e.jsx("button",{type:"button",onClick:v,"aria-label":"é–‹å•Ÿé–±è®€æŽ’ç‰ˆè¨­å®š",className:"absolute right-5 top-[19px] z-[14] text-[17px] leading-none transition active:scale-95",style:{color:s.paperLabelColor,background:"transparent",border:"none",padding:0,letterSpacing:"0.02em"},children:"Aa"}),e.jsxs("div",{className:"shrink-0 border-b px-[22px] pb-[14px] pt-[18px]",style:{borderColor:s.paperHeaderBorder},children:[e.jsx("p",{className:"text-[9px] uppercase",style:{color:s.paperLabelColor,letterSpacing:"0.32em"},children:"Letter Â· æƒ…æ›¸"}),e.jsx("p",{className:"mt-1 truncate text-[17px]",style:{color:s.paperTitleColor,fontFamily:m,lineHeight:1.3},children:o})]}),e.jsx("div",{ref:y,className:"min-h-0 flex-1 overflow-y-auto px-[22px] py-[18px]",children:e.jsx("p",{className:"letter-content-fade whitespace-pre-wrap",style:{fontSize:h,lineHeight:j,color:s.paperContentColor,fontFamily:m},children:a.content})}),e.jsxs("div",{className:"shrink-0 px-[22px] pb-[14px] pt-[10px]",children:[e.jsx("div",{className:"mb-[5px] h-px",style:{background:s.paperFooterStrong}}),e.jsx("div",{className:"h-px",style:{background:s.paperFooterSoft}})]})]},r),e.jsxs("button",{type:"button",onClick:x,"aria-label":f,className:"absolute left-1/2 z-[18] flex -translate-x-1/2 flex-col items-center gap-[3px] transition active:opacity-65",style:{bottom:18},children:[B?e.jsx("img",{src:B,alt:"",draggable:!1,className:"calendar-chibi w-20 select-none drop-shadow"}):e.jsx("span",{className:"grid h-24 w-20 place-items-center rounded-2xl text-[42px]",style:{background:s.chibiCardBg,border:s.chibiCardBorder,boxShadow:s.chibiCardShadow},children:"ðŸ§¸"}),e.jsx("span",{className:"text-[9px]",style:{color:s.floatLabelColor,letterSpacing:"0.06em"},children:f})]}),e.jsxs("div",{className:"absolute bottom-0 left-0 right-0 z-[13] flex items-center justify-around px-5",style:{height:80,background:s.actionBarBg,backdropFilter:i?"none":"blur(12px)",borderTop:s.actionBarBorder},children:[e.jsxs("button",{type:"button",onClick:C,"aria-label":l?"å–æ¶ˆæ”¶è—":"æ”¶è—",className:"flex min-w-14 flex-col items-center gap-1",style:{transform:_?"scale(1.35)":"scale(1)",transition:"transform 0.18s cubic-bezier(0.34,1.56,0.64,1)"},children:[e.jsx("span",{style:{fontSize:22,color:l?s.favOn:s.iconMuted},children:l?s.favoriteOnIcon:s.favoriteOffIcon}),e.jsx("span",{className:"text-[10px]",style:{color:s.labelMuted,letterSpacing:"0.04em"},children:"æ”¶è—"})]}),e.jsx("div",{style:{minWidth:80}}),e.jsxs("button",{type:"button",onClick:g,"aria-label":"æ”¶èµ·",className:"flex min-w-14 flex-col items-center gap-1 transition active:opacity-60",children:[e.jsx("span",{style:{fontSize:22,color:s.iconMuted},children:"âœ•"}),e.jsx("span",{className:"text-[10px]",style:{color:s.labelMuted,letterSpacing:"0.04em"},children:"æ”¶èµ·"})]})]})]})}function Ze({letters:a,dateMap:t,uiVariant:r,onClose:p,onOpen:u,favoritedNames:d,showFavoritesOnly:l,onToggleFavoritesOnly:h}){const[j,N]=w.useState(""),v=j.trim().toLowerCase(),n=w.useMemo(()=>{const g=l?a.filter(y=>d.has(y.name)):a;return v?g.filter(y=>`${I(y.name)}
${y.content??""}`.toLowerCase().includes(v)):g},[d,a,v,l]),x=r==="A"?{backdrop:"rgba(0,0,0,0.5)",panelBg:"#3A1E0F",panelBorder:"1px solid rgba(255,255,255,0.08)",handle:"rgba(255,255,255,0.16)",title:"#C9A87A",toggleBorder:"1px solid rgba(255,255,255,0.2)",toggleOnText:"#F7EBD2",toggleOffText:"#D1B992",toggleOnBg:"rgba(255,255,255,0.11)",toggleOffBg:"rgba(0,0,0,0.14)",emptyText:"#A88B62",rowDivider:"rgba(255,255,255,0.05)",rowIcon:"#8B6B3C",rowTitle:"#F0DFB8",rowDate:"#8B7355",rowFavorite:"#D98A95"}:r==="B"?{backdrop:"rgba(34,16,26,0.52)",panelBg:"linear-gradient(170deg, #fef8fb 0%, #f8eaf1 100%)",panelBorder:"1px solid rgba(208,154,178,0.34)",handle:"rgba(156,97,122,0.36)",title:"#A16C86",toggleBorder:"1px solid rgba(156,97,122,0.28)",toggleOnText:"#8A4D68",toggleOffText:"#A47D91",toggleOnBg:"rgba(224,138,168,0.18)",toggleOffBg:"rgba(255,255,255,0.64)",emptyText:"#B28EA1",rowDivider:"rgba(162,112,137,0.18)",rowIcon:"#B86F90",rowTitle:"#5F3B4D",rowDate:"#A98A9B",rowFavorite:"#C4697A"}:{backdrop:"rgba(8,18,30,0.58)",panelBg:"linear-gradient(170deg, #edf5fb 0%, #dce9f5 100%)",panelBorder:"1px solid rgba(118,156,189,0.35)",handle:"rgba(93,130,163,0.36)",title:"#6388AC",toggleBorder:"1px solid rgba(93,130,163,0.28)",toggleOnText:"#365E87",toggleOffText:"#7697B6",toggleOnBg:"rgba(111,152,192,0.2)",toggleOffBg:"rgba(255,255,255,0.64)",emptyText:"#6E8EAD",rowDivider:"rgba(112,148,179,0.2)",rowIcon:"#5C84A8",rowTitle:"#2E4D6C",rowDate:"#6E8EAD",rowFavorite:"#6F98C0"};return e.jsxs("div",{className:"absolute inset-0",style:{zIndex:20},children:[e.jsx("div",{className:"absolute inset-0",style:{background:x.backdrop},onClick:p}),e.jsxs("div",{className:"absolute bottom-0 left-0 right-0 flex flex-col overflow-hidden",style:{borderRadius:"22px 22px 0 0",background:x.panelBg,border:x.panelBorder,borderBottom:"none",maxHeight:"65%"},children:[e.jsx("div",{className:"flex shrink-0 justify-center pb-2 pt-3",children:e.jsx("div",{className:"h-1 w-10 rounded-full",style:{background:x.handle}})}),e.jsxs("div",{className:"shrink-0 px-5 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsx("p",{className:"text-xs",style:{color:x.title,letterSpacing:"0.12em"},children:l?"æ”¶è—ä¿¡ä»¶":"å…¨éƒ¨ä¿¡ä»¶"}),e.jsx("button",{type:"button",onClick:h,className:"rounded-full px-3 py-1 text-xs transition active:scale-95",style:{border:x.toggleBorder,color:l?x.toggleOnText:x.toggleOffText,background:l?x.toggleOnBg:x.toggleOffBg},children:l?"â™¥ åªçœ‹æ”¶è—":"â™¡ å…¨éƒ¨"})]}),e.jsx("input",{value:j,onChange:g=>N(g.target.value),placeholder:"æœå°‹æ¨™é¡Œæˆ–å…§å®¹","aria-label":"æœå°‹ä¿¡ä»¶",className:"mt-2 w-full rounded-full px-3 py-1.5 text-xs outline-none",style:{border:x.toggleBorder,color:x.rowTitle,background:r==="A"?"rgba(0,0,0,0.16)":"rgba(255,255,255,0.66)"}})]}),e.jsxs("div",{className:"min-h-0 flex-1 overflow-y-auto",children:[n.length===0&&e.jsx("p",{className:"px-5 py-8 text-sm",style:{color:x.emptyText},children:v?"æ²’æœ‰ç¬¦åˆæœå°‹çš„ä¿¡ä»¶":"é‚„æ²’æœ‰æ”¶è—çš„ä¿¡ä»¶"}),n.map((g,y)=>e.jsxs("button",{type:"button",onClick:()=>u(g),className:"flex w-full items-start gap-3 px-5 text-left transition active:opacity-55",style:{paddingTop:14,paddingBottom:14,borderTop:y===0?"none":`1px solid ${x.rowDivider}`,minHeight:52},children:[e.jsx("span",{style:{color:x.rowIcon,fontSize:14,marginTop:2,flexShrink:0},children:"âœ‰"}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"truncate text-sm",style:{color:x.rowTitle},children:I(g.name)}),e.jsx("p",{className:"mt-0.5 text-xs",style:{color:x.rowDate},children:V(t.get(g.name)??z(g.importedAt))})]}),d.has(g.name)&&e.jsx("span",{className:"pt-0.5 text-sm",style:{color:x.rowFavorite},children:"â™¥"})]},`${g.name}-${g.importedAt}-${y}`))]})]})]})}function qe({letter:a,uiVariant:t,animKey:r,hasMultiple:p,letterFontFamily:u,rerollChibiSrc:d,isFavorited:l,readingFontSize:h,readingLineHeight:j,readingFontMode:N,onOpenReadingSettings:v,onFavorite:n,onPickRandom:x,onClose:g}){const y=w.useRef(null),[_,c]=w.useState(!1);w.useEffect(()=>{y.current?.scrollTo({top:0})},[r]);function i(){c(!0),setTimeout(()=>c(!1),320),n?.()}const k=N==="letter"&&!!u.trim()?u:"var(--app-font-family, -apple-system, BlinkMacSystemFont, 'Helvetica Neue', sans-serif)",m=I(a.name),o=Ie(t),f=p?"å†æŠ½ä¸€å°":"å†çœ‹ä¸€æ¬¡",B=d||G[0]||$()[0]||"",s=t==="A"?{overlay:"rgba(18,8,4,0.62)",bar:"linear-gradient(to top, rgba(8,2,1,0.74), rgba(8,2,1,0.18))",iconMuted:"rgba(255,255,255,0.38)",labelMuted:"rgba(255,255,255,0.35)",closeIcon:"rgba(255,255,255,0.42)",favOn:"#D4616E",paperShadow:"0 10px 48px rgba(0,0,0,0.55), 0 2px 14px rgba(0,0,0,0.3), inset 0 0 0 1px rgba(180,140,80,0.14)",paperBackground:"linear-gradient(175deg, #fffdf7 0%, #fdf8ee 40%, #faf3e2 100%)",paperLineColor:"rgba(140,100,50,0.08)",paperBorder:"rgba(160,120,70,0.14)",paperDecoStrong:"rgba(160,120,70,0.18)",paperDecoSoft:"rgba(160,120,70,0.07)",paperLabelColor:"#B8956A",paperTitleColor:"#4A3520",paperContentColor:"#4A3520"}:t==="B"?{overlay:"rgba(36,12,24,0.56)",bar:"linear-gradient(to top, rgba(54,20,34,0.86), rgba(54,20,34,0.26))",iconMuted:"rgba(255,237,246,0.72)",labelMuted:"rgba(248,219,232,0.68)",closeIcon:"rgba(255,240,248,0.76)",favOn:"#E08AA8",paperShadow:"0 12px 56px rgba(0,0,0,0.56), 0 3px 18px rgba(0,0,0,0.34), inset 0 0 0 1px rgba(196,130,160,0.16)",paperBackground:"linear-gradient(176deg, #fff8fb 0%, #fbeff5 42%, #f6e4ed 100%)",paperLineColor:"rgba(170, 108, 136, 0.10)",paperBorder:"rgba(182, 112, 142, 0.18)",paperDecoStrong:"rgba(182, 112, 142, 0.22)",paperDecoSoft:"rgba(182, 112, 142, 0.09)",paperLabelColor:"#B67A96",paperTitleColor:"#64394d",paperContentColor:"#5a3245"}:{overlay:"rgba(10,28,44,0.56)",bar:"linear-gradient(to top, rgba(16,42,66,0.86), rgba(16,42,66,0.26))",iconMuted:"rgba(220,238,255,0.72)",labelMuted:"rgba(188,216,238,0.68)",closeIcon:"rgba(226,244,255,0.76)",favOn:"#6F98C0",paperShadow:"0 12px 56px rgba(0,0,0,0.56), 0 3px 18px rgba(0,0,0,0.34), inset 0 0 0 1px rgba(120,168,204,0.16)",paperBackground:"linear-gradient(176deg, #f8fcff 0%, #eef5ff 42%, #e3eef9 100%)",paperLineColor:"rgba(100, 140, 182, 0.10)",paperBorder:"rgba(112, 156, 196, 0.18)",paperDecoStrong:"rgba(112, 156, 196, 0.22)",paperDecoSoft:"rgba(112, 156, 196, 0.09)",paperLabelColor:"#6f95ba",paperTitleColor:"#2f4a63",paperContentColor:"#2b445d"};return e.jsxs("div",{className:"absolute inset-0",style:{zIndex:15},children:[e.jsx("div",{className:"absolute inset-0",style:{background:s.overlay}}),e.jsxs("div",{className:"letter-paper-reveal absolute flex flex-col overflow-hidden rounded-2xl",style:{top:16,left:16,right:16,bottom:86,background:s.paperBackground,boxShadow:s.paperShadow},children:[e.jsx("div",{className:"pointer-events-none absolute inset-0 rounded-2xl",style:{backgroundImage:`repeating-linear-gradient(to bottom, transparent, transparent 31px, ${s.paperLineColor} 31px, ${s.paperLineColor} 32px)`,backgroundPositionY:72}}),e.jsx("button",{type:"button",onClick:v,"aria-label":"é–‹å•Ÿé–±è®€æŽ’ç‰ˆè¨­å®š",className:"absolute right-5 top-[18px] z-[14] text-[17px] leading-none transition active:scale-95",style:{color:s.paperLabelColor,background:"transparent",border:"none",padding:0,letterSpacing:"0.02em"},children:"Aa"}),e.jsxs("div",{className:"shrink-0 px-5 py-4",style:{borderBottom:`1px solid ${s.paperBorder}`},children:[e.jsx("p",{className:"text-[10px] uppercase tracking-widest",style:{color:s.paperLabelColor},children:"Letter"}),e.jsx("p",{className:"mt-0.5 truncate text-base",style:{fontFamily:k,color:s.paperTitleColor},children:m})]}),e.jsx("div",{ref:y,className:"min-h-0 flex-1 overflow-y-auto px-6 py-5",children:e.jsx("p",{className:"letter-content-fade whitespace-pre-wrap",style:{fontFamily:k,fontSize:h,lineHeight:j,color:s.paperContentColor},children:a.content})}),e.jsxs("div",{className:"shrink-0 space-y-1.5 px-6 pb-4 pt-2",children:[e.jsx("div",{className:"h-px",style:{background:s.paperDecoStrong}}),e.jsx("div",{className:"h-px",style:{background:s.paperDecoSoft}})]})]},r),e.jsxs("div",{className:"absolute bottom-0 left-0 right-0 flex items-center justify-around",style:{height:86,paddingLeft:8,paddingRight:8,background:s.bar,backdropFilter:o?"blur(10px)":"none",borderTop:o?"1px solid rgba(255,255,255,0.06)":"none",overflow:"visible"},children:[e.jsxs("button",{type:"button",onClick:i,"aria-label":l?"å–æ¶ˆæ”¶è—":"æ”¶è—",className:"flex flex-col items-center gap-1",style:{minWidth:64,minHeight:48,transform:_?"scale(1.35)":"scale(1)",transition:"transform 0.18s cubic-bezier(0.34,1.56,0.64,1)"},children:[e.jsx("span",{style:{fontSize:24,color:l?s.favOn:s.iconMuted},children:l?"â™¥":"â™¡"}),e.jsx("span",{style:{fontSize:10,color:s.labelMuted},children:"æ”¶è—"})]}),e.jsxs("button",{type:"button",onClick:x,"aria-label":f,className:"flex flex-col items-center gap-1 transition active:opacity-55",style:{minWidth:64,minHeight:48,transform:"translateY(-4px)"},children:[B?e.jsx("img",{src:B,alt:"",draggable:!1,className:"calendar-chibi w-20 select-none drop-shadow"}):e.jsx("span",{style:{fontSize:22,color:s.iconMuted},children:"âœ‰"}),e.jsx("span",{style:{fontSize:10,color:s.labelMuted},children:f})]}),e.jsxs("button",{type:"button",onClick:g,"aria-label":"æ”¶èµ·",className:"flex flex-col items-center gap-1 transition active:opacity-55",style:{minWidth:64,minHeight:48},children:[e.jsx("span",{style:{fontSize:24,color:s.closeIcon},children:"âœ•"}),e.jsx("span",{style:{fontSize:10,color:s.labelMuted},children:"æ”¶èµ·"})]})]})]})}export{tt as LetterPage};
