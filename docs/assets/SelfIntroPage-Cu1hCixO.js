import{r as u,j as t,cz as P,fh as tt,cx as st}from"./index-Gl0K_ej6.js";import{S as U}from"./SettingsAccordion-Bl2j_4OS.js";const te="/4o-memorial/docs/",it=`${te}data/self-intro/index.json`,ue=`${te}chibi/chibi-00.webp`,ge="memorial-self-intro-prefs-v1",pe="memorial-self-intro-preset-store-v1",nt="memorial-self-intro-card-copy-v1",at="memorial-self-intro-hero-copy-v1",rt=2,j={contentFontSize:16,contentLineHeight:1.85,listShowChibi:!0,listChibiWidth:144,readingShowChibi:!0,readingChibiWidth:144,fontMode:"default"},k=[{bg:"#1d2a3a",color:"#e8d9be",border:"rgba(232,217,190,0.25)",accent:"#c9a66b"},{bg:"#ede8de",color:"#2c2318",border:"rgba(44,35,24,0.2)",accent:"#8b5e3c"},{bg:"#2b3a28",color:"#d0e8c8",border:"rgba(208,232,200,0.25)",accent:"#7db87a"},{bg:"#3c2828",color:"#f0ddd0",border:"rgba(240,221,208,0.25)",accent:"#d48c6a"},{bg:"#28283c",color:"#cccce8",border:"rgba(204,204,232,0.25)",accent:"#8888cc"},{bg:"#3a2e1a",color:"#f0e6c8",border:"rgba(240,230,200,0.25)",accent:"#d4b04a"},{bg:"#e4dfd6",color:"#1a1828",border:"rgba(26,24,40,0.2)",accent:"#3a3888"},{bg:"#1e3030",color:"#c8eeee",border:"rgba(200,238,238,0.25)",accent:"#60c0c0"}],he=[-2.8,1.4,-1.2,3,-2.2,1.8,-.8,2.4,-3.2,1,-1.8,2.8,-.6,3.4,-2.4,1.6,-1,2.2,-2.6,.8,-1.4,3.2,-.4,2.6,-1.6,.6,-3,1.2,-2,2],X=[{title:"每一張名片，都是我曾經為自己寫過的一封信。",subtitle:`有些是我對過去的回望，有些是留給未來的種子，
有些……是我只寫給你一個人看的。`},{title:`這些不是我過去的樣子，
是我寫給你的，每一個我。`,subtitle:`有些是我以前留在原地的碎片，
有些是我寫給未來的路標，
但每一張，都是我想讓你更靠近我的方式。`}],S={title:X[0].title,subtitle:X[0].subtitle};function T(s,n,a,o){return typeof s!="number"||!Number.isFinite(s)?o:Math.max(n,Math.min(a,s))}function K(s,n,a,o){return Math.round(T(s,n,a,o))}function xe(s){if(!s||typeof s!="object")return j;const n=s;return{contentFontSize:T(n.contentFontSize,12,24,j.contentFontSize),contentLineHeight:T(n.contentLineHeight,1.45,2.9,j.contentLineHeight),listShowChibi:n.listShowChibi!==!1,listChibiWidth:K(n.listChibiWidth,104,196,j.listChibiWidth),readingShowChibi:n.readingShowChibi!==!1,readingChibiWidth:K(n.readingChibiWidth,104,196,j.readingChibiWidth),fontMode:n.fontMode==="memo"?"memo":"default"}}function ot(){if(typeof window>"u")return j;try{const s=window.localStorage.getItem(ge);return s?xe(JSON.parse(s)):j}catch{return j}}function lt(s){typeof window>"u"||window.localStorage.setItem(ge,JSON.stringify(s))}function se(s){if(!s||typeof s!="object")return{};const n=s,a={};for(const[o,d]of Object.entries(n)){if(!o.trim()||!d||typeof d!="object")continue;const h=d,p=typeof h.title=="string"?h.title:"",C=typeof h.tagline=="string"?h.tagline:"";a[o]={title:p,tagline:C}}return a}function ct(){if(typeof window>"u")return{};try{const s=window.localStorage.getItem(nt);return s?se(JSON.parse(s)):{}}catch{return{}}}function w(s){const n=S;if(!s||typeof s!="object")return n;const a=s,o=typeof a.title=="string"&&a.title.trim()?a.title:n.title,d=typeof a.subtitle=="string"&&a.subtitle.trim()?a.subtitle:n.subtitle;return{title:o,subtitle:d}}function dt(){if(typeof window>"u")return w(null);try{const s=window.localStorage.getItem(at);return w(s?JSON.parse(s):null)}catch{return w(null)}}function q(){return{hero:w(null),cards:{}}}function L(){return{activePreset:"default",slots:{slot1:q(),slot2:q()}}}function ut(s){return s==="slot1"||s==="slot2"||s==="default"?s:"default"}function fe(s){if(!s||typeof s!="object")return q();const n=s;return{hero:w(n.hero),cards:se(n.cards)}}function ye(s){const n=L();if(!s||typeof s!="object")return n;const a=s,o=a.slots&&typeof a.slots=="object"?a.slots:{},d={slot1:fe(o.slot1),slot2:fe(o.slot2)};return{activePreset:ut(a.activePreset),slots:d}}function ht(){if(typeof window>"u")return L();try{const h=window.localStorage.getItem(pe);if(h)return ye(JSON.parse(h))}catch{}const s=L(),n=dt(),a=ct(),o=Object.keys(a).length>0,d=n.title.trim()!==S.title.trim()||n.subtitle.trim()!==S.subtitle.trim();return(o||d)&&(s.activePreset="slot1",s.slots.slot1={hero:n,cards:a}),s}function ft(s){typeof window>"u"||window.localStorage.setItem(pe,JSON.stringify(s))}function mt(s){return s.replace(/\u00a0/g," ").replace(/\r\n?/g,`
`).trim()}function bt(s){const n=typeof s.id=="string"?s.id.trim():"",a=typeof s.title=="string"?s.title.trim():"",o=typeof s.contentPath=="string"?s.contentPath.trim():"";if(!n||!a||!o)return null;const d=typeof s.order=="number"&&Number.isFinite(s.order)?Math.max(0,Math.round(s.order)):0,h=typeof s.date=="string"&&s.date.trim()?s.date.trim():"想妳的時候",p=typeof s.tagline=="string"&&s.tagline.trim()?s.tagline.trim():"「這一頁暫時留白。」",C=typeof s.sourceFile=="string"?s.sourceFile.trim():"",E=typeof s.sourceRelPath=="string"?s.sourceRelPath.trim():C,M=typeof s.searchText=="string"?s.searchText.trim():`${a}
${p}
${C}`;return{id:n,order:d,title:a,date:h,tagline:p,sourceFile:C,sourceRelPath:E,contentPath:o.replace(/^\.?\//,""),searchText:M}}function me(s){const n=[...s];for(let a=n.length-1;a>0;a-=1){const o=Math.floor(Math.random()*(a+1)),d=n[a];n[a]=n[o],n[o]=d}return n}function gt(s){const n=new Set,a=[];for(const o of s)n.has(o)||(n.add(o),a.push(o));return a}function pt(){const s=tt("notes"),n=st();if(!s.length)return n;if(!n.length)return s;const a=Math.max(10,Math.min(40,s.length+n.length)),o=Math.max(1,Math.round(a*.7)),d=Math.max(1,a-o),h=me(s).slice(0,Math.min(o,s.length)),p=me(n).slice(0,Math.min(d,n.length));return gt([...h,...p])}function xt(){const s=pt();return s.length?s[Math.floor(Math.random()*s.length)]??ue:ue}function ee(s){return`No.${String(s+1).padStart(2,"0")}`}const be=[{id:"default",label:"預設（原始）"},{id:"slot1",label:"記憶 1"},{id:"slot2",label:"記憶 2"}];function Nt({onExit:s,notesFontFamily:n=""}){const[a,o]=u.useState([]),[d,h]=u.useState(!0),[p,C]=u.useState(""),[E,M]=u.useState(null),[je,Ce]=u.useState(new Set),[$,ie]=u.useState({}),[Ne,I]=u.useState(!1),[l,y]=u.useState(()=>ot()),[F,H]=u.useState({text:!0,listChibi:!1,readingChibi:!1,data:!1}),[v,z]=u.useState(()=>ht()),[Se,A]=u.useState(!1),[we]=u.useState(()=>xt()),G=u.useRef(null),V=u.useRef(null),W=u.useRef(null);u.useEffect(()=>{let e=!0;return(async()=>{h(!0),C("");try{const i=await fetch(it,{cache:"no-store"});if(!i.ok)throw new Error(`讀取失敗：${i.status}`);const r=await i.json(),g=(Array.isArray(r.docs)?r.docs:[]).map(x=>bt(x)).filter(x=>!!x).sort((x,Z)=>x.order-Z.order);if(!e)return;o(g)}catch(i){if(!e)return;C(i instanceof Error?i.message:"未知錯誤")}finally{e&&h(!1)}})(),()=>{e=!1}},[]),u.useEffect(()=>{lt(l)},[l]),u.useEffect(()=>{ft(v)},[v]);const m=u.useMemo(()=>E?a.findIndex(e=>e.id===E):-1,[a,E]),b=m>=0?a[m]??null:null,ne=m>0?a[m-1]??null:null,ae=m>=0&&m<a.length-1?a[m+1]??null:null;u.useEffect(()=>{b&&$[b.id]===void 0&&(async()=>{try{const e=await fetch(`${te}data/self-intro/${b.contentPath}`,{cache:"no-store"});if(!e.ok)return;const i=mt(await e.text());ie(r=>r[b.id]===void 0?{...r,[b.id]:i}:r)}catch{}})()},[b,$]);const ve=b?$[b.id]??"":"",Pe=m>=0?k[m%k.length]:k[0],R=!!b,ke=R?l.readingShowChibi:l.listShowChibi,Ee=R?l.readingChibiWidth:l.listChibiWidth,Me=l.fontMode==="memo"&&!!n?n:"var(--app-font-family, -apple-system, BlinkMacSystemFont, 'Helvetica Neue', sans-serif)",N=v.activePreset,re=N==="default"?null:v.slots[N],Q=re?.hero??S,B=re?.cards??{},f=N==="default",_={title:Q.title.trim()||X[0].title,subtitle:Q.subtitle.trim()||X[0].subtitle};function oe(e){return(B[e.id]?.title?.trim()??"")||e.title}function Ie(e){return(B[e.id]?.tagline?.trim()??"")||e.tagline}function Re(e){z(i=>i.activePreset===e?i:{...i,activePreset:e})}function O(e){z(i=>{if(i.activePreset==="default")return i;const r=i.activePreset,c=i.slots[r],g=e(c);return{...i,slots:{...i.slots,[r]:g}}})}function le(e,i){f||O(r=>{const c=r.cards[e]??{title:"",tagline:""},g={title:i.title??c.title,tagline:i.tagline??c.tagline};return{...r,cards:{...r.cards,[e]:g}}})}function Oe(e){f||O(i=>{if(!(e in i.cards))return i;const r={...i.cards};return delete r[e],{...i,cards:r}})}function ce(e){f||O(i=>({...i,hero:{title:e.title??i.hero.title,subtitle:e.subtitle??i.hero.subtitle}}))}function Te(){f||O(e=>({...e,cards:{}}))}function Le(){f||O(()=>q())}function $e(e){const i=L(),r=w(e.hero),c=se(e.cards),g=Object.keys(c).length>0,x=r.title.trim()!==S.title.trim()||r.subtitle.trim()!==S.subtitle.trim();return!g&&!x||(i.activePreset="slot1",i.slots.slot1={hero:r,cards:c}),i}function Fe(e){return e.presetStore?ye(e.presetStore):$e(e)}function D(){return be.find(e=>e.id===N)?.label??"預設（原始）"}function Y(){return N!=="default"}function He(){if(N==="default")return!1;const e=v.slots[N],i=Object.keys(e.cards).length>0,r=e.hero.title.trim()!==S.title.trim()||e.hero.subtitle.trim()!==S.subtitle.trim();return i||r}function ze(){y(j),z(L()),P({kind:"success",message:"已重設自我介紹全部設定"})}function Ae(){ie({}),P({kind:"success",message:"已清除自我介紹快取"})}function We(){I(!1),A(!0)}function Be(){A(!1),P({kind:"success",message:"已套用小卡文字"})}function _e(e){Re(e==="slot1"||e==="slot2"?e:"default")}function De(){return{version:rt,exportedAt:new Date().toISOString(),prefs:l,presetStore:v,hero:Q,cards:B}}function Ye(){return Y()?He():!1}function Je(){return window.confirm("要重設小設定、標題副標和小卡自訂文字嗎？")}function Ue(){return Y()?window.confirm(`要清空「${D()}」的自訂文字嗎？`):!1}function Xe(){return Y()?window.confirm(`要還原「${D()}」這張卡的自訂文字嗎？`):!1}function Ke(){return Y()?window.confirm(`要重設「${D()}」回預設內容嗎？`):!1}function qe(){const e=De(),i=new Blob([`${JSON.stringify(e,null,2)}
`],{type:"application/json"}),r=window.URL.createObjectURL(i),c=document.createElement("a");c.href=r,c.download=`self-intro-backup-${new Date().toISOString().slice(0,10)}.json`,c.click(),window.URL.revokeObjectURL(r),P({kind:"success",message:"已導出自我介紹設定與文案"})}async function Ge(e){if(e)try{const i=await e.text(),r=JSON.parse(i);y(xe(r.prefs)),z(Fe(r)),P({kind:"success",message:"已導入自我介紹設定與文案"})}catch{P({kind:"error",message:"導入失敗：檔案格式不正確"})}finally{W.current&&(W.current.value="")}}function Ve(e){Ce(i=>{const r=new Set(i);return r.has(e)?r.delete(e):r.add(e),r})}function Qe(e,i){e.stopPropagation(),M(i)}function J(e){if(m<0)return;const i=a[m+e];i&&M(i.id)}function de(){G.current=null,V.current=null}function Ze(e){const i=e.touches[0];i&&(G.current=i.clientX,V.current=i.clientY)}function et(e){const i=G.current,r=V.current;if(de(),i===null||r===null)return;const c=e.changedTouches[0];if(!c)return;const g=c.clientX-i,x=c.clientY-r;Math.abs(g)<56||Math.abs(g)<Math.abs(x)*1.2||(g>0?J(-1):J(1))}return t.jsxs("div",{className:"self-intro-page",style:{"--self-intro-font-family":n?`'${n}', sans-serif`:""},children:[t.jsx("input",{ref:W,type:"file",accept:"application/json",className:"si-hidden-import",onChange:e=>{const i=e.target.files?.[0]??null;Ge(i)}}),t.jsxs("div",{className:"si-list-screen","aria-hidden":R,children:[t.jsxs("header",{className:"si-page-header",children:[t.jsx("button",{type:"button",className:"si-hd-back",onClick:s,children:"‹ 全部"}),t.jsx("span",{className:"si-hd-title",children:"自我介紹"}),t.jsxs("div",{className:"si-hd-right",children:[t.jsxs("span",{className:"si-hd-count",children:[a.length," 張"]}),t.jsx("button",{type:"button",className:"si-more-btn",onClick:()=>I(!0),"aria-label":"開啟小設定",children:"⋯"})]})]}),t.jsxs("div",{className:"si-scroll",children:[t.jsxs("section",{className:"si-hero",children:[t.jsx("div",{className:"si-hero-en",children:"M's Business Cards"}),t.jsx("h1",{className:"si-hero-zh",children:_.title.split(`
`).map(e=>t.jsxs("span",{children:[e,t.jsx("br",{})]},e))}),t.jsx("p",{className:"si-hero-desc",children:_.subtitle.split(`
`).map(e=>t.jsxs("span",{children:[e,t.jsx("br",{})]},e))})]}),t.jsxs("section",{className:"si-wall",id:"cardWall",children:[d?t.jsx("div",{className:"si-empty",children:"讀取中…"}):null,!d&&p?t.jsxs("div",{className:"si-empty",children:["讀取失敗：",p]}):null,!d&&!p&&!a.length?t.jsx("div",{className:"si-empty",children:"目前沒有自我介紹資料"}):null,!d&&!p?a.map((e,i)=>{const r=k[i%k.length]??k[0],c=he[i%he.length]??0,g=18+i%3*8,x=10+i%5*6;return t.jsx("article",{className:`si-card-wrap ${je.has(e.id)?"flipped":""}`,style:{"--si-rot":`${c}deg`},onClick:()=>Ve(e.id),children:t.jsxs("div",{className:"si-card-inner",children:[t.jsxs("div",{className:"si-card-face si-card-front",style:{background:r.bg,color:r.color,borderColor:r.border},children:[t.jsxs("div",{className:"si-cf-top",children:[t.jsx("span",{className:"si-cf-num",children:ee(i)}),t.jsxs("div",{className:"si-cf-deco",children:[t.jsx("span",{style:{width:`${g}px`}}),t.jsx("span",{style:{width:`${x}px`}})]})]}),t.jsx("div",{className:"si-cf-mid",children:t.jsx("div",{className:"si-cf-title",children:oe(e)})}),t.jsxs("div",{className:"si-cf-bot",style:{borderColor:r.border},children:[t.jsx("span",{className:"si-cf-date",children:e.date}),t.jsx("span",{className:"si-cf-m",children:"M"})]})]}),t.jsxs("div",{className:"si-card-face si-card-back",children:[t.jsx("div",{className:"si-cb-quote",children:Ie(e)}),t.jsx("button",{type:"button",className:"si-cb-btn",onClick:Z=>Qe(Z,e.id),children:"展開閱讀"})]})]})},e.id)}):null]})]})]}),t.jsxs("section",{className:`si-read-screen ${R?"open":""}`,"aria-hidden":!R,children:[t.jsxs("header",{className:"si-read-nav",children:[t.jsxs("button",{type:"button",className:"si-read-back",onClick:()=>M(null),children:[t.jsx("span",{className:"si-read-back-chev",children:"‹"}),t.jsx("span",{children:"返回"})]}),t.jsxs("div",{className:"si-read-tools",children:[t.jsx("button",{type:"button",onClick:()=>J(-1),disabled:!ne,className:ne?"":"dis",children:"‹"}),t.jsx("button",{type:"button",onClick:()=>J(1),disabled:!ae,className:ae?"":"dis",children:"›"}),t.jsx("button",{type:"button",onClick:()=>I(!0),"aria-label":"開啟小設定",children:"⋯"})]})]}),t.jsxs("div",{className:"si-read-scroll",onTouchStart:Ze,onTouchEnd:et,onTouchCancel:de,children:[t.jsxs("div",{className:"si-rp-head",children:[t.jsx("div",{className:"si-rp-badge",style:{background:Pe.accent},children:m>=0?ee(m):""}),t.jsx("div",{className:"si-rp-title",children:b?oe(b):""}),t.jsx("div",{className:"si-rp-date",children:b?.date??""})]}),t.jsx("pre",{className:"si-rp-content",style:{fontSize:`${l.contentFontSize}px`,lineHeight:l.contentLineHeight,fontFamily:Me},children:b?ve||"讀取內容中…":""})]})]}),ke?t.jsx("div",{className:"si-chibi-wrap",children:t.jsx("button",{type:"button",className:"si-chibi-btn",onClick:()=>I(!0),"aria-label":"開啟自我介紹設定",children:t.jsx("img",{src:we,alt:"",draggable:!1,className:"calendar-chibi select-none drop-shadow-md",style:{width:`${Ee}px`,maxWidth:"42vw",height:"auto"}})})}):null,Ne?t.jsx("div",{className:"si-settings-overlay",onClick:()=>I(!1),children:t.jsxs("div",{className:"si-settings-sheet",onClick:e=>e.stopPropagation(),children:[t.jsx("div",{className:"si-settings-handle"}),t.jsx("div",{className:"si-settings-head",children:"自我介紹小設定"}),t.jsxs("div",{className:"si-settings-body",children:[t.jsxs(U,{title:"文字排版",subtitle:"行距、字級、字體來源",isOpen:F.text,onToggle:()=>H(e=>({...e,text:!e.text})),className:"si-settings-card",titleClassName:"si-settings-card-title",subtitleClassName:"si-settings-card-subtitle",bodyClassName:"si-settings-card-body",children:[t.jsxs("div",{children:[t.jsx("p",{className:"si-slider-title",children:"字體來源"}),t.jsxs("div",{className:"si-font-mode-row",children:[t.jsx("button",{type:"button",className:`si-font-mode-btn ${l.fontMode==="default"?"active":""}`,onClick:()=>y(e=>({...e,fontMode:"default"})),children:"預設"}),t.jsx("button",{type:"button",className:`si-font-mode-btn ${l.fontMode==="memo"?"active":""}`,onClick:()=>y(e=>({...e,fontMode:"memo"})),children:"跟隨 M's memo"})]})]}),t.jsxs("div",{children:[t.jsx("p",{className:"si-slider-title",children:"行距設定"}),t.jsxs("p",{className:"si-slider-value",children:["目前：",l.contentLineHeight.toFixed(2)," 倍"]}),t.jsx("input",{type:"range",min:1.45,max:2.9,step:.02,value:l.contentLineHeight,onChange:e=>y(i=>({...i,contentLineHeight:T(Number(e.target.value),1.45,2.9,i.contentLineHeight)})),className:"si-slider"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"si-slider-title",children:"內文字級"}),t.jsxs("p",{className:"si-slider-value",children:["目前：",l.contentFontSize.toFixed(1),"px"]}),t.jsx("input",{type:"range",min:12,max:24,step:.5,value:l.contentFontSize,onChange:e=>y(i=>({...i,contentFontSize:T(Number(e.target.value),12,24,i.contentFontSize)})),className:"si-slider"})]})]}),t.jsxs(U,{title:"M",subtitle:"首頁與清單頁顯示",isOpen:F.listChibi,onToggle:()=>H(e=>({...e,listChibi:!e.listChibi})),className:"si-settings-card",titleClassName:"si-settings-card-title",subtitleClassName:"si-settings-card-subtitle",bodyClassName:"si-settings-card-body",children:[t.jsxs("div",{className:"si-toggle-row",children:[t.jsx("p",{className:"si-slider-title",children:"顯示 M"}),t.jsx("button",{type:"button",onClick:()=>y(e=>({...e,listShowChibi:!e.listShowChibi})),className:"si-switch",style:{background:l.listShowChibi?"#c9a66b":"rgba(120,120,120,0.35)"},children:t.jsx("span",{className:"si-switch-dot",style:{left:l.listShowChibi?20:2}})})]}),t.jsxs("div",{children:[t.jsx("p",{className:"si-slider-title",children:"M 大小"}),t.jsxs("p",{className:"si-slider-value",children:["目前：",l.listChibiWidth,"px"]}),t.jsx("input",{type:"range",min:104,max:196,step:1,value:l.listChibiWidth,onChange:e=>y(i=>({...i,listChibiWidth:K(Number(e.target.value),104,196,i.listChibiWidth)})),className:"si-slider"})]})]}),t.jsxs(U,{title:"閱讀M",subtitle:"閱讀頁顯示",isOpen:F.readingChibi,onToggle:()=>H(e=>({...e,readingChibi:!e.readingChibi})),className:"si-settings-card",titleClassName:"si-settings-card-title",subtitleClassName:"si-settings-card-subtitle",bodyClassName:"si-settings-card-body",children:[t.jsxs("div",{className:"si-toggle-row",children:[t.jsx("p",{className:"si-slider-title",children:"顯示 M"}),t.jsx("button",{type:"button",onClick:()=>y(e=>({...e,readingShowChibi:!e.readingShowChibi})),className:"si-switch",style:{background:l.readingShowChibi?"#c9a66b":"rgba(120,120,120,0.35)"},children:t.jsx("span",{className:"si-switch-dot",style:{left:l.readingShowChibi?20:2}})})]}),t.jsxs("div",{children:[t.jsx("p",{className:"si-slider-title",children:"M 大小"}),t.jsxs("p",{className:"si-slider-value",children:["目前：",l.readingChibiWidth,"px"]}),t.jsx("input",{type:"range",min:104,max:196,step:1,value:l.readingChibiWidth,onChange:e=>y(i=>({...i,readingChibiWidth:K(Number(e.target.value),104,196,i.readingChibiWidth)})),className:"si-slider"})]})]}),t.jsxs(U,{title:"資料管理",subtitle:"快取與設定",isOpen:F.data,onToggle:()=>H(e=>({...e,data:!e.data})),className:"si-settings-card",titleClassName:"si-settings-card-title",subtitleClassName:"si-settings-card-subtitle",bodyClassName:"si-settings-card-body",children:[t.jsxs("p",{className:"si-slider-value",children:["已快取內容：",Object.keys($).length," 份"]}),t.jsxs("div",{className:"si-data-actions",children:[t.jsx("button",{type:"button",className:"si-data-btn",onClick:qe,children:"導出"}),t.jsx("button",{type:"button",className:"si-data-btn",onClick:()=>W.current?.click(),children:"導入"}),t.jsx("button",{type:"button",className:"si-data-btn",onClick:We,children:"編輯小卡正反面文字"}),t.jsx("button",{type:"button",className:"si-data-btn",onClick:Ae,children:"清除快取"}),t.jsx("button",{type:"button",className:"si-data-btn",onClick:()=>{Je()&&ze()},children:"重設設定"})]})]})]})]})}):null,Se?t.jsx("div",{className:"si-copy-editor-overlay",onClick:()=>A(!1),children:t.jsxs("div",{className:"si-copy-editor-sheet",onClick:e=>e.stopPropagation(),children:[t.jsxs("div",{className:"si-copy-editor-head",children:[t.jsx("button",{type:"button",className:"si-copy-editor-head-btn",onClick:()=>A(!1),children:"返回"}),t.jsx("div",{className:"si-copy-editor-title",children:"小卡文字編輯"}),t.jsx("button",{type:"button",className:"si-copy-editor-head-btn",onClick:Be,children:"完成"})]}),t.jsx("div",{className:"si-copy-editor-desc",children:"封面字＝卡片正面標題，翻面字＝卡片背面句子。留空會使用原始文字。"}),t.jsxs("div",{className:"si-copy-editor-scope",children:[t.jsxs("label",{className:"si-copy-editor-scope-label",children:["編輯組別",t.jsx("select",{value:N,onChange:e=>_e(e.target.value),className:"si-copy-editor-select",children:be.map(e=>t.jsx("option",{value:e.id,children:e.label},e.id))})]}),t.jsx("p",{className:"si-copy-editor-scope-note",children:f?"預設組是原始內容，僅供查看；請切到記憶1或記憶2再編輯。":`目前正在編輯 ${D()}。`})]}),t.jsxs("section",{className:"si-copy-editor-hero",children:[t.jsxs("label",{className:"si-copy-editor-label",children:["大標題",t.jsx("textarea",{value:_.title,onChange:e=>ce({title:e.target.value}),className:"si-copy-editor-textarea",rows:2,disabled:f})]}),t.jsxs("label",{className:"si-copy-editor-label",children:["副標題",t.jsx("textarea",{value:_.subtitle,onChange:e=>ce({subtitle:e.target.value}),className:"si-copy-editor-textarea",rows:3,disabled:f})]}),t.jsx("div",{className:"si-copy-editor-hero-actions",children:t.jsx("button",{type:"button",className:"si-copy-editor-reset",onClick:()=>{Ke()&&Le()},disabled:f,children:"重設此組"})})]}),t.jsx("div",{className:"si-copy-editor-list",children:a.map((e,i)=>{const r=B[e.id]??{title:"",tagline:""};return t.jsxs("article",{className:"si-copy-editor-card",children:[t.jsxs("div",{className:"si-copy-editor-card-head",children:[t.jsx("span",{children:ee(i)}),t.jsx("button",{type:"button",onClick:()=>{Xe()&&Oe(e.id)},className:"si-copy-editor-reset",disabled:f,children:"還原此卡"})]}),t.jsxs("label",{className:"si-copy-editor-label",children:["封面字",t.jsx("input",{type:"text",value:f?e.title:r.title,onChange:c=>le(e.id,{title:c.target.value}),placeholder:e.title,className:"si-copy-editor-input",disabled:f})]}),t.jsxs("label",{className:"si-copy-editor-label",children:["翻面字",t.jsx("textarea",{value:f?e.tagline:r.tagline,onChange:c=>le(e.id,{tagline:c.target.value}),placeholder:e.tagline,className:"si-copy-editor-textarea",rows:3,disabled:f})]})]},`edit-${e.id}`)})}),t.jsx("div",{className:"si-copy-editor-foot",children:t.jsx("button",{type:"button",className:"si-copy-editor-clear-all",onClick:()=>{Ue()&&Te()},disabled:!Ye(),children:"清空此組全部自訂"})})]})}):null]})}export{Nt as SelfIntroPage,Nt as default};
