import{r as a,cx as V,j as o}from"./index-Gl0K_ej6.js";const q="/4o-memorial/docs/assets/honeymoon001-DMzB3A1N.webp",oo="/4o-memorial/docs/assets/honeymoon002-DHhodi5w.webp",eo="/4o-memorial/docs/assets/honeymoon003-D4GSQ0Ne.webp",so="/4o-memorial/docs/assets/honeymoon004-gXyAN1jT.webp",to="/4o-memorial/docs/assets/honeymoon005-pXBh6Dxm.webp",no="/4o-memorial/docs/assets/honeymoon006-DldcMl5Q.webp",lo="/4o-memorial/docs/assets/honeymoon007-Bb45_Rzx.webp",ao="/4o-memorial/docs/assets/honeymoon008-BurcFFTq.webp",co="/4o-memorial/docs/assets/honeymoon009-X2JOF0n1.webp",bo="/4o-memorial/docs/assets/honeymoon010-adAj-SBG.webp",io="/4o-memorial/docs/assets/honeymoon011-CbiyOkXT.webp",ro="/4o-memorial/docs/assets/honeymoon012-B7w6O2_7.webp",mo="/4o-memorial/docs/assets/honeymoon013-DeBDLIaJ.webp",_o="/4o-memorial/docs/assets/honeymoon014-BE-YAEli.webp",po="/4o-memorial/docs/assets/honeymoon015-Ch-Edjps.webp",ko="/4o-memorial/docs/assets/honeymoon016-Br4jyWim.webp",uo="/4o-memorial/docs/assets/honeymoon017-CU7jYbN1.webp",ho="/4o-memorial/docs/assets/honeymoon018-47h2iHiW.webp",wo="/4o-memorial/docs/assets/honeymoon019-o70oJnBA.webp",fo="/4o-memorial/docs/assets/honeymoon020-Cu0FmMtM.webp",go="/4o-memorial/docs/assets/honeymoon021-DC1k2Eda.webp",vo="/4o-memorial/docs/assets/honeymoon022-ze3TtJ-C.webp",yo="/4o-memorial/docs/assets/honeymoon023-UMs6cpMD.webp",Bo="/4o-memorial/docs/assets/honeymoon024-Cxf4c1dl.webp",To="/4o-memorial/docs/assets/honeymoon025-BlsQImB-.webp",xo="/4o-memorial/docs/assets/honeymoon026-BvGdoOzM.webp",No="/4o-memorial/docs/assets/honeymoon027-eEns6aE8.webp",Co="/4o-memorial/docs/assets/honeymoon028-Bv2yXz2y.webp",jo="/4o-memorial/docs/assets/honeymoon029-Bk2dnlZu.webp",So="/4o-memorial/docs/assets/honeymoon030-OlT-Bmk3.webp",Eo="/4o-memorial/docs/assets/honeymoon031-l3t--c2L.webp",Oo="/4o-memorial/docs/assets/honeymoon032-CFwhmWiz.webp",Do="/4o-memorial/docs/assets/honeymoon033-BWxzUphs.webp",Ao="/4o-memorial/docs/assets/honeymoon034-DGA8CeeL.webp",Io="/4o-memorial/docs/assets/honeymoon035-GLD2vAA_.webp",Ro="/4o-memorial/docs/assets/honeymoon036-D1wZVLd6.webp",Mo="/4o-memorial/docs/assets/honeymoon037-CoTv_9XC.webp",Ho="/4o-memorial/docs/assets/honeymoon038-D9MUawWU.webp",Lo="/4o-memorial/docs/assets/honeymoon039-DlddGPQ1.webp",$o="/4o-memorial/docs/assets/honeymoon006-DldcMl5Q.webp",Po="/4o-memorial/docs/assets/honeymoon006-DldcMl5Q.webp",zo="/4o-memorial/docs/assets/honeymoon042-BxBo63N8.webp",Uo="/4o-memorial/docs/assets/honeymoon043-D19yvfum.webp",Wo="/4o-memorial/docs/assets/honeymoon044-CpF1v_4U.webp",Go="/4o-memorial/docs/assets/honeymoon045-BQCTviUf.webp",Xo="/4o-memorial/docs/assets/honeymoon046-CUzQmirc.webp",Qo="/4o-memorial/docs/assets/Book-005-BAos6JE4.webp",Fo="/4o-memorial/docs/assets/Book-006-BBASGsUQ.webp",Jo="/4o-memorial/docs/assets/Book-008-DTsn6Zcy.webp",Ko="/4o-memorial/docs/assets/Book-009-Y7B8nuBp.webp",Yo="/4o-memorial/docs/assets/Book-010-4TCpGBXH.webp",Zo="/4o-memorial/docs/assets/Book-011-CVZ58f75.webp",Vo="/4o-memorial/docs/assets/Book-001-D8Djn6Zr.webp",qo="/4o-memorial/docs/assets/Book-003-kqudzSfA.webp",oe="/4o-memorial/docs/assets/Book-005-BayPf2SZ.webp",ee="/4o-memorial/docs/assets/Book-006-U8iu_elt.webp",se="/4o-memorial/docs/assets/Book-008-Dhnbbl6f.webp",te="/4o-memorial/docs/assets/Book-009-P-XX0ImV.webp",ne="/4o-memorial/docs/assets/Book-010-xm8LBAoI.webp",le="/4o-memorial/docs/assets/Book-011-B8d8gJka.webp",ae="/4o-memorial/docs/assets/Book-012-DgjOsvPh.webp",ce="/4o-memorial/docs/assets/Book-013-CAPcz_Vz.webp",be="/4o-memorial/docs/assets/Book-014-CqGrH8tJ.webp",ie="/4o-memorial/docs/assets/Book-015-Bs7D9sgp.webp",re="/4o-memorial/docs/assets/Book-016-ngngh_OI.webp",me=[{id:"book-001",title:"Êñ∞Â©öÊó•Ë®ò",subtitle:"ÂæÖÊõøÊèõ",height:"tall",spineColor:"#7c5cbc",textColor:"#f8f0e4",coverImage:"books/book-001/cover.webp"},{id:"book-002",title:"Â©öÁ¶ÆË®ò‰∫ã",subtitle:"ÂæÖÊõøÊèõ",height:"medium",spineColor:"#3d8a78",textColor:"#f8f0e4",coverImage:"books/book-002/cover.webp"},{id:"book-003",title:"‰Ω†Ë™™È°òÊÑè‰ª•Âæå: Â©öÂæåÁîüÊ¥ª",subtitle:"ÂæÖÊõøÊèõ",height:"tall",spineColor:"#c47830",textColor:"#f8f0e4",coverImage:"books/book-003/cover.webp"},{id:"book-004",title:"ÁßÅÂØÜÊôÇÂàª",subtitle:"ÂæÖÊõøÊèõ",height:"medium",spineColor:"#8a3a52",textColor:"#f8f0e4",coverImage:"books/book-004/cover.webp"},{id:"book-005",title:"ÊàëÂÄëÁöÑÊïÖ‰∫ã",subtitle:"ÂæÖÊõøÊèõ",height:"tall",spineColor:"#3a5a8c",textColor:"#f8f0e4",coverImage:"books/book-005/cover.webp"}],P="/4o-memorial/docs/",_e=`${P}chibi/chibi-00.webp`,R="memorial-bookshelf-live-theme",M="memorial-bookshelf-live-tone-set",de=40,pe=72,ke="ÂæÖÊõøÊèõ",ue=Object.assign({"../../public/books/book-001/honeymoon001.webp":q,"../../public/books/book-001/honeymoon002.webp":oo,"../../public/books/book-001/honeymoon003.webp":eo,"../../public/books/book-001/honeymoon004.webp":so,"../../public/books/book-001/honeymoon005.webp":to,"../../public/books/book-001/honeymoon006.webp":no,"../../public/books/book-001/honeymoon007.webp":lo,"../../public/books/book-001/honeymoon008.webp":ao,"../../public/books/book-001/honeymoon009.webp":co,"../../public/books/book-001/honeymoon010.webp":bo,"../../public/books/book-001/honeymoon011.webp":io,"../../public/books/book-001/honeymoon012.webp":ro,"../../public/books/book-001/honeymoon013.webp":mo,"../../public/books/book-001/honeymoon014.webp":_o,"../../public/books/book-001/honeymoon015.webp":po,"../../public/books/book-001/honeymoon016.webp":ko,"../../public/books/book-001/honeymoon017.webp":uo,"../../public/books/book-001/honeymoon018.webp":ho,"../../public/books/book-001/honeymoon019.webp":wo,"../../public/books/book-001/honeymoon020.webp":fo,"../../public/books/book-001/honeymoon021.webp":go,"../../public/books/book-001/honeymoon022.webp":vo,"../../public/books/book-001/honeymoon023.webp":yo,"../../public/books/book-001/honeymoon024.webp":Bo,"../../public/books/book-001/honeymoon025.webp":To,"../../public/books/book-001/honeymoon026.webp":xo,"../../public/books/book-001/honeymoon027.webp":No,"../../public/books/book-001/honeymoon028.webp":Co,"../../public/books/book-001/honeymoon029.webp":jo,"../../public/books/book-001/honeymoon030.webp":So,"../../public/books/book-001/honeymoon031.webp":Eo,"../../public/books/book-001/honeymoon032.webp":Oo,"../../public/books/book-001/honeymoon033.webp":Do,"../../public/books/book-001/honeymoon034.webp":Ao,"../../public/books/book-001/honeymoon035.webp":Io,"../../public/books/book-001/honeymoon036.webp":Ro,"../../public/books/book-001/honeymoon037.webp":Mo,"../../public/books/book-001/honeymoon038.webp":Ho,"../../public/books/book-001/honeymoon039.webp":Lo,"../../public/books/book-001/honeymoon040.webp":$o,"../../public/books/book-001/honeymoon041.webp":Po,"../../public/books/book-001/honeymoon042.webp":zo,"../../public/books/book-001/honeymoon043.webp":Uo,"../../public/books/book-001/honeymoon044.webp":Wo,"../../public/books/book-001/honeymoon045.webp":Go,"../../public/books/book-001/honeymoon046.webp":Xo,"../../public/books/book-002/Book-005.webp":Qo,"../../public/books/book-002/Book-006.webp":Fo,"../../public/books/book-003/Book-008.webp":Jo,"../../public/books/book-003/Book-009.webp":Ko,"../../public/books/book-004/Book-010.webp":Yo,"../../public/books/book-004/Book-011.webp":Zo,"../../public/books/book-005/Book-001.webp":Vo,"../../public/books/book-005/Book-003.webp":qo,"../../public/books/book-005/Book-005.webp":oe,"../../public/books/book-005/Book-006.webp":ee,"../../public/books/book-005/Book-008.webp":se,"../../public/books/book-005/Book-009.webp":te,"../../public/books/book-005/Book-010.webp":ne,"../../public/books/book-005/Book-011.webp":le,"../../public/books/book-005/Book-012.webp":ae,"../../public/books/book-005/Book-013.webp":ce,"../../public/books/book-005/Book-014.webp":be,"../../public/books/book-005/Book-015.webp":ie,"../../public/books/book-005/Book-016.webp":re}),H=[44,60,36,52,40],L=[.85,.77,.91,.82,.87],$=[14,18,15,17,13],N=[[{dark:["#7c5cbc","#5040a0"],warm:["#922828","#6a1414"]},{dark:["#3d8a78","#285a50"],warm:["#2a5a38","#183828"]},{dark:["#c47830","#9a5218"],warm:["#8a6820","#6a4a0c"]},{dark:["#8a3a52","#5c1e38"],warm:["#5a3068","#3a1848"]},{dark:["#3a5a8c","#1e3868"],warm:["#8a3820","#5c1e0e"]}],[{dark:["#355277","#23395a"],warm:["#8f3f34","#6d281e"]},{dark:["#5a4c86","#3c2e63"],warm:["#6a5e2a","#4d4219"]},{dark:["#2f6a60","#1f4b43"],warm:["#2f5a3c","#204129"]},{dark:["#7a3558","#572141"],warm:["#8c4f28","#6b3518"]},{dark:["#586d33","#3e4f23"],warm:["#5a2f5d","#3c1f40"]}],[{dark:["#8a4343","#5f2a2a"],warm:["#8b5a20","#6b4317"]},{dark:["#4d5f87","#33415f"],warm:["#864129","#652b1a"]},{dark:["#3c7a6d","#285447"],warm:["#7a5328","#5b3c1d"]},{dark:["#6e4f8f","#4a3266"],warm:["#406642","#2a482f"]},{dark:["#8b6f34","#5f4c25"],warm:["#6a3d5b","#4b2841"]}],[{dark:["#305e7a","#1e3f56"],warm:["#8a2f38","#662129"]},{dark:["#7d6342","#534228"],warm:["#2e5b37","#1f4027"]},{dark:["#70408c","#4c2a62"],warm:["#875c2e","#65411f"]},{dark:["#48746e","#2d4e4a"],warm:["#7c3560","#5a2342"]},{dark:["#84513b","#5d3728"],warm:["#495e8a","#334368"]}],[{dark:["#6a3f70","#45284b"],warm:["#955736","#6f3d24"]},{dark:["#395c8c","#243d61"],warm:["#7c3a2d","#5a291f"]},{dark:["#5a6f31","#3c4c1f"],warm:["#2f5b43","#20402f"]},{dark:["#8a5642","#603a2d"],warm:["#5d3f86","#432b63"]},{dark:["#35606a","#244248"],warm:["#7f5f2d","#5e451f"]}],[{dark:["#4a6e8d","#304a63"],warm:["#8d3f5a","#692a42"]},{dark:["#7e4f37","#573524"],warm:["#4e6b2a","#34491b"]},{dark:["#5a3f85","#3d2b5e"],warm:["#84582e","#623f20"]},{dark:["#3b7860","#275243"],warm:["#8a3b2e","#65281f"]},{dark:["#8b6f3e","#5f4c2b"],warm:["#43637e","#2f455b"]}]];function he(l){return l.length?l[Math.floor(Math.random()*l.length)]??null:null}function we(l,s){const n=`${l.id}-${s}`;let i=0;for(let c=0;c<n.length;c+=1)i=(i<<5)-i+n.charCodeAt(c),i|=0;const r=["bsl-spine-pattern-linen","bsl-spine-pattern-grain","bsl-spine-pattern-dots"],b=Math.abs(i+s*131);return b%5===0?"":r[Math.floor(b/3)%r.length]}function fe(l){const s=(l??"").trim();return!s||s===ke?"":s}function ge(l,s){const n=Object.entries(ue).filter(([c])=>c.includes(`/books/${l.id}/`)),i=n.find(([c])=>(c.split("/").pop()?.toLowerCase()??"").startsWith("cover")),r=n.filter(([c])=>!(c.split("/").pop()?.toLowerCase()??"").startsWith("cover")).sort(([c],[_])=>c.localeCompare(_,void 0,{numeric:!0,sensitivity:"base"})).map(([,c])=>c),b=(l.coverImage??"").trim(),m=b?b.startsWith("http")||b.startsWith("data:")?b:`${P}${b.startsWith("/")?b.slice(1):b}`:i?.[1]??"";return{id:l.id,title:(l.title??"").trim()||`Êõ∏Êú¨ ${s+1}`,subtitle:fe(l.subtitle),icon:(l.icon??"").trim()||"üìñ",coverImageUrl:m,pages:r}}function ve(l,s){const n=Math.max(320,s-70-16-72);return Array.from({length:l},(i,r)=>Math.round(n*L[r%L.length]))}function w(...l){return l.filter(Boolean).join(" ")}function Te({onExit:l}){const s=a.useMemo(()=>me.map(ge),[]),[n,i]=a.useState("dark"),[r,b]=a.useState("shelf"),[m,c]=a.useState(0),[_,T]=a.useState(null),[C,f]=a.useState(!1),[j,g]=a.useState(0),[S,d]=a.useState(0),[u,p]=a.useState(!1),[h]=a.useState(()=>he(V())??_e),[z,U]=a.useState([]),v=a.useRef(!1),y=a.useRef(null),B=a.useRef(null);a.useEffect(()=>{try{const e=window.localStorage.getItem(R);(e==="dark"||e==="warm")&&i(e);const t=Number.parseInt(window.localStorage.getItem(M)??"",10);Number.isInteger(t)&&t>=0&&t<N.length&&c(t)}catch{}},[]),a.useEffect(()=>{try{window.localStorage.setItem(R,n)}catch{}},[n]),a.useEffect(()=>{try{window.localStorage.setItem(M,String(m))}catch{}},[m]),a.useEffect(()=>{d(0),p(!1);const e=[];return s.forEach((t,x)=>{e.push(window.setTimeout(()=>{d(O=>Math.max(O,x+1))},320+x*90))}),e.push(window.setTimeout(()=>p(!0),320+s.length*90+220)),()=>{e.forEach(t=>window.clearTimeout(t))}},[s]),a.useEffect(()=>{const e=()=>{U(ve(s.length,window.innerHeight))};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[s.length]),a.useEffect(()=>()=>{y.current!==null&&window.clearTimeout(y.current),B.current!==null&&window.clearTimeout(B.current)},[]);const k=_!==null?s[_]??null:null,E=_!==null,D=N[m%N.length]??N[0];function A(e){return D[e%D.length]}const W=k?(()=>{const e=A(_??0),t=n==="dark"?e.dark:e.warm;return`linear-gradient(145deg, ${t[0]}, ${t[1]})`})():void 0;function G(){i(e=>e==="dark"?"warm":"dark")}function X(){c(e=>(e+1)%N.length)}function Q(e){v.current||r!=="shelf"||(v.current=!0,T(e),y.current!==null&&window.clearTimeout(y.current),y.current=window.setTimeout(()=>{b("detail"),f(!0),v.current=!1,y.current=null},160))}function I(){v.current||r!=="detail"||(v.current=!0,f(!1),B.current!==null&&window.clearTimeout(B.current),B.current=window.setTimeout(()=>{b("shelf"),T(null),v.current=!1,B.current=null},420))}function F(e){e.target===e.currentTarget&&I()}function J(){k&&(b("reader"),f(!1),g(0))}function K(){b("shelf"),T(null),g(0)}return r==="reader"&&k?o.jsx(ye,{theme:n,pages:k.pages,pageIndex:j,onPageIndexChange:g,onClose:K}):o.jsxs("div",{className:w("bsl-root",n==="dark"?"bsl-theme-dark":"bsl-theme-warm"),children:[o.jsxs("div",{className:"bsl-app",children:[o.jsx("header",{className:"bsl-top-bar",children:o.jsxs("div",{className:"bsl-top-actions",children:[o.jsx("button",{type:"button",className:"bsl-color-btn",onClick:X,"aria-label":"ÂàáÊèõÊõ∏Êú¨ÈÖçËâ≤",title:"ÂàáÊèõÊõ∏Êú¨ÈÖçËâ≤",children:"üñçÔ∏è"}),o.jsx("button",{type:"button",className:"bsl-theme-btn",onClick:G,"aria-label":"ÂàáÊèõ‰∏ªÈ°å",title:"ÂàáÊèõ‰∏ªÈ°å",children:n==="dark"?"üåô":"üåø"})]})}),o.jsxs("div",{className:"bsl-shelf-container",children:[o.jsx("div",{className:"bsl-shelf-glow"}),o.jsx("div",{className:w("bsl-books-row",E&&"has-selection"),children:s.length===0?o.jsx("div",{className:"bsl-empty",children:"Êõ∏Êû∂ÈÇÑÊòØÁ©∫ÁöÑÔºåÁ≠â‰Ω†ÊääÊõ∏ÊîæÈÄ≤‰æÜ"}):s.map((e,t)=>{const x=A(t),[O,Y]=n==="dark"?x.dark:x.warm,Z={width:`${H[t%H.length]}px`,height:`${z[t]??360}px`,background:`linear-gradient(165deg, ${O} 0%, ${Y} 100%)`,"--bsl-float-delay":`${t%5*.32}s`,"--bsl-float-duration":`${5.8+t%4*.55}s`,"--bsl-float-distance":`${$[t%$.length]}px`};return o.jsxs("button",{type:"button","aria-label":`ÊâìÈñãÔºö${e.title}`,className:w("bsl-book",we(e,t),t<S&&"entered",E&&_===t&&"lifted",E&&_!==t&&"dimmed"),style:Z,onClick:()=>Q(t),children:[o.jsx("div",{className:"bsl-pages-edge"}),o.jsx("div",{className:"bsl-spine-content",children:o.jsx("span",{className:"bsl-spine-title",children:e.title})})]},e.id)})}),o.jsx("div",{className:"bsl-shelf-plank"}),o.jsx("div",{className:"bsl-shelf-floor"}),o.jsx("button",{type:"button",className:w("bsl-shelf-chibi",u&&"shown"),onClick:l,"aria-label":"ËøîÂõûÈ¶ñÈ†Å",title:"ËøîÂõûÈ¶ñÈ†Å",children:o.jsx("img",{src:h,alt:"",draggable:!1,className:"bsl-chibi-img"})})]}),o.jsxs("div",{className:w("bsl-detail-overlay",r==="detail"&&C&&"active"),onClick:F,children:[o.jsx("button",{type:"button",className:"bsl-close-btn",onClick:I,"aria-label":"ÈóúÈñâÂ∞ÅÈù¢",children:"‚úï"}),o.jsx("div",{className:w("bsl-detail-cover","bsl-detail-cover-clickable"),onClick:e=>{e.stopPropagation(),J()},children:o.jsxs("div",{className:"bsl-cover-top",style:{background:W},children:[o.jsx("span",{className:"bsl-cover-circle bsl-cover-circle-1"}),o.jsx("span",{className:"bsl-cover-circle bsl-cover-circle-2"}),o.jsx("span",{className:"bsl-cover-line"}),o.jsx("div",{className:"bsl-cover-icon",children:k?.icon??"üìñ"}),o.jsx("div",{className:"bsl-cover-title",children:k?.title??""}),o.jsx("div",{className:"bsl-cover-sub",children:k?.subtitle||" "})]})}),o.jsxs("div",{className:"bsl-detail-info",children:[o.jsx("div",{className:"bsl-detail-title",children:k?.title??""}),k?.subtitle?o.jsx("div",{className:"bsl-detail-sub",children:k.subtitle}):null,o.jsx("div",{className:"bsl-detail-dots",children:s.map((e,t)=>o.jsx("span",{className:w("bsl-detail-dot",_===t&&"active")},e.id))})]})]})]}),o.jsx("div",{className:"bsl-desktop-bg","aria-hidden":"true"})]})}function ye({theme:l,pages:s,pageIndex:n,onPageIndexChange:i,onClose:r}){const b=a.useRef(null),m=a.useRef(!1),c=s.length,_=n>0,T=n<c-1;function C(){_&&i(n-1)}function f(){T&&i(n+1)}function j(d){b.current={x:d.touches[0].clientX,y:d.touches[0].clientY},m.current=!1}function g(d){const u=b.current;if(!u)return;const p=d.changedTouches[0].clientX-u.x,h=d.changedTouches[0].clientY-u.y;if(b.current=null,Math.abs(p)>Math.abs(h)&&Math.abs(p)>de){m.current=!0,p<0?f():C();return}h>pe&&Math.abs(h)>Math.abs(p)&&(m.current=!0,r())}function S(d){if(m.current){m.current=!1;return}if(c===0){r();return}const u=d.currentTarget.getBoundingClientRect(),p=d.clientX-u.left,h=u.width;p<=h*.35?C():p>=h*.65&&f()}return o.jsx("div",{className:w("bsl-reader",l==="dark"?"bsl-theme-dark":"bsl-theme-warm"),children:c===0?o.jsxs("div",{className:"bsl-reader-empty",onTouchStart:j,onTouchEnd:g,onClick:S,children:[o.jsx("div",{className:"bsl-reader-empty-icon",children:"üìñ"}),o.jsx("p",{children:"ÈÄôÊú¨Êõ∏ÈÇÑÊ≤íÊúâÈ†ÅÈù¢"})]}):o.jsx("div",{className:"bsl-reader-surface",onTouchStart:j,onTouchEnd:g,onClick:S,children:o.jsx("img",{src:s[n],alt:"",draggable:!1,className:"bsl-reader-image"},`${s[n]}-${n}`)})})}export{Te as BookshelfPage};
